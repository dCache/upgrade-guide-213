<html>
<head>
	<meta http-equiv="content-type" content="text/html; charset=utf-8"/>
	<title>dCache 2.13 Release Notes</title>
	<meta name="generator" content="LibreOffice 5.0.2.2 (Linux)"/>
	<meta name="created" content="00:00:00"/>
	<meta name="changed" content="2015-11-10T16:51:16.746494510"/>
	<meta name="" content=""/>
	<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
	<meta name="created" content="00:00:00">
	<meta name="changed" content="2015-11-09T16:23:24.669688087">
	<meta name="" content="">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta name="created" content="00:00:00">
	<meta name="changed" content="2015-11-06T16:34:12.834589501">
	<meta name="" content="">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta name="created" content="00:00:00">
	<meta name="changed" content="2015-11-05T15:33:52.224221521">
	<style type="text/css">
		@page { margin: 0.79in }
		address { color: #333333; font-family: "Helvetica Neue", "Helvetica", "Arial", sans-serif; font-size: 10pt; line-height: 142% }
		td p { margin-bottom: 0.1in; color: #333333; font-family: "Helvetica Neue", "Helvetica", "Arial", sans-serif; font-size: 10pt; line-height: 142% }
		h1 { background: transparent; text-transform: uppercase; color: #000000; letter-spacing: 1.5pt; line-height: 120% }
		h1.western { font-family: "Poiret One"; font-size: 18pt; font-style: italic }
		h1.cjk { font-family: "Poiret One"; font-size: 27pt }
		h1.ctl { font-family: "Poiret One"; font-size: 27pt }
		p { margin-bottom: 0.1in; color: #333333; font-family: "Helvetica Neue", "Helvetica", "Arial", sans-serif; font-size: 10pt; line-height: 142% }
		h2 { text-transform: uppercase; color: #000000; letter-spacing: 1.5pt; line-height: 120% }
		h2.western { font-family: "Poiret One"; font-size: 14pt; font-style: italic; font-weight: normal }
		h2.cjk { font-family: "Poiret One"; font-size: 22pt }
		h2.ctl { font-family: "Poiret One"; font-size: 22pt }
		h3 { margin-top: 0.21in; margin-bottom: 0.1in; font-variant: normal; color: #000000; line-height: 120% }
		h3.western { font-family: "Poiret One"; font-size: 13pt; font-style: italic }
		h3.cjk { font-family: "Poiret One"; font-size: 18pt }
		h3.ctl { font-family: "Poiret One"; font-size: 18pt }
		h4 { color: #000000; line-height: 142% }
		h4.western { font-family: "Poiret One"; font-style: italic; font-weight: normal }
		h4.cjk { font-family: "Poiret One"; font-size: 13pt }
		h4.ctl { font-family: "Poiret One"; font-size: 13pt }
		pre { margin-top: 0.1in; margin-bottom: 0.08in; color: #333333; font-family: monospace, monospace }
		dd { color: #333333 }
		h5 { color: #333333 }
		h5.western { font-size: 13pt }
		h5.cjk { font-family: "Droid Sans Fallback" }
		h5.ctl { font-family: "FreeSans"; font-weight: normal }
		dt { color: #333333 }
		th p { margin-bottom: 0.1in; color: #333333; font-family: "Helvetica Neue", "Helvetica", "Arial", sans-serif; font-size: 10pt; line-height: 142% }
		h6 { color: #333333 }
		h6.western { font-size: 12pt; font-style: italic; font-weight: normal }
		h6.cjk { font-family: "Droid Sans Fallback" }
		h6.ctl { font-family: "FreeSans"; font-weight: demi-bold }
		a:link { color: #428bca; text-decoration: none }
		code { font-family: monospace, monospace }
		a:visited { color: #b3333a; text-decoration: none }
	</style>
</head>
<body lang="es-ES" text="#333333" link="#428bca" vlink="#b3333a" dir="ltr">
<div id="content" dir="ltr" style="background: #f9fcfc">
	<p style="margin-top: 0.17in; margin-bottom: 0.2in; line-height: 100%; page-break-after: avoid">
	<font face="Albany, sans-serif"><font size="6" style="font-size: 26pt"><i><b>The
	ultimate golden release upgrade guide<br/>
<font size="4" style="font-size: 14pt">How
	to get from dCache 2.10</font> <font size="4" style="font-size: 14pt">to
	dCache 2.13</font></b></i></font></font></p>
	<address style="margin-top: 0.1in; margin-bottom: 0.08in"><span style="display: inline-block; border: none; padding: 0in"><font color="#656974"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><strong>Authors</font></font></font></strong><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974"><br/>
Gerd
	Behrmann &lt;behrmann@ndgf.org&gt;<br/>
Paul</font></font></font><font color="#656974">
	</font><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">Millar</font></font></font><font color="#656974">
	</font><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">&lt;paul.millar@desy.de&gt;<br/>
Marc
	Caubet &lt;mcaubet@pic.es&gt;</span></font></font></font></address>
	<h1 class="western">About this Document</h1>
	<p style="margin-top: 0.1in; margin-bottom: 0.08in"><span style="display: inline-block; border: none; padding: 0in"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">The
	dCache golden release upgrade guides aim to make migrating between
	golden releases easier by compiling all important information into a
	single document. The document is based on the release notes of
	versions 2.10, 2.11, 2.12 and 2.13. In contrast to the release
	notes, the guide ignores minor changes and is structured more along
	the lines of functionality groups rather than individual services.</span></font></font></font></p>
	<p><span style="display: inline-block; border: none; padding: 0in"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">Although
	the guide aims to collect all information required to upgrade from
	dCache 2.10 to 2.13, there is information in the release notes not
	found in this guide. The reader is advised to at least have a brief
	look at the release notes found at</span></font></font></font>
	<a href="http://www.dcache.org/">dCache.org</a>.</p>
	<p><span style="display: inline-block; border: none; padding: 0in"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">There
	are plenty of changes to configuration properties, default values,
	log output, admin shell commands, admin shell output, etc. If you
	have scripts that generate dCache configuration, issue shell
	commands, or parse the output of shell commands or log files, then
	you should expect that these scripts need to be adjusted. This
	document does not list all those changes.</span></font></font></font></p>
	<h1 class="western">About this Release</h1>
	<p style="margin-top: 0.1in; margin-bottom: 0.08in"><span style="display: inline-block; border: none; padding: 0in"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">dCache
	2.13 is the sixth golden (long term support) release of dCache. The
	release will be supported at least until summer 2017. This is the
	recommended release for the second LHC run.</span></font></font></font></p>
	<p><span style="display: inline-block; border: none; padding: 0in"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">As
	always, the amount of changes between this and the previous golden
	release is staggering. We have tried to make the upgrade process as
	smooth as possible, while at the same time moving the product
	forward. This means that we try to make dCache backwards compatible
	with the previous golden release, but not at the expense of changes
	that we believe improve dCache in the long run.</span></font></font></font></p>
	<p><span style="display: inline-block; border: none; padding: 0in"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">The
	most visible change when upgrading is that most configuration
	properties have been renamed, and some have changed default values.
	Many services have been renamed, split, or merged. These changes
	require work when upgrading, even though most of them are cosmetic -
	they improve the consistency of dCache and thus ease the
	configuration, but those changes do not fundamentally affect how
	dCache works.</span></font></font></font></p>
	<p><span style="display: inline-block; border: none; padding: 0in"><font color="#656974"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><i><u><code>dCache
	pools from version 2.10 can be mixed with services from dCache 2.13.
	This enables a staged roll-out in which non-pool nodes are upgraded
	to 2.13 first, followed by pools later. It is however recommended to
	upgrade to the latest version of 2.10 before performing a staged
	roll-out. [→ NEEDS TO BE REVISED]</span></u></i></font></font></font></code></p>
	<p><span style="display: inline-block; border: none; padding: 0in"><span style="font-variant: normal"><font color="#656974"><span style="text-decoration: none"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><code>Upgrading
	directly from versions prior to 2.10 is not officially supported. If
	you run versions before 2.10, we recommend upgrading to 2.10 first.
	That is not to say that upgrading directly to 2.13</span></font></font></span></font></span></code><span style="font-variant: normal"><font color="#656974"><span style="text-decoration: none"><code>
	</span></font></span></code><span style="font-variant: normal"><font color="#656974"><span style="text-decoration: none"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><code>is
	not possible, but we have not explicitly tested nor documented such
	an upgrade path.</span></span></font></font></span></font></span></code></p>
	<p><span style="display: inline-block; border: none; padding: 0in"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">Downgrading
	after upgrade is not possible without manual intervention: In
	particular database schemas have to be rolled back <i>before</i>
	downgrade. If pools use the Berkeley DB meta data back-end, these
	need to be converted to the file back-end <i>before</i> downgrading
	and then back to the Berkeley DB back-end after downgrade.</span></font></font></font></p>
	<h1 class="western"><a name="executivesummary"></a>Executive summary</h1>
	<h2 class="western">Highlights from dCache release 2.13:</h2>
	<h3 class="western">Highlights introduced on dCache 2.11:</h3>
	<ul>
		<li/>
<p style="margin-top: 0.1in; margin-bottom: 0.08in"><span style="display: inline-block; border: none; padding: 0in"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">Faster
		deletion speeds</span></font></font></font></p>
	</ul>
	<ul>
		<li/>
<p><span style="display: inline-block; border: none; padding: 0in"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">Better
		integration of alarms service, easier configuration, and predefined
		alarms</span></font></font></font></p>
		<li/>
<p><span style="display: inline-block; border: none; padding: 0in"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">Multiple
		GIDs in kpwd</span></font></font></font></p>
		<li/>
<p><span style="display: inline-block; border: none; padding: 0in"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">Less
		clutter in GLUE 2 StorageShare</span></font></font></font></p>
		<li/>
<p><span style="display: inline-block; border: none; padding: 0in"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">Improved
		pool response during HSM request bursts</span></font></font></font></p>
		<li/>
<p><span style="display: inline-block; border: none; padding: 0in"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">Reduced
		latency on write</span></font></font></font></p>
		<li/>
<p><span style="display: inline-block; border: none; padding: 0in"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">Automatic
		throttling of SRM request rate when database request queue is full</span></font></font></font></p>
		<li/>
<p><span style="display: inline-block; border: none; padding: 0in"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">Decoupling
		of transfer managers from srm database</span></font></font></font></p>
	</ul>
	<h3 class="western">Highlights introduced on dCache 2.12:</h3>
	<ul>
		<li/>
<p style="margin-top: 0.1in; margin-bottom: 0.08in"><span style="display: inline-block; border: none; padding: 0in"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">New
		site description property to add local branding.</span></font></font></font></p>
	</ul>
	<ul>
		<li/>
<p><span style="display: inline-block; border: none; padding: 0in"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">Admin
		shell supports Ctrl-C to interrupt commands.</span></font></font></font></p>
		<li/>
<p><span style="display: inline-block; border: none; padding: 0in"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">Alarms
		service can share domains with other services.</span></font></font></font></p>
		<li/>
<p><span style="display: inline-block; border: none; padding: 0in"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">Improved
		attribute handling in Chimera.</span></font></font></font></p>
		<li/>
<p><span style="display: inline-block; border: none; padding: 0in"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">Shorter
		session identifiers.</span></font></font></font></p>
		<li/>
<p><span style="display: inline-block; border: none; padding: 0in"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">FTP
		and DCAP cell names are unique across restarts.</span></font></font></font></p>
		<li/>
<p><span style="display: inline-block; border: none; padding: 0in"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">Info
		provider publishes all global network interfaces.</span></font></font></font></p>
		<li/>
<p><span style="display: inline-block; border: none; padding: 0in"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">Improved
		login broker registration and SRM door selection, including
		improved IPv6 support.</span></font></font></font></p>
		<li/>
<p><span style="display: inline-block; border: none; padding: 0in"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">Improved
		and more robust NFS proxy mode.</span></font></font></font></p>
		<li/>
<p><span style="display: inline-block; border: none; padding: 0in"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">On
		the fly checksum calculation for NFS and xrootd.</span></font></font></font></p>
		<li/>
<p><span style="display: inline-block; border: none; padding: 0in"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">Improved
		nearline storage Service Provider Interface for more flexible
		drivers.</span></font></font></font></p>
		<li/>
<p><span style="display: inline-block; border: none; padding: 0in"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">Precomputed
		repository statistics in pools.</span></font></font></font></p>
		<li/>
<p><span style="display: inline-block; border: none; padding: 0in"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">HTTP
		and xrootd uploads block until post-processing completes.</span></font></font></font></p>
		<li/>
<p><span style="display: inline-block; border: none; padding: 0in"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">Reduced
		memory consumption in pools using Berkeley DB.</span></font></font></font></p>
		<li/>
<p><span style="display: inline-block; border: none; padding: 0in"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">Site
		specific srmPing attributes.</span></font></font></font></p>
		<li/>
<p><span style="display: inline-block; border: none; padding: 0in"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">Parameterized
		WebDAV templates.</span></font></font></font></p>
		<li/>
<p><span style="display: inline-block; border: none; padding: 0in"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">More
		uniform access logs.</span></font></font></font></p>
		<li/>
<p><span style="display: inline-block; border: none; padding: 0in"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">Localized
		timestamps in pinboard.</span></font></font></font></p>
		<li/>
<p><span style="display: inline-block; border: none; padding: 0in"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">Improved
		bash completion.</span></font></font></font></p>
	</ul>
	<h3 class="western">Highlights introduced on dCache 2.13:</h3>
	<ul>
		<li/>
<p style="margin-top: 0.1in; margin-bottom: 0.08in"><span style="display: inline-block; border: none; padding: 0in"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">major
		overhaul of admin interface,</span></font></font></font></p>
		<li/>
<p style="margin-top: 0.1in; margin-bottom: 0.08in"><span style="display: inline-block; border: none; padding: 0in"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">robust
		internal delete and flush notification,</span></font></font></font></p>
		<li/>
<p style="margin-top: 0.1in; margin-bottom: 0.08in"><span style="display: inline-block; border: none; padding: 0in"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">info-provider
		generates timestamps on published objects,</span></font></font></font></p>
		<li/>
<p style="margin-top: 0.1in; margin-bottom: 0.08in"><span style="display: inline-block; border: none; padding: 0in"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">pool
		migration module maintains last-access-time,</span></font></font></font></p>
		<li/>
<p style="margin-top: 0.1in; margin-bottom: 0.08in"><span style="display: inline-block; border: none; padding: 0in"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">pool
		implements strict LRU garbage collection,</span></font></font></font></p>
		<li/>
<p style="margin-top: 0.1in; margin-bottom: 0.08in"><span style="display: inline-block; border: none; padding: 0in"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">improved
		shutdown in space-manager,</span></font></font></font></p>
		<li/>
<p style="margin-top: 0.1in; margin-bottom: 0.08in"><span style="display: inline-block; border: none; padding: 0in"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">reserving
		space from a linkgroup may be authorised by GID,</span></font></font></font></p>
		<li/>
<p style="margin-top: 0.1in; margin-bottom: 0.08in"><span style="display: inline-block; border: none; padding: 0in"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">better
		scalability in FTP doors,</span></font></font></font></p>
		<li/>
<p style="margin-top: 0.1in; margin-bottom: 0.08in"><span style="display: inline-block; border: none; padding: 0in"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">new
		admin commands for nfs service,</span></font></font></font></p>
		<li/>
<p style="margin-top: 0.1in; margin-bottom: 0.08in"><span style="display: inline-block; border: none; padding: 0in"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">recording
		of FTS-specific information,</span></font></font></font></p>
		<li/>
<p style="margin-top: 0.1in; margin-bottom: 0.08in"><span style="display: inline-block; border: none; padding: 0in"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">xrootd
		doors support the protocol's asynchronous open.</span></font></font></font></p>
		<li/>
<p style="margin-top: 0.1in; margin-bottom: 0.08in"><span style="display: inline-block; border: none; padding: 0in"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">support
		for custom HTTP response headers</span></font></font></font></p>
	</ul>
	<h2 class="western"><a name="incompatibilities"></a>Incompatibilities</h2>
	<ul>
		<li/>
<p style="margin-top: 0.1in; margin-bottom: 0.08in"><span style="display: inline-block; border: none; padding: 0in"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">All
		properties marked forbidden or obsolete are now no longer
		recognised by dCache. All properties that were deprecated in 2.10
		are now marked forbidden.</span></font></font></font></p>
		<li/>
<p style="margin-top: 0.1in; margin-bottom: 0.08in"><span style="display: inline-block; border: none; padding: 0in"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">The
		poolmanager.conf file should be regenerated using the </font></font></font><font color="#656974"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><code>save</font></font></font></code><font color="#656974">
		</font><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">command
		before upgrading.</span></font></font></font></p>
		<li/>
<p style="margin-top: 0.1in; margin-bottom: 0.08in"><span style="display: inline-block; border: none; padding: 0in"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">Instatiation
		of WAR files in the httpd service has changed. Custom </font></font></font><font color="#656974"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><code>httpd.conf</font></font></font></code><font color="#656974">
		</font><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">configurations
		will have to be updated.</span></font></font></font></p>
		<li/>
<p style="margin-top: 0.1in; margin-bottom: 0.08in"><span style="display: inline-block; border: none; padding: 0in"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">Local
		customizations to the WebDAV directory listing template will likely
		have to be updated.</span></font></font></font></p>
		<li/>
<p style="margin-top: 0.1in; margin-bottom: 0.08in"><span style="display: inline-block; border: none; padding: 0in"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">Third
		party xrootd channel handler plugins from previous releases are not
		compatible with dCache 2.13, except for the <a href="https://www.dcache.org/downloads/xrootd4j/index.shtml">XRootD
		CMS-TFC Release</a>. Contact the vendor for updates plugins. Please
		check <a href="#Steps|outline">Installation of Plugins</a></font></font></font><font color="#656974">
		</font><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">for
		further information.</span></font></font></font></p>
		<li/>
<p style="margin-top: 0.1in; margin-bottom: 0.08in"><span style="display: inline-block; border: none; padding: 0in"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">Local
		modifications to logback.xml should be reapplied to the upstream
		version.</span></font></font></font></p>
		<li/>
<p style="margin-top: 0.1in; margin-bottom: 0.08in"><span style="display: inline-block; border: none; padding: 0in"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">The
		authorization rules for space reservations without an owner has
		changed.</span></font></font></font></p>
		<li/>
<p style="margin-top: 0.1in; margin-bottom: 0.08in"><span style="display: inline-block; border: none; padding: 0in"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">The
		webadmin interface no longer provides access to the info service.
		The same functionality is available through other httpd plugins.</span></font></font></font></p>
		<li/>
<p style="margin-top: 0.1in; margin-bottom: 0.08in"><span style="display: inline-block; border: none; padding: 0in"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">Java
		8 is required for running dCache 2.13. Both the Oracle JDK and
		OpenJDK are supported.</span></font></font></font></p>
		<li/>
<p style="margin-top: 0.1in; margin-bottom: 0.08in"><span style="display: inline-block; border: none; padding: 0in"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">The
		chimera schema is updated upon upgrade.</span></font></font></font></p>
		<li/>
<p style="margin-top: 0.1in; margin-bottom: 0.08in"><span style="display: inline-block; border: none; padding: 0in"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">The
		</font></font></font><font color="#656974"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><code>admin</font></font></font></code><font color="#656974">
		</font><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">shell
		has been reimplemented and the user interface has changed.</span></font></font></font></p>
		<li/>
<p style="margin-top: 0.1in; margin-bottom: 0.08in"><span style="display: inline-block; border: none; padding: 0in"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">The
		</font></font></font><font color="#656974"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><code>broadcast</font></font></font></code><font color="#656974">
		</font><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">service
		has been dropped and needs to be removed from the layout file.</span></font></font></font></p>
		<li/>
<p style="margin-top: 0.1in; margin-bottom: 0.08in"><span style="display: inline-block; border: none; padding: 0in"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">The
		</font></font></font><font color="#656974"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><code>dir</font></font></font></code><font color="#656974">
		</font><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">service
		has been dropped and needs to be removed from the layout file.</span></font></font></font></p>
		<li/>
<p style="margin-top: 0.1in; margin-bottom: 0.08in"><span style="display: inline-block; border: none; padding: 0in"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">The
		</font></font></font><font color="#656974"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><code>loginbroker</font></font></font></code><font color="#656974">
		</font><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">service
		has been dropped and needs to be removed from the layout file.</span></font></font></font></p>
		<li/>
<p style="margin-top: 0.1in; margin-bottom: 0.08in"><span style="display: inline-block; border: none; padding: 0in"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">Support
		for JMS brokers (ActiveMQ and OpenMQ) has been removed.</span></font></font></font></p>
		<li/>
<p style="margin-top: 0.1in; margin-bottom: 0.08in"><span style="display: inline-block; border: none; padding: 0in"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">Support
		for Terracotta load balancing has been removed.</span></font></font></font></p>
		<li/>
<p style="margin-top: 0.1in; margin-bottom: 0.08in"><span style="display: inline-block; border: none; padding: 0in"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">The
		</font></font></font><font color="#656974"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><code>httpd</font></font></font></code><font color="#656974">
		</font><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">service
		reads certificates from </font></font></font><font color="#656974"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><code>/etc/grid-security</font></font></font></code><font color="#656974">
		</font><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">and
		no longer uses Java Key Store files.</span></font></font></font></p>
		<li/>
<p style="margin-top: 0.1in; margin-bottom: 0.08in"><span style="display: inline-block; border: none; padding: 0in"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">The
		</font></font></font><font color="#656974"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><code>dcache
		import</font></font></font></code><font color="#656974"> </font><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">commands
		have been removed.</span></font></font></font></p>
		<li/>
<p style="margin-top: 0.1in; margin-bottom: 0.08in"><span style="display: inline-block; border: none; padding: 0in"><font color="#656974"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><code>pnfsmanager</font></font></font></code><font color="#656974">
		</font><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">and
		</font></font></font><font color="#656974"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><code>cleaner</font></font></font></code><font color="#656974">
		</font><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">services
		need to be configured according to the presence of a </font></font></font><font color="#656974"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><code>replica</font></font></font></code><font color="#656974">
		</font><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">or
		</font></font></font><font color="#656974"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><code>spacemanager</font></font></font></code><font color="#656974">
		</font><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">service.</span></font></font></font></p>
		<li/>
<p style="margin-top: 0.1in; margin-bottom: 0.08in"><span style="display: inline-block; border: none; padding: 0in"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">dCache
		now defaults to expect a </font></font></font><font color="#656974"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><code>spacemanager</font></font></font></code><font color="#656974">
		</font><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">service.
		If not present, several services need to be configured not to
		expect a </font></font></font><font color="#656974"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><code>spacemanager</font></font></font></code><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">.</span></font></font></font></p>
		<li/>
<p style="margin-top: 0.1in; margin-bottom: 0.08in"><span style="display: inline-block; border: none; padding: 0in"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">The
		default cell name of the </font></font></font><font color="#656974"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><code>spacemanager</font></font></font></code><font color="#656974">
		</font><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">service
		was changed from </font></font></font><font color="#656974"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><code>SrmSpaceManager</font></font></font></code><font color="#656974">
		</font><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">to
		</font></font></font><font color="#656974"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><code>SpaceManager</font></font></font></code><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">.</span></font></font></font></p>
		<li/>
<p style="margin-top: 0.1in; margin-bottom: 0.08in"><span style="display: inline-block; border: none; padding: 0in"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">The
		default database names and owners for all services have changed.</span></font></font></font></p>
		<li/>
<p style="margin-top: 0.1in; margin-bottom: 0.08in"><span style="display: inline-block; border: none; padding: 0in"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">The
		pool Berkeley DB meta data format has changed. No change is
		required upon upgrading, but downgrading is not possible without
		explicitly converting the format.</span></font></font></font></p>
	</ul>
	<h1 class="western">Services</h1>
	<p><span style="display: inline-block; border: none; padding: 0in"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">This</span></font></font></font>
	<span style="display: inline-block; border: none; padding: 0in"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">section
	describes renamed, collapsed, split, and removed services. A summary
	of the changes is contained in the following table.</span></font></font></font></p><a name="tab:services"></a><a name="Table1|table"></a><center>
		<table width="80%" cellpadding="2" cellspacing="0" style="page-break-before: auto; page-break-after: auto; page-break-inside: auto">
			<col width="79*">
			<col width="177*">
			<thead>
				<tr>
					<th width="31%" style="border-top: none; border-bottom: 1px solid #000000; border-left: none; border-right: none; padding-top: 0in; padding-bottom: 0.02in; padding-left: 0in; padding-right: 0in">
						<p align="center"><font face="Helvetica Neue, Helvetica, Arial, sans-serif"><font size="1" style="font-size: 8pt">Service</font></font></p>
					</th>
					<th width="69%" style="border-top: none; border-bottom: 1px solid #000000; border-left: none; border-right: none; padding-top: 0in; padding-bottom: 0.02in; padding-left: 0in; padding-right: 0in">
						<p align="center"><font face="Helvetica Neue, Helvetica, Arial, sans-serif"><font size="1" style="font-size: 8pt">Configuration
						/ Remark</font></font></p>
					</th>
				</tr>
			</thead>
			<tbody>
				<tr>
					<td width="31%" style="border-top: none; border-bottom: 1px solid #000000; border-left: none; border-right: none; padding-top: 0in; padding-bottom: 0.02in; padding-left: 0in; padding-right: 0in">
						<p align="center"><font face="Helvetica Neue, Helvetica, Arial, sans-serif"><font size="1" style="font-size: 8pt"><i>admin</i></font></font></p>
					</td>
					<td width="69%" style="border-top: none; border-bottom: 1px solid #000000; border-left: none; border-right: none; padding-top: 0in; padding-bottom: 0.02in; padding-left: 0in; padding-right: 0in">
						<p align="center"><font face="Helvetica Neue, Helvetica, Arial, sans-serif"><font size="1" style="font-size: 8pt">New
						admin interface. Add '-s legacy' to use old method.</font></font></p>
					</td>
				</tr>
				<tr>
					<td width="31%" style="border-top: none; border-bottom: 1px solid #000000; border-left: none; border-right: none; padding-top: 0in; padding-bottom: 0.02in; padding-left: 0in; padding-right: 0in">
						<p align="center"><font face="Helvetica Neue, Helvetica, Arial, sans-serif"><font size="1" style="font-size: 8pt"><i>broadcast</i></font></font></p>
					</td>
					<td width="69%" style="border-top: none; border-bottom: 1px solid #000000; border-left: none; border-right: none; padding-top: 0in; padding-bottom: 0.02in; padding-left: 0in; padding-right: 0in">
						<p align="center"><font face="Helvetica Neue, Helvetica, Arial, sans-serif"><font size="1" style="font-size: 8pt">Service
						removed</font></font></p>
					</td>
				</tr>
				<tr>
					<td width="31%" style="border-top: none; border-bottom: 1px solid #000000; border-left: none; border-right: none; padding-top: 0in; padding-bottom: 0.02in; padding-left: 0in; padding-right: 0in">
						<p align="center"><font face="Helvetica Neue, Helvetica, Arial, sans-serif"><font size="1" style="font-size: 8pt"><i>loginbroker</i></font></font></p>
					</td>
					<td width="69%" style="border-top: none; border-bottom: 1px solid #000000; border-left: none; border-right: none; padding-top: 0in; padding-bottom: 0.02in; padding-left: 0in; padding-right: 0in">
						<p align="center"><font face="Helvetica Neue, Helvetica, Arial, sans-serif"><font size="1" style="font-size: 8pt">Service
						removed</font></font></p>
					</td>
				</tr>
				<tr>
					<td width="31%" style="border-top: none; border-bottom: 1px solid #000000; border-left: none; border-right: none; padding-top: 0in; padding-bottom: 0.02in; padding-left: 0in; padding-right: 0in">
						<p align="center"><font face="Helvetica Neue, Helvetica, Arial, sans-serif"><font size="1" style="font-size: 8pt"><i>dir</i></font></font></p>
					</td>
					<td width="69%" style="border-top: none; border-bottom: 1px solid #000000; border-left: none; border-right: none; padding-top: 0in; padding-bottom: 0.02in; padding-left: 0in; padding-right: 0in">
						<p align="center"><font face="Helvetica Neue, Helvetica, Arial, sans-serif"><font size="1" style="font-size: 8pt">Service
						removed</font></font></p>
					</td>
				</tr>
				<tr>
					<td width="31%" style="border-top: none; border-bottom: 1px solid #000000; border-left: none; border-right: none; padding-top: 0in; padding-bottom: 0.02in; padding-left: 0in; padding-right: 0in">
						<p align="center"><font face="Helvetica Neue, Helvetica, Arial, sans-serif"><font size="1" style="font-size: 8pt"><i>httpd</i></font></font></p>
					</td>
					<td width="69%" style="border-top: none; border-bottom: 1px solid #000000; border-left: none; border-right: none; padding-top: 0in; padding-bottom: 0.02in; padding-left: 0in; padding-right: 0in">
						<p align="center"><font face="Helvetica Neue, Helvetica, Arial, sans-serif"><font size="1" style="font-size: 8pt">JGlobus
						for TLS. Support for multiple httpd instances.</font></font></p>
					</td>
				</tr>
				<tr>
					<td width="31%" style="border-top: none; border-bottom: 1px solid #000000; border-left: none; border-right: none; padding-top: 0in; padding-bottom: 0.02in; padding-left: 0in; padding-right: 0in">
						<p align="center"><font face="Helvetica Neue, Helvetica, Arial, sans-serif"><font size="1" style="font-size: 8pt"><i>pnfsmanager</i></font></font></p>
					</td>
					<td width="69%" style="border-top: none; border-bottom: 1px solid #000000; border-left: none; border-right: none; padding-top: 0in; padding-bottom: 0.02in; padding-left: 0in; padding-right: 0in">
						<p align="center"><br/>

						</p>
					</td>
				</tr>
				<tr>
					<td width="31%" style="border-top: none; border-bottom: 1px solid #000000; border-left: none; border-right: none; padding-top: 0in; padding-bottom: 0.02in; padding-left: 0in; padding-right: 0in">
						<p align="center"><font face="Helvetica Neue, Helvetica, Arial, sans-serif"><font size="1" style="font-size: 8pt"><i>spacemanager</i></font></font></p>
					</td>
					<td width="69%" style="border-top: none; border-bottom: 1px solid #000000; border-left: none; border-right: none; padding-top: 0in; padding-bottom: 0.02in; padding-left: 0in; padding-right: 0in">
						<p align="center"><code><font color="#333333"><font face="Helvetica Neue, Helvetica, Arial, sans-serif"><font size="1" style="font-size: 8pt">Default
						dcache.enable.space-reservation=true </font></font></font></code>
						</p>
					</td>
				</tr>
				<tr>
					<td width="31%" style="border-top: none; border-bottom: 1px solid #000000; border-left: none; border-right: none; padding-top: 0in; padding-bottom: 0.02in; padding-left: 0in; padding-right: 0in">
						<p align="center"><font face="Helvetica Neue, Helvetica, Arial, sans-serif"><font size="1" style="font-size: 8pt"><i>srmspacemanager</i></font></font></p>
					</td>
					<td width="69%" style="border-top: none; border-bottom: 1px solid #000000; border-left: none; border-right: none; padding-top: 0in; padding-bottom: 0.02in; padding-left: 0in; padding-right: 0in">
						<p align="center"><font face="Helvetica Neue, Helvetica, Arial, sans-serif"><font size="1" style="font-size: 8pt">It
						has been renamed to “spacemanager”</font></font></p>
					</td>
				</tr>
			</tbody>
		</table>
	</center>
	<h2 class="western"><br/>
<br/>

	</h2>
	<h2 class="western">Removed Services</h2>
	<h3 class="western">BroadCast Service</h3>
	<h4 class="western"><a name="broadcastservicereplacedbypublish-subscribemessaging"></a>
	Broadcast service replaced by publish-subscribe messaging</h4>
	<p style="margin-top: 0.1in; margin-bottom: 0.08in"><span style="display: inline-block; border: none; padding: 0in"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">The
	</font></font></font><font color="#656974"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><code>broadcast</font></font></font></code><font color="#656974">
	</font><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">service
	is no longer supported and must be removed from the layout file on
	upgrade.</span></font></font></font></p>
	<p style="margin-top: 0.1in; margin-bottom: 0.08in"><span style="display: inline-block; border: none; padding: 0in"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">The
	functionality of the broadcast service have been replaced by an
	integrated multicast ability in the cell messaging system. Sending
	cells </font></font></font><font color="#656974"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><em>publish</font></font></font></em><font color="#656974">
	</font><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">messages
	on a common </font></font></font><font color="#656974"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><em>topic</font></font></font></em><font color="#656974">
	</font><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">while
	receiving cells </font></font></font><font color="#656974"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><em>subscribe</font></font></font></em><font color="#656974">
	</font><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">to
	these topics. The topic is a regular cell address and is analogous
	to a multicast group in networking. This cell address is not bound
	to any particular cell. Instead the new TOPIC route directs messages
	published to a topic to all subscribers.</span></font></font></font></p>
	<p style="margin-top: 0.1in; margin-bottom: 0.08in"><span style="display: inline-block; border: none; padding: 0in"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">The
	system is transparent and does not require any configuration.</span></font></font></font></p>
	<h3 class="western">LoginBroker service</h3>
	<h4 class="western"><a name="loginbrokerservicereplacedbypublish-subscribemessaging"></a>
	LoginBroker service replaced by publish-subscribe messaging</h4>
	<p style="margin-top: 0.1in; margin-bottom: 0.08in"><span style="display: inline-block; border: none; padding: 0in"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">The
	</font></font></font><font color="#656974"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><code>loginbroker</font></font></font></code><font color="#656974">
	</font><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">service
	is no longer supported. This service acted as a directory service
	for doors and was used by </font></font></font><font color="#656974"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><code>srm</font></font></font></code><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">,
	</font></font></font><font color="#656974"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><code>info</font></font></font></code><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">,
	and </font></font></font><font color="#656974"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><code>httpd</font></font></font></code><font color="#656974">
	</font><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">to
	find doors. The functionality has been replaced by publish-subscribe
	messaging.</span></font></font></font></p>
	<p style="margin-top: 0.1in; margin-bottom: 0.08in"><span style="display: inline-block; border: none; padding: 0in"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">To
	control which doors are used by </font></font></font><font color="#656974"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><code>srm</font></font></font></code><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">,
	</font></font></font><font color="#656974"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><code>httpd</font></font></font></code><font color="#656974">
	</font><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">and
	the info provider, a new tag system has been introduced. Doors may
	be tagged by setting the </font></font></font><font color="#656974"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><code>*.loginbroker.tags</font></font></font></code><font color="#656974">
	</font><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">property,
	and the consuming services may in turn filter doors by those tags.
	E.g. will only use doors that has one of the tags defined by
	</font></font></font><font color="#656974"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><code>srm.protocols.tags</font></font></font></code><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">.</span></font></font></font></p>
	<p style="margin-top: 0.1in; margin-bottom: 0.08in"><span style="display: inline-block; border: none; padding: 0in"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">By
	default, the </font></font></font><font color="#656974"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><code>srm</font></font></font></code><font color="#656974">
	</font><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">service
	only uses doors tagged as </font></font></font><font color="#656974"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><code>srm</font></font></font></code><font color="#656974">
	</font><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">and
	the info-provider only publishes doors tagged as </font></font></font><font color="#656974"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><code>glue</font></font></font></code><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">.
	By default, all doors are tagged as both </font></font></font><font color="#656974"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><code>srm</font></font></font></code><font color="#656974">
	</font><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">and
	</font></font></font><font color="#656974"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><code>glue</font></font></font></code><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">.</span></font></font></font></p>
	<p style="margin-top: 0.1in; margin-bottom: 0.08in"><span style="display: inline-block; border: none; padding: 0in"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">As
	part of this change, both the publishing and consuming services have
	been extended with several new </font></font></font><font color="#656974"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><code>lb</font></font></font></code><font color="#656974">
	</font><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">commands.
	Doors can dynamically change the tags they publish, as well as stop
	publishing read or write capabilities (thus preventing SRM from
	using those doors). Similarly, consuming services like </font></font></font><font color="#656974"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><code>srm</font></font></font></code><font color="#656974">
	</font><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">have
	been extended with commands to list collected information about
	doors:</span></font></font></font></p>
	<pre><span style="display: inline-block; border: none; padding: 0in"><font color="#000000"><font face="Courier New, monospace"><font size="2" style="font-size: 10pt"><code>lb disable [-read] [-write]  # suspend publishing capabilities</span></font></font></font></code>
<span style="display: inline-block; border: none; padding: 0in"><font color="#000000"><font face="Courier New, monospace"><font size="2" style="font-size: 10pt"><code>lb enable [-read] [-write]  # resume publishing capabilities</span></font></font></font></code>
<span style="display: inline-block; border: none; padding: 0in"><font color="#000000"><font face="Courier New, monospace"><font size="2" style="font-size: 10pt"><code>lb ls [-l] [-protocol=&lt;string&gt;]&lt;...&gt;  # list collected login broker information</span></font></font></font></code>
<span style="display: inline-block; border: none; padding: 0in"><font color="#000000"><font face="Courier New, monospace"><font size="2" style="font-size: 10pt"><code>lb set tags &lt;tags&gt;&lt;...&gt;  # set published tags</span></font></font></font></code>
<span style="display: inline-block; border: none; padding: 0in"><font color="#000000"><font face="Courier New, monospace"><font size="2" style="font-size: 10pt"><code>lb set threshold &lt;load&gt;  # set threshold load for OOB updates</span></font></font></font></code>
<span style="display: inline-block; border: none; padding: 0in"><font color="#000000"><font face="Courier New, monospace"><font size="2" style="font-size: 10pt"><code>lb set update &lt;seconds&gt;  # set login broker update frequency</span></font></font></font></code>
<span style="display: inline-block; border: none; padding: 0in"><font color="#000000"><font face="Courier New, monospace"><font size="2" style="font-size: 10pt"><code>lb update # refresh login broker information</span></font></font></font></code></pre><h3 class="western">
	Dir service</h3>
	<h4 class="western">dir service removed → DCAP directory service
	is auto instantiated</h4>
	<p style="margin-top: 0.1in; margin-bottom: 0.08in"><span style="display: inline-block; border: none; padding: 0in"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">The
	</font></font></font><font color="#656974"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><code>dir</font></font></font></code><font color="#656974">
	</font><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">service
	used by DCAP to provide directory listing has been removed. The
	corresponding cell is now automatically instantiated whenever a DCAP
	door is created. Upon upgrade, the </font></font></font><font color="#656974"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><code>dir</font></font></font></code><font color="#656974">
	</font><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">service
	must be removed from the layout file.</span></font></font></font></p>
	<h3 class="western">Other removed services</h3>
	<h4 class="western"><a name="supportforjmsremoved"></a>Support for
	JMS removed</h4>
	<p style="margin-top: 0.1in; margin-bottom: 0.08in"><span style="display: inline-block; border: none; padding: 0in"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">Several
	years ago, an alternative messaging system based on the Java
	Messaging Services specification was introduced in dCache. This
	allowed external message brokers like ActiveMQ and OpenMQ to be used
	with dCache. This feature never caught on and we have removed all
	support for JMS.</span></font></font></font></p>
	<h4 class="western"><a name="supportforterracottaremoved"></a>Support
	for Terracotta removed</h4>
	<p style="margin-top: 0.1in; margin-bottom: 0.08in"><span style="display: inline-block; border: none; padding: 0in"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">The
	</font></font></font><font color="#656974"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><code>srm</font></font></font></code><font color="#656974">
	</font><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">service
	has supported a load-balancing system called Terracotta. This system
	supported running multiple SRM instances in a load-balancing setup.
	To our knowledge, this system has never been utilized by any site,
	and our internal evaluation showed that the overhead was relatively
	large. To avoid wasting developer resources on an unused feature,
	all support for Terracotta has been removed</span></font></font></font></p>
	<h4 class="western">'dcache import' command removed</h4>
	<p style="margin-top: 0.1in; margin-bottom: 0.08in"><span style="display: inline-block; border: none; padding: 0in"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">Since
	certificates no longer need to be imported into Java Keystore files,
	the </font></font></font><font color="#656974"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><code>dcache
	import</font></font></font></code><font color="#656974"> </font><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">commands
	have been removed from the </font></font></font><font color="#656974"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><code>dcache</font></font></font></code><font color="#656974">
	</font><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">script.</span></font></font></font></p>
	<h4 class="western"><a name="datanucleuspropertyfileinaccessible"></a>
	DataNucleus property file inaccessible</h4>
	<p><span style="display: inline-block; border: none; padding: 0in"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">The
	DataNucleus property file for low level database configuration is no
	longer exposed. The configuration properties
	</font></font></font><font color="#656974"><font face="monospace, monospace"><font size="2" style="font-size: 10pt"><code>alarms.db.datanucleus-properties.path</font></font></font></code><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">,
	</font></font></font><font color="#656974"><font face="monospace, monospace"><font size="2" style="font-size: 10pt"><code>billing.db.config.path</font></font></font></code><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">,
	and </font></font></font><font color="#656974"><font face="monospace, monospace"><font size="2" style="font-size: 10pt"><code>httpd.alarms.db.config.path</font></font></font></code><font color="#656974">
	</font><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">are
	obsolete.</span></font></font></font></p>
	<h2 class="western"><u>What's new</u></h2>
	<h3 class="western">Changes affecting several services</h3>
	<h4 class="western">Site description property</h4>
	<p><span style="display: inline-block; border: none; padding: 0in"><span style="text-decoration: none"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">There
	are several places where dCache provides a short, human-readable
	description of this dCache instance or where this would make sense:
	the info-provider, the webdav directory listing and the webadmin
	interface. This release introduces the </span></font></font></span></font><code><span style="text-decoration: none">dcache.description</span></code><span style="text-decoration: none">
	</span><span style="display: inline-block; border: none; padding: 0in"><span style="text-decoration: none"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">property
	that is used as a default in these places.</span></font></font></span></font></p>
	<h4 class="western" style="text-decoration: none"><a name="shortsessionstrings"></a>
	Short session strings</h4>
	<p><span style="display: inline-block; border: none; padding: 0in"><span style="text-decoration: none"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">FTP,
	WebDAV and NFS doors now use BASE–64 encoding for the session
	counter. For such doors, sessions have the form
	</font></font></span></font><font color="#333333"><span style="text-decoration: none"><font size="2" style="font-size: 10pt"><code>door:&lt;cell&gt;@&lt;domain&gt;:&lt;counter&gt;</font></span></font></code><span style="text-decoration: none"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">.
	The </font></font></span></font><font color="#333333"><span style="text-decoration: none"><font size="2" style="font-size: 10pt"><code>&lt;counter&gt;</font></span></font></code><span style="text-decoration: none"><font color="#656974">
	</span></font><span style="text-decoration: none"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">part
	used to be base–10 encoded (i.e., a normal integer number). This
	part is now a base–64 number. The result is shorter log lines and
	billing entries.</span></font></font></span></font></p>
	<h4 class="western" style="text-decoration: none"><a name="improvedshutdown"></a>
	Improved shutdown</h4>
	<p><span style="display: inline-block; border: none; padding: 0in"><span style="text-decoration: none"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">When
	a dCache domain shuts down, it asks each cell in turn to stop. As a
	backup procedure, dCache will wait up to one second for all threads
	associated with that cell to terminate before explicitly
	interrupting any of that cell’s remaining threads. The </font></font></span></font><font color="#656974"><span style="text-decoration: none"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><code>dcache
	stop</font></font></span></font></code><span style="text-decoration: none"><font color="#656974">
	</span></font><span style="text-decoration: none"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">command,
	which triggers the domain shutdown, will wait up to ten seconds for
	the domain to finish shutting down. After this, it kills the java
	process outright. Therefore domain shutdown must finish before this
	deadline to achieve a clean shutdown.</span></font></font></span></font></p>
	<p style="text-decoration: none"><span style="display: inline-block; border: none; padding: 0in"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">The
	shutdown procedure of several services (billing, httpd, loginbroker,
	pool, poolmanager, replica) have been improved by explicitly
	stopping background activity. Previous versions of dCache before
	2.11 relied on dCache’s backup procedure for terminating left-over
	activity. By explicity stopping background activity, shutting down
	each of these services can now take less than one second.</span></font></font></font></p>
	<p style="text-decoration: none"><span style="display: inline-block; border: none; padding: 0in"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">Shutting
	down the pnfsmanager service has also improved. It is now faster,
	cleaner and safer. Previously, pnfsmanager also relied on the backup
	procedure to terminate on-going activity; this was unfortunate not
	only because it slowed down the shutdown but also that such activity
	could attempt to use the database after the database connection pool
	was stopped. This could result in errors being logged and risked
	partial processing of requests. This was fixed on dCache 2.11.</span></font></font></font></p>
	<p style="text-decoration: none"><span style="display: inline-block; border: none; padding: 0in"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">When
	shutting down services that use a thread-pool for processing
	messages (gplazma, pinmanager, pool, srm), the shutdown sequence now
	ensures all threads have stopped before closing resources. As with
	pnfsmanager, previous versions of dCache risked concurrent activity
	continuing after database connections have been stopped. This is now
	fixed.</span></font></font></font></p>
	<h4 class="western" style="text-decoration: none"><a name="improvedhttpservices"></a>
	Improved HTTP services</h4>
	<p style="text-decoration: none"><span style="display: inline-block; border: none; padding: 0in"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">Jetty
	is the web-server framework used by the webdav, httpd and srm
	services. In HTTP 1.1, a network connection is kept open unless the
	client explicitly requests it be closed. To the user, subsequent
	requests appear to be processed faster as there is no overhead from
	establishing a new TCP connection and SSL/TLS/GSI context.</span></font></font></font></p>
	<p style="text-decoration: none"><span style="display: inline-block; border: none; padding: 0in"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">Before
	dCache version 2.11, each HTTP connection occupies a thread, even
	when waiting for the client to send the next request. Such occupied
	threads, cannot process requests from other clients. This made
	tuning dCache for optimum performance difficult: many clients
	connected but not issuing requests will result in high memory usage,
	but reducing this number can impact on the server’s ability to
	handle concurrent requests. Safe configurations will likely lead to
	dCache under performing under high load. With v2.11 and above,
	dCache will free up the thread while waiting for the client’s next
	request, making it easier to obtain optimum performance.</span></font></font></font></p>
	<p style="text-decoration: none"><span style="display: inline-block; border: none; padding: 0in"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">A
	separate improvement is that dCache reacts better when faced with
	many clients attempting to connect at (nearly) the same time.</span></font></font></font></p>
	<p style="text-decoration: none"><span style="display: inline-block; border: none; padding: 0in"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">In
	HTTP 1.1, if the client decides to keep the connection open, the
	server may still close it later on. In dCache, the policy is to
	close any connection that remains idle for too long. Idle means no
	traffic flowing in either direction; either dCache is waiting for
	the next client request or the client is waiting for dCache’s
	response.</span></font></font></font></p>
	<p style="text-decoration: none"><span style="display: inline-block; border: none; padding: 0in"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">By
	default, srm service will close connections after one minute of
	inactivity; the webdav service will close idle connections after
	five minutes of inactivity; and, for httpd service, connections are
	closed after 30 seconds of inactivity. These idle timeouts may be
	adjusted through dCache configuration properties.</span></font></font></font></p>
	<p style="text-decoration: none"><span style="display: inline-block; border: none; padding: 0in"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">Jetty
	also has the concept of being low on resources. This is triggered
	when all request processing threads are active and there are more
	clients waiting to connect; for example, when many clients
	attempting to connect at (more or less) the same time.</span></font></font></font></p>
	<p style="text-decoration: none"><span style="display: inline-block; border: none; padding: 0in"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">When
	Jetty detects it is low on resources, it can react by reducing the
	timeout for idle connections. By more aggressively closing idle
	connections, the service can “degrade gracefully” when faced
	with a sudden inrush of client connections; the users experience
	only a slight delay in receiving replies as the necessary resources
	are quickly freed. The srm and webdav services reduce idle
	connection to 20 seconds and 30 seconds respectively, whereas httpd
	does not react.</span></font></font></font></p>
	<p style="text-decoration: none"><span style="display: inline-block; border: none; padding: 0in"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">In
	previous versions of dCache, when low on resources, the more
	aggressive idle-disconnection policy would affect only new
	connections; the existing idle connections would enjoy longer
	timeouts. With dCache v2.11+, all SRM or WebDAV connections
	experience the reduced idle-connection threshold.</span></font></font></font></p>
	<h4 class="western" style="text-decoration: none"><a name="improveddeletionspeed"></a>
	Improved deletion speed</h4>
	<p style="text-decoration: none"><span style="display: inline-block; border: none; padding: 0in"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">The
	database updates needed to delete a file has been reduced, making
	deletions faster. The effect is most pronounced if the file
	contained many non-empty levels. This affects the pnfsmanager and
	nfs services.</span></font></font></font></p>
	<h4 class="western">Unified mover timeout handling in doors</h4>
	<p style="margin-top: 0.1in; margin-bottom: 0.08in; text-decoration: none">
	<span style="display: inline-block; border: none; padding: 0in"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">Doors
	have several timeouts related to starting a mover on a pool, however
	the precise semantics were not unified. With this version, all doors
	use common timeout concepts for pool selection, mover creation and
	mover queuing.</span></font></font></font></p>
	<h4 class="western"><a name="uniqueftpanddcapcellnames"></a>Unique
	FTP and DCAP cell names</h4>
	<p style="text-decoration: none"><span style="display: inline-block; border: none; padding: 0in"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">DCAP
	and FTP doors instantiate a cell per client connection. The names of
	these cells are formed by concanating the door’s name with a
	counter. This counter used to reset on every restart. With this
	release, the names are derived from a time stamp and with high
	property the names are unique accross restarts. To reduce the length
	of the names, the counter is base 64 encoded.</span></font></font></font></p>
	<h4 class="western"><a name="shortersessionidentifiers"></a>Shorter
	session identifiers</h4>
	<p style="text-decoration: none"><span style="display: inline-block; border: none; padding: 0in"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">Most
	log messages include a session identifier and link all log messages
	generated by a common user session. These session identifiers are
	usually formed by combining a cell name with a counter. For FTP and
	DCAP doors this lead to session identifiers with two counters,
	resulting in needlessly long identifiers. With this release such
	redundancy is avoided.</span></font></font></font></p>
	<h4 class="western"><a name="defaultftpinternalnetworkinterfacechanged"></a>
	Default FTP internal network interface changed</h4>
	<p><span style="display: inline-block; border: none; padding: 0in"><span style="text-decoration: none"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">FTP
	doors can act as proxies for the data channel between pools and
	clients. When establishing such a proxy, the FTP door listens for a
	connection from the pool. Before, the interface the door would
	listen on on multi-homed hosts would default to the interface the
	FTP client connected over. Since the client connection has no
	relationship to which network pools are accessible from, this
	release changes the door such that it listens to the interface to
	which the host name resolves. Like before, the default can be
	overriden by setting the </font></font></span></font><font color="#333333"><span style="text-decoration: none"><font size="2" style="font-size: 10pt"><code>ftp.net.internal</font></span></font></code><span style="text-decoration: none"><font color="#656974">
	</span></font><span style="text-decoration: none"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">property.</span></font></font></span></font></p>
	<h4 class="western"><a name="loginbrokerandsrmgainipv6support"></a>loginbroker
	and SRM gain IPv6 support</h4>
	<p style="text-decoration: none"><span style="display: inline-block; border: none; padding: 0in"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">The
	loginbroker service acts as a registry for doors and their network
	interfaces.</span></font></font></font></p>
	<p style="text-decoration: none"><span style="display: inline-block; border: none; padding: 0in"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">With
	this release, doors register both IPv4 and IPv6 interfaces with
	their loginbrokers. The discovery of network interfaces is now
	dynamic such that interfaces that disappear or appear after a door
	is started will be removed from or added to the registration in the
	loginbrokers.</span></font></font></font></p>
	<p><span style="display: inline-block; border: none; padding: 0in"><span style="text-decoration: none"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">Doors
	now also accept a hostname or FQDN for their </span></font></font></span></font><code>*.net.listen</code>
	<span style="display: inline-block; border: none; padding: 0in"><span style="text-decoration: none"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">property.
	When registering with a loginbroker, both the name and the resolved
	IP address is published. The info-provider and the SRM will use this
	name rather than doing a reverse lookup on the IP address as they
	did before. If an IP address is used in the configuration, it is the
	door than now performs a reverse lookup.</span></font></font></span></font></p>
	<p style="text-decoration: none"><span style="display: inline-block; border: none; padding: 0in"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">The
	SRM will prefer a TURL that retains the protocol family the SRM
	client used. That is, for an IPv6 client an IPv6 TURL is preferred,
	and for an IPv4 client an IPv4 TURL is preferred. The SRM will fall
	back to the other protocol family if necessary. Note however that
	TURLs still contain the host name as published by the doors.</span></font></font></font></p>
	<h4 class="western">Compress events logs</h4>
	<p style="text-decoration: none"><span style="display: inline-block; border: none; padding: 0in"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">Event
	logs are a debugging feature that record low-level events in an easy
	to parse format. Event logs are disabled by default. If enabled, the
	logs are rotated daily and starting with this release the rotated
	logs are automatically compressed.</span></font></font></font></p>
	<h4 class="western">Localized time stamps in pinboard log</h4>
	<p style="text-decoration: none"><span style="display: inline-block; border: none; padding: 0in"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">Timestamps
	in the in-memory pinboard log used to follow a 12 hour format. The
	format has now been localized, meaning it will follow the
	conventions of the current local.</span></font></font></font></p>
	<h4 class="western"><a name="renamedandimprovedwait-for-cellsscript"></a>
	Renamed and improved wait-for-cells script</h4>
	<p><span style="display: inline-block; border: none; padding: 0in"><span style="text-decoration: none"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">The
	wait-for-cells script uses the info service to determine whether the
	supplied list of cells is currently running. If not, the script will
	wait a defined period for the cells to appear before terminating
	with an error. This release improces the script, strips the .sh
	suffix and moves it to </span></font></font></span></font><code><span style="text-decoration: none">/usr/sbin/</span></code><span style="text-decoration: none">.</span></p>
	<h4 class="western"><a name="improvedbashcompletionscript"></a>Improved
	bash completion script</h4>
	<p><span style="display: inline-block; border: none; padding: 0in"><span style="text-decoration: none"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">The
	script implementing bash completion for the </font></font></span></font><font color="#656974"><span style="text-decoration: none"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><code>dcache</font></font></span></font></code><span style="text-decoration: none"><font color="#656974">
	</span></font><span style="text-decoration: none"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">command
	has been extended and now supports all sub-commands.</span></font></font></span></font></p>
	<h4 class="western"><a name="updatedthirdpartylibraries"></a>Updated
	third party libraries</h4>
	<p style="text-decoration: none"><span style="display: inline-block; border: none; padding: 0in"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">A
	large number of third party libraries have been updated. The
	improvements in those libraries are too many to list here, although
	it many cases not immediately apparent when using dCache.</span></font></font></font></p>
	<h4 class="western">Increase precision of timing gauges</h4>
	<p style="margin-top: 0.1in; margin-bottom: 0.08in; text-decoration: none">
	<span style="display: inline-block; border: none; padding: 0in"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">The
	precision of timing gauges used by services like <code><font face="Roboto, Helvetica, sans-serif">srm</font></code>
	and <code><font face="Roboto, Helvetica, sans-serif">pnfsmanager</font></code>
	has been improved.</span></font></font></font></p>
	<h3 class="western">Admin changes</h3>
	<h4 class="western"><a name="adminshellgotmajorfacelift"></a>Admin
	shell got major face lift</h4>
	<p style="margin-top: 0.1in; margin-bottom: 0.08in"><span style="display: inline-block; border: none; padding: 0in"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">The
	admin shell has been reworked entirely. We have taken several design
	cues from the PostgreSQL shell,l </font></font></font><font color="#656974"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><code>psql</font></font></font></code><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">,
	that most dCache admins are familiar with.</span></font></font></font></p>
	<p style="margin-top: 0.1in; margin-bottom: 0.08in"><span style="display: inline-block; border: none; padding: 0in"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">Most
	notably, the command set is syntactically divided into built-in
	commands affecting the shell itself and commands sent to connected
	dCache cells. The former are all prefixed with a backslash while the
	latter are not. This syntactic separation means that the shell
	commands are available at any time, even when connected to a cell.
	E.g. the </font></font></font><font color="#656974"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><code>cd</font></font></font></code><font color="#656974">
	</font><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">command
	got replaced by </font></font></font><font color="#656974"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><code>\c</font></font></font></code><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">,
	allowing one to connect to a different cell without first having to
	disconnect from the current cell. Thus there is no need for a </font></font></font><font color="#656974"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><code>..</font></font></font></code><font color="#656974">
	</font><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">command.</span></font></font></font></p>
	<p style="margin-top: 0.1in; margin-bottom: 0.08in"><span style="display: inline-block; border: none; padding: 0in"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">The
	shell provides built-in help for the shell commands using </font></font></font><font color="#656974"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><code>\?</font></font></font></code><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">.
	This help is separate from the regular help output of the connected
	cell. The latter is available using the new </font></font></font><font color="#656974"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><code>\h</font></font></font></code><font color="#656974">
	</font><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">command
	(the classic </font></font></font><font color="#656974"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><code>help</font></font></font></code><font color="#656974">
	</font><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">command
	still works, but will not provide color highlighting).</span></font></font></font></p>
	<p style="margin-top: 0.1in; margin-bottom: 0.08in"><span style="display: inline-block; border: none; padding: 0in"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">All
	built-in shell commands provide full tab completion, including for
	the arguments. E.g. </font></font></font><font color="#656974"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><code>\c</font></font></font></code><font color="#656974">
	</font><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">provides
	tab completion on the cell name; it will complete on all well-known
	cells, all local cells of the domain of the connected cell, and on
	domain names of fully qualified addresses.</span></font></font></font></p>
	<p style="margin-top: 0.1in; margin-bottom: 0.08in"><span style="display: inline-block; border: none; padding: 0in"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">The
	new </font></font></font><font color="#656974"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><code>\l</font></font></font></code><font color="#656974">
	</font><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">command
	lists cells. By default it lists well known cells and cells of the
	domain of the connected cell. Wildcards for fully qualified
	addresses however match all cells, e.g. </font></font></font><font color="#656974"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><code>\l
	p*@*</font></font></font></code><font color="#656974"> </font><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">lists
	all cells starting with the letter </font></font></font><font color="#656974"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><em>p</font></font></font></em><font color="#656974">
	</font><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">(</font></font></font><font color="#656974"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><code>\l
	p*@</font></font></font></code><font color="#656974"> </font><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">is
	a shorthand for the same); and </font></font></font><font color="#656974"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><code>\l
	*@fooBar</font></font></font></code><font color="#656974"> </font><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">lists
	all cells of domain </font></font></font><font color="#656974"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><code>fooBar</font></font></font></code><font color="#656974">
	</font><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">(with
	the shorthand </font></font></font><font color="#656974"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><code>\l
	@fooBar</font></font></font></code><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">).</span></font></font></font></p>
	<p style="margin-top: 0.1in; margin-bottom: 0.08in"><span style="display: inline-block; border: none; padding: 0in"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">As
	part of the face lift, both the shell prompt and the welcome message
	got updated. The prompt is partially configurable using the new
	</font></font></font><font color="#656974"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><code>admin.prompt</font></font></font></code><font color="#656974">
	</font><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">property.</span></font></font></font></p>
	<p style="margin-top: 0.1in; margin-bottom: 0.08in"><span style="display: inline-block; border: none; padding: 0in"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">The
	old shell provided several utility commands at the &quot;root&quot;
	level. These commands are no longer supported, but most of them can
	be mimicked using some of the new commands introduced.</span></font></font></font></p>
	<p style="margin-top: 0.1in; margin-bottom: 0.08in"><span style="display: inline-block; border: none; padding: 0in"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">We
	provide a brief summary of the new commands in the tables below, as
	well as a comparison of the old and new commands.</span></font></font></font></p>
	<p align="left" style="margin-bottom: 0in"><br/>

	</p>
	<p align="center" style="margin-bottom: 0in">Cell address wildcards</p>
	<center>
		<table width="602" cellpadding="2" cellspacing="0">
			<col width="178">
			<col width="416">
			<thead>
				<tr>
					<th width="178" style="border-top: none; border-bottom: 1px solid #000000; border-left: none; border-right: none; padding-top: 0in; padding-bottom: 0.02in; padding-left: 0in; padding-right: 0in">
						<p><font size="1" style="font-size: 8pt">Pattern</font></p>
					</th>
					<th width="416" style="border-top: none; border-bottom: 1px solid #000000; border-left: none; border-right: none; padding-top: 0in; padding-bottom: 0.02in; padding-left: 0in; padding-right: 0in">
						<p><font size="1" style="font-size: 8pt">Meaning</font></p>
					</th>
				</tr>
			</thead>
			<tbody>
				<tr>
					<td width="178" style="border-top: none; border-bottom: 1px solid #000000; border-left: none; border-right: none; padding-top: 0in; padding-bottom: 0.02in; padding-left: 0in; padding-right: 0in">
						<p><font size="1" style="font-size: 8pt">cell@domain</font></p>
					</td>
					<td width="416" style="border-top: none; border-bottom: 1px solid #000000; border-left: none; border-right: none; padding-top: 0in; padding-bottom: 0.02in; padding-left: 0in; padding-right: 0in">
						<p><font size="1" style="font-size: 8pt">Fully qualified cell
						address.</font></p>
					</td>
				</tr>
				<tr>
					<td width="178" style="border-top: none; border-bottom: 1px solid #000000; border-left: none; border-right: none; padding-top: 0in; padding-bottom: 0.02in; padding-left: 0in; padding-right: 0in">
						<p><font size="1" style="font-size: 8pt">cell</font></p>
					</td>
					<td width="416" style="border-top: none; border-bottom: 1px solid #000000; border-left: none; border-right: none; padding-top: 0in; padding-bottom: 0.02in; padding-left: 0in; padding-right: 0in">
						<p><font size="1" style="font-size: 8pt">Well known cell.</font></p>
					</td>
				</tr>
				<tr>
					<td width="178" style="border-top: none; border-bottom: 1px solid #000000; border-left: none; border-right: none; padding-top: 0in; padding-bottom: 0.02in; padding-left: 0in; padding-right: 0in">
						<p><font size="1" style="font-size: 8pt">GLOB@domain</font></p>
					</td>
					<td width="416" style="border-top: none; border-bottom: 1px solid #000000; border-left: none; border-right: none; padding-top: 0in; padding-bottom: 0.02in; padding-left: 0in; padding-right: 0in">
						<p><font size="1" style="font-size: 8pt">All cells matching
						GLOB in domain.</font></p>
					</td>
				</tr>
				<tr>
					<td width="178" style="border-top: none; border-bottom: 1px solid #000000; border-left: none; border-right: none; padding-top: 0in; padding-bottom: 0.02in; padding-left: 0in; padding-right: 0in">
						<p><font size="1" style="font-size: 8pt">cell@GLOB</font></p>
					</td>
					<td width="416" style="border-top: none; border-bottom: 1px solid #000000; border-left: none; border-right: none; padding-top: 0in; padding-bottom: 0.02in; padding-left: 0in; padding-right: 0in">
						<p><font size="1" style="font-size: 8pt">All cells called cell
						in any domain matching GLOB.</font></p>
					</td>
				</tr>
				<tr>
					<td width="178" style="border-top: none; border-bottom: 1px solid #000000; border-left: none; border-right: none; padding-top: 0in; padding-bottom: 0.02in; padding-left: 0in; padding-right: 0in">
						<p><font size="1" style="font-size: 8pt">cell@</font></p>
					</td>
					<td width="416" style="border-top: none; border-bottom: 1px solid #000000; border-left: none; border-right: none; padding-top: 0in; padding-bottom: 0.02in; padding-left: 0in; padding-right: 0in">
						<p><font size="1" style="font-size: 8pt">Short for cell@*, i.e.
						any cell called cell in any domain.</font></p>
					</td>
				</tr>
				<tr>
					<td width="178" style="border-top: none; border-bottom: 1px solid #000000; border-left: none; border-right: none; padding-top: 0in; padding-bottom: 0.02in; padding-left: 0in; padding-right: 0in">
						<p><font size="1" style="font-size: 8pt">@domain</font></p>
					</td>
					<td width="416" style="border-top: none; border-bottom: 1px solid #000000; border-left: none; border-right: none; padding-top: 0in; padding-bottom: 0.02in; padding-left: 0in; padding-right: 0in">
						<p><font size="1" style="font-size: 8pt">Short for *@domain,
						i.e. any cell in the domain called domain. </font>
						</p>
					</td>
				</tr>
				<tr>
					<td width="178" style="border-top: none; border-bottom: 1px solid #000000; border-left: none; border-right: none; padding-top: 0in; padding-bottom: 0.02in; padding-left: 0in; padding-right: 0in">
						<p><font size="1" style="font-size: 8pt">@</font></p>
					</td>
					<td width="416" style="border-top: none; border-bottom: 1px solid #000000; border-left: none; border-right: none; padding-top: 0in; padding-bottom: 0.02in; padding-left: 0in; padding-right: 0in">
						<p><font size="1" style="font-size: 8pt">Short for *@*, i.e.
						any cell in the entire system.</font></p>
					</td>
				</tr>
				<tr>
					<td width="178" style="border: none; padding: 0in">
						<p><font size="1" style="font-size: 8pt">*@domain1:cell@domain2</font></p>
					</td>
					<td width="416" style="border: none; padding: 0in">
						<p><font size="1" style="font-size: 8pt">Source routed cell
						path. The asterix is not a wildcard!</font></p>
					</td>
				</tr>
			</tbody>
		</table>
	</center>
	<p align="center" style="margin-bottom: 0in"><br/>

	</p>
	<p align="center" style="margin-bottom: 0in">Admin shell commands
	illustrated</p>
	<center>
		<table width="637" cellpadding="2" cellspacing="0">
			<col width="140">
			<col width="489">
			<thead>
				<tr>
					<th width="140" style="border-top: none; border-bottom: 1px solid #000000; border-left: none; border-right: none; padding-top: 0in; padding-bottom: 0.02in; padding-left: 0in; padding-right: 0in">
						<p><font size="1" style="font-size: 8pt">Command</font></p>
					</th>
					<th width="489" style="border-top: none; border-bottom: 1px solid #000000; border-left: none; border-right: none; padding-top: 0in; padding-bottom: 0.02in; padding-left: 0in; padding-right: 0in">
						<p><font size="1" style="font-size: 8pt">Meaning</font></p>
					</th>
				</tr>
			</thead>
			<tbody>
				<tr>
					<td width="140" style="border-top: none; border-bottom: 1px solid #000000; border-left: none; border-right: none; padding-top: 0in; padding-bottom: 0.02in; padding-left: 0in; padding-right: 0in">
						<p><code><font size="1" style="font-size: 8pt">\?</font></code></p>
					</td>
					<td width="489" style="border-top: none; border-bottom: 1px solid #000000; border-left: none; border-right: none; padding-top: 0in; padding-bottom: 0.02in; padding-left: 0in; padding-right: 0in">
						<p><font size="1" style="font-size: 8pt">Show a summary of
						shell commands.</font></p>
					</td>
				</tr>
				<tr>
					<td width="140" style="border-top: none; border-bottom: 1px solid #000000; border-left: none; border-right: none; padding-top: 0in; padding-bottom: 0.02in; padding-left: 0in; padding-right: 0in">
						<p><code><font size="1" style="font-size: 8pt">\?</font></code>
						<font size="1" style="font-size: 8pt">CMD</font></p>
					</td>
					<td width="489" style="border-top: none; border-bottom: 1px solid #000000; border-left: none; border-right: none; padding-top: 0in; padding-bottom: 0.02in; padding-left: 0in; padding-right: 0in">
						<p><font size="1" style="font-size: 8pt">Show help of shell
						command CMD.</font></p>
					</td>
				</tr>
				<tr>
					<td width="140" style="border-top: none; border-bottom: 1px solid #000000; border-left: none; border-right: none; padding-top: 0in; padding-bottom: 0.02in; padding-left: 0in; padding-right: 0in">
						<p><code><font size="1" style="font-size: 8pt">\h</font></code></p>
					</td>
					<td width="489" style="border-top: none; border-bottom: 1px solid #000000; border-left: none; border-right: none; padding-top: 0in; padding-bottom: 0.02in; padding-left: 0in; padding-right: 0in">
						<p><font size="1" style="font-size: 8pt">Show a summary of
						commands of connected cell.</font></p>
					</td>
				</tr>
				<tr>
					<td width="140" style="border-top: none; border-bottom: 1px solid #000000; border-left: none; border-right: none; padding-top: 0in; padding-bottom: 0.02in; padding-left: 0in; padding-right: 0in">
						<p><code><font size="1" style="font-size: 8pt">\h</font></code>
						<font size="1" style="font-size: 8pt">CMD</font></p>
					</td>
					<td width="489" style="border-top: none; border-bottom: 1px solid #000000; border-left: none; border-right: none; padding-top: 0in; padding-bottom: 0.02in; padding-left: 0in; padding-right: 0in">
						<p><font size="1" style="font-size: 8pt">Show help of command
						CMD of connected cell.</font></p>
					</td>
				</tr>
				<tr>
					<td width="140" style="border-top: none; border-bottom: 1px solid #000000; border-left: none; border-right: none; padding-top: 0in; padding-bottom: 0.02in; padding-left: 0in; padding-right: 0in">
						<p><code><font size="1" style="font-size: 8pt">\c</font></code>
						<font size="1" style="font-size: 8pt">CELL</font></p>
					</td>
					<td width="489" style="border-top: none; border-bottom: 1px solid #000000; border-left: none; border-right: none; padding-top: 0in; padding-bottom: 0.02in; padding-left: 0in; padding-right: 0in">
						<p><font size="1" style="font-size: 8pt">Connect to well-known
						cell.</font></p>
					</td>
				</tr>
				<tr>
					<td width="140" style="border-top: none; border-bottom: 1px solid #000000; border-left: none; border-right: none; padding-top: 0in; padding-bottom: 0.02in; padding-left: 0in; padding-right: 0in">
						<p><code><font size="1" style="font-size: 8pt">\c</font></code>
						<font size="1" style="font-size: 8pt">CELL@DOMAIN</font></p>
					</td>
					<td width="489" style="border-top: none; border-bottom: 1px solid #000000; border-left: none; border-right: none; padding-top: 0in; padding-bottom: 0.02in; padding-left: 0in; padding-right: 0in">
						<p><font size="1" style="font-size: 8pt">Connect to fully
						qualified cell.</font></p>
					</td>
				</tr>
				<tr>
					<td width="140" style="border-top: none; border-bottom: 1px solid #000000; border-left: none; border-right: none; padding-top: 0in; padding-bottom: 0.02in; padding-left: 0in; padding-right: 0in">
						<p><code><font size="1" style="font-size: 8pt">\c</font></code>
						<font size="1" style="font-size: 8pt">CELL USER</font></p>
					</td>
					<td width="489" style="border-top: none; border-bottom: 1px solid #000000; border-left: none; border-right: none; padding-top: 0in; padding-bottom: 0.02in; padding-left: 0in; padding-right: 0in">
						<p><font size="1" style="font-size: 8pt">Connect to cell as
						user.</font></p>
					</td>
				</tr>
				<tr>
					<td width="140" style="border-top: none; border-bottom: 1px solid #000000; border-left: none; border-right: none; padding-top: 0in; padding-bottom: 0.02in; padding-left: 0in; padding-right: 0in">
						<p><code><font size="1" style="font-size: 8pt">\l</font></code></p>
					</td>
					<td width="489" style="border-top: none; border-bottom: 1px solid #000000; border-left: none; border-right: none; padding-top: 0in; padding-bottom: 0.02in; padding-left: 0in; padding-right: 0in">
						<p><font size="1" style="font-size: 8pt">List all well-known
						cells and cells local to the currently connected domain.</font></p>
					</td>
				</tr>
				<tr>
					<td width="140" style="border-top: none; border-bottom: 1px solid #000000; border-left: none; border-right: none; padding-top: 0in; padding-bottom: 0.02in; padding-left: 0in; padding-right: 0in">
						<p><code><font size="1" style="font-size: 8pt">\l</font></code>
						<font size="1" style="font-size: 8pt">GLOB</font></p>
					</td>
					<td width="489" style="border-top: none; border-bottom: 1px solid #000000; border-left: none; border-right: none; padding-top: 0in; padding-bottom: 0.02in; padding-left: 0in; padding-right: 0in">
						<p><font size="1" style="font-size: 8pt">List all cells
						matching the cell wildcard.</font></p>
					</td>
				</tr>
				<tr>
					<td width="140" style="border-top: none; border-bottom: 1px solid #000000; border-left: none; border-right: none; padding-top: 0in; padding-bottom: 0.02in; padding-left: 0in; padding-right: 0in">
						<p><code><font size="1" style="font-size: 8pt">\q</font></code></p>
					</td>
					<td width="489" style="border-top: none; border-bottom: 1px solid #000000; border-left: none; border-right: none; padding-top: 0in; padding-bottom: 0.02in; padding-left: 0in; padding-right: 0in">
						<p><font size="1" style="font-size: 8pt">Quit shell.</font></p>
					</td>
				</tr>
				<tr>
					<td width="140" style="border-top: none; border-bottom: 1px solid #000000; border-left: none; border-right: none; padding-top: 0in; padding-bottom: 0.02in; padding-left: 0in; padding-right: 0in">
						<p><code><font size="1" style="font-size: 8pt">\s</font></code>
						<font size="1" style="font-size: 8pt">CELL CMD</font></p>
					</td>
					<td width="489" style="border-top: none; border-bottom: 1px solid #000000; border-left: none; border-right: none; padding-top: 0in; padding-bottom: 0.02in; padding-left: 0in; padding-right: 0in">
						<p><font size="1" style="font-size: 8pt">Send CMD to cell.</font></p>
					</td>
				</tr>
				<tr>
					<td width="140" style="border-top: none; border-bottom: 1px solid #000000; border-left: none; border-right: none; padding-top: 0in; padding-bottom: 0.02in; padding-left: 0in; padding-right: 0in">
						<p><code><font size="1" style="font-size: 8pt">\s</font></code>
						<font size="1" style="font-size: 8pt">CELL1,CELL2 CMD</font></p>
					</td>
					<td width="489" style="border-top: none; border-bottom: 1px solid #000000; border-left: none; border-right: none; padding-top: 0in; padding-bottom: 0.02in; padding-left: 0in; padding-right: 0in">
						<p><font size="1" style="font-size: 8pt">Send CMD to cell1 and
						cell2.</font></p>
					</td>
				</tr>
				<tr>
					<td width="140" style="border-top: none; border-bottom: 1px solid #000000; border-left: none; border-right: none; padding-top: 0in; padding-bottom: 0.02in; padding-left: 0in; padding-right: 0in">
						<p><code><font size="1" style="font-size: 8pt">\s</font></code>
						<font size="1" style="font-size: 8pt">GLOB CMD</font></p>
					</td>
					<td width="489" style="border-top: none; border-bottom: 1px solid #000000; border-left: none; border-right: none; padding-top: 0in; padding-bottom: 0.02in; padding-left: 0in; padding-right: 0in">
						<p><font size="1" style="font-size: 8pt">Send CMD to all cells
						matching the cell wildcard.</font></p>
					</td>
				</tr>
				<tr>
					<td width="140" style="border-top: none; border-bottom: 1px solid #000000; border-left: none; border-right: none; padding-top: 0in; padding-bottom: 0.02in; padding-left: 0in; padding-right: 0in">
						<p><code><font size="1" style="font-size: 8pt">\sn</font></code>
						<font size="1" style="font-size: 8pt">CMD</font></p>
					</td>
					<td width="489" style="border-top: none; border-bottom: 1px solid #000000; border-left: none; border-right: none; padding-top: 0in; padding-bottom: 0.02in; padding-left: 0in; padding-right: 0in">
						<p><font size="1" style="font-size: 8pt">Send CMD to pnfs
						manager (name space).</font></p>
					</td>
				</tr>
				<tr>
					<td width="140" style="border-top: none; border-bottom: 1px solid #000000; border-left: none; border-right: none; padding-top: 0in; padding-bottom: 0.02in; padding-left: 0in; padding-right: 0in">
						<p><code><font size="1" style="font-size: 8pt">\sp</font></code>
						<font size="1" style="font-size: 8pt">CMD</font></p>
					</td>
					<td width="489" style="border-top: none; border-bottom: 1px solid #000000; border-left: none; border-right: none; padding-top: 0in; padding-bottom: 0.02in; padding-left: 0in; padding-right: 0in">
						<p><font size="1" style="font-size: 8pt">Send CMD to pool
						manager.</font></p>
					</td>
				</tr>
				<tr>
					<td width="140" style="border-top: none; border-bottom: 1px solid #000000; border-left: none; border-right: none; padding-top: 0in; padding-bottom: 0.02in; padding-left: 0in; padding-right: 0in">
						<p><code><font size="1" style="font-size: 8pt">\sl</font></code>
						<font size="1" style="font-size: 8pt">PATH CMD</font></p>
					</td>
					<td width="489" style="border-top: none; border-bottom: 1px solid #000000; border-left: none; border-right: none; padding-top: 0in; padding-bottom: 0.02in; padding-left: 0in; padding-right: 0in">
						<p><font size="1" style="font-size: 8pt">Send CMD to all pools
						containing the file described by PATH.</font></p>
					</td>
				</tr>
				<tr>
					<td width="140" style="border: none; padding: 0in">
						<p><code><font size="1" style="font-size: 8pt">\sl</font></code>
						<font size="1" style="font-size: 8pt">PNFSID CMD</font></p>
					</td>
					<td width="489" style="border: none; padding: 0in">
						<p><font size="1" style="font-size: 8pt">Send CMD to all pools
						containing the file described by PATH.</font></p>
					</td>
				</tr>
			</tbody>
		</table>
	</center>
	<p align="center" style="margin-bottom: 0in"><br/>

	</p>
	<p align="center" style="margin-bottom: 0in">Keyboard shortcuts</p>
	<center>
		<table width="285" cellpadding="2" cellspacing="0">
			<col width="30">
			<col width="247">
			<thead>
				<tr>
					<th width="30" style="border-top: none; border-bottom: 1px solid #000000; border-left: none; border-right: none; padding-top: 0in; padding-bottom: 0.02in; padding-left: 0in; padding-right: 0in">
						<p><font size="1" style="font-size: 8pt">Key</font></p>
					</th>
					<th width="247" style="border-top: none; border-bottom: 1px solid #000000; border-left: none; border-right: none; padding-top: 0in; padding-bottom: 0.02in; padding-left: 0in; padding-right: 0in">
						<p><font size="1" style="font-size: 8pt">Meaning</font></p>
					</th>
				</tr>
			</thead>
			<tbody>
				<tr>
					<td width="30" style="border-top: none; border-bottom: 1px solid #000000; border-left: none; border-right: none; padding-top: 0in; padding-bottom: 0.02in; padding-left: 0in; padding-right: 0in">
						<p><font size="1" style="font-size: 8pt">^C</font></p>
					</td>
					<td width="247" style="border-top: none; border-bottom: 1px solid #000000; border-left: none; border-right: none; padding-top: 0in; padding-bottom: 0.02in; padding-left: 0in; padding-right: 0in">
						<p><font size="1" style="font-size: 8pt">Interrupt currently
						running command.</font></p>
					</td>
				</tr>
				<tr>
					<td width="30" style="border-top: none; border-bottom: 1px solid #000000; border-left: none; border-right: none; padding-top: 0in; padding-bottom: 0.02in; padding-left: 0in; padding-right: 0in">
						<p><font size="1" style="font-size: 8pt">^D</font></p>
					</td>
					<td width="247" style="border-top: none; border-bottom: 1px solid #000000; border-left: none; border-right: none; padding-top: 0in; padding-bottom: 0.02in; padding-left: 0in; padding-right: 0in">
						<p><font size="1" style="font-size: 8pt">Quit shell.</font></p>
					</td>
				</tr>
				<tr>
					<td width="30" style="border-top: none; border-bottom: 1px solid #000000; border-left: none; border-right: none; padding-top: 0in; padding-bottom: 0.02in; padding-left: 0in; padding-right: 0in">
						<p><font size="1" style="font-size: 8pt">^R</font></p>
					</td>
					<td width="247" style="border-top: none; border-bottom: 1px solid #000000; border-left: none; border-right: none; padding-top: 0in; padding-bottom: 0.02in; padding-left: 0in; padding-right: 0in">
						<p><font size="1" style="font-size: 8pt">Search history.</font></p>
					</td>
				</tr>
				<tr>
					<td width="30" style="border: none; padding: 0in">
						<p><font size="1" style="font-size: 8pt">TAB</font></p>
					</td>
					<td width="247" style="border: none; padding: 0in">
						<p><font size="1" style="font-size: 8pt">Complete command or
						argument.</font></p>
					</td>
				</tr>
			</tbody>
		</table>
	</center>
	<p align="center" style="margin-bottom: 0in"><br/>

	</p>
	<p align="center" style="margin-bottom: 0in">Tricks</p>
	<center>
		<table width="795" cellpadding="2" cellspacing="0">
			<col width="404">
			<col width="383">
			<thead>
				<tr>
					<th width="404" style="border-top: none; border-bottom: 1px solid #000000; border-left: none; border-right: none; padding-top: 0in; padding-bottom: 0.02in; padding-left: 0in; padding-right: 0in">
						<p><font size="1" style="font-size: 8pt">Command</font></p>
					</th>
					<th width="383" style="border-top: none; border-bottom: 1px solid #000000; border-left: none; border-right: none; padding-top: 0in; padding-bottom: 0.02in; padding-left: 0in; padding-right: 0in">
						<p><font size="1" style="font-size: 8pt">What it does</font></p>
					</th>
				</tr>
			</thead>
			<tbody>
				<tr>
					<td width="404" style="border-top: none; border-bottom: 1px solid #000000; border-left: none; border-right: none; padding-top: 0in; padding-bottom: 0.02in; padding-left: 0in; padding-right: 0in">
						<p><code><font size="1" style="font-size: 8pt">\s System@ kill
						System</font></code></p>
					</td>
					<td width="383" style="border-top: none; border-bottom: 1px solid #000000; border-left: none; border-right: none; padding-top: 0in; padding-bottom: 0.02in; padding-left: 0in; padding-right: 0in">
						<p><font size="1" style="font-size: 8pt">Restart all domains.</font></p>
					</td>
				</tr>
				<tr>
					<td width="404" style="border-top: none; border-bottom: 1px solid #000000; border-left: none; border-right: none; padding-top: 0in; padding-bottom: 0.02in; padding-left: 0in; padding-right: 0in">
						<p><code><font size="1" style="font-size: 8pt">\sl
						/path/to/file rep ls $1</font></code></p>
					</td>
					<td width="383" style="border-top: none; border-bottom: 1px solid #000000; border-left: none; border-right: none; padding-top: 0in; padding-bottom: 0.02in; padding-left: 0in; padding-right: 0in">
						<p><font size="1" style="font-size: 8pt">List all replicas of
						the file.</font></p>
					</td>
				</tr>
				<tr>
					<td width="404" style="border-top: none; border-bottom: 1px solid #000000; border-left: none; border-right: none; padding-top: 0in; padding-bottom: 0.02in; padding-left: 0in; padding-right: 0in">
						<p><code><font size="1" style="font-size: 8pt">\sl
						/path/to/file rep rm $1</font></code></p>
					</td>
					<td width="383" style="border-top: none; border-bottom: 1px solid #000000; border-left: none; border-right: none; padding-top: 0in; padding-bottom: 0.02in; padding-left: 0in; padding-right: 0in">
						<p><font size="1" style="font-size: 8pt">Remove all removable
						replicas of the file.</font></p>
					</td>
				</tr>
				<tr>
					<td width="404" style="border-top: none; border-bottom: 1px solid #000000; border-left: none; border-right: none; padding-top: 0in; padding-bottom: 0.02in; padding-left: 0in; padding-right: 0in">
						<p><code><font size="1" style="font-size: 8pt">\sl
						/path/to/file rep set sticky -o=me -l=60000 $1</font></code></p>
					</td>
					<td width="383" style="border-top: none; border-bottom: 1px solid #000000; border-left: none; border-right: none; padding-top: 0in; padding-bottom: 0.02in; padding-left: 0in; padding-right: 0in">
						<p><font size="1" style="font-size: 8pt">Add a 60s sticky bit
						owner by me to all replicas of the file.</font></p>
					</td>
				</tr>
				<tr>
					<td width="404" style="border-top: none; border-bottom: 1px solid #000000; border-left: none; border-right: none; padding-top: 0in; padding-bottom: 0.02in; padding-left: 0in; padding-right: 0in">
						<p><code><font size="1" style="font-size: 8pt">\sn cacheinfoof
						/path/to/file</font></code></p>
					</td>
					<td width="383" style="border-top: none; border-bottom: 1px solid #000000; border-left: none; border-right: none; padding-top: 0in; padding-bottom: 0.02in; padding-left: 0in; padding-right: 0in">
						<p><font size="1" style="font-size: 8pt">Get cache locations of
						the file.</font></p>
					</td>
				</tr>
				<tr>
					<td width="404" style="border: none; padding: 0in">
						<p><code><font size="1" style="font-size: 8pt">\sn cacheinfoof
						/path/to/file</font></code></p>
					</td>
					<td width="383" style="border: none; padding: 0in">
						<p><font size="1" style="font-size: 8pt">Get cache locations of
						the file.</font></p>
					</td>
				</tr>
			</tbody>
		</table>
	</center>
	<p align="center" style="margin-bottom: 0in"><br/>

	</p>
	<p align="center" style="margin-bottom: 0in">Replacements for legacy
	commands</p>
	<center>
		<table width="1143" cellpadding="2" cellspacing="0">
			<col width="451">
			<col width="382">
			<col width="298">
			<thead>
				<tr>
					<th width="451" style="border-top: none; border-bottom: 1px solid #000000; border-left: none; border-right: none; padding-top: 0in; padding-bottom: 0.02in; padding-left: 0in; padding-right: 0in">
						<p><font size="1" style="font-size: 8pt">Old</font></p>
					</th>
					<th width="382" style="border-top: none; border-bottom: 1px solid #000000; border-left: none; border-right: none; padding-top: 0in; padding-bottom: 0.02in; padding-left: 0in; padding-right: 0in">
						<p><font size="1" style="font-size: 8pt">New</font></p>
					</th>
					<th width="298" style="border-top: none; border-bottom: 1px solid #000000; border-left: none; border-right: none; padding-top: 0in; padding-bottom: 0.02in; padding-left: 0in; padding-right: 0in">
						<p><font size="1" style="font-size: 8pt">Remark</font></p>
					</th>
				</tr>
			</thead>
			<tbody>
				<tr>
					<td width="451" style="border-top: none; border-bottom: 1px solid #000000; border-left: none; border-right: none; padding-top: 0in; padding-bottom: 0.02in; padding-left: 0in; padding-right: 0in">
						<p><code><font size="1" style="font-size: 8pt">flags ls</font></code>
						<em><font size="1" style="font-size: 8pt">file</font></em> 
						</p>
					</td>
					<td width="382" style="border-top: none; border-bottom: 1px solid #000000; border-left: none; border-right: none; padding-top: 0in; padding-bottom: 0.02in; padding-left: 0in; padding-right: 0in">
						<p><code><font size="1" style="font-size: 8pt">\sn flags ls</font></code>
						<em><font size="1" style="font-size: 8pt">file</font></em> 
						</p>
					</td>
					<td width="298" style="border-top: none; border-bottom: 1px solid #000000; border-left: none; border-right: none; padding-top: 0in; padding-bottom: 0.02in; padding-left: 0in; padding-right: 0in">
						<p><font size="1" style="font-size: 8pt">Output format is
						different.</font></p>
					</td>
				</tr>
				<tr>
					<td width="451" style="border-top: none; border-bottom: 1px solid #000000; border-left: none; border-right: none; padding-top: 0in; padding-bottom: 0.02in; padding-left: 0in; padding-right: 0in">
						<p><code><font size="1" style="font-size: 8pt">flags remove</font></code>
						<em><font size="1" style="font-size: 8pt">file</font></em> <em><font size="1" style="font-size: 8pt">key</font></em>
												</p>
					</td>
					<td width="382" style="border-top: none; border-bottom: 1px solid #000000; border-left: none; border-right: none; padding-top: 0in; padding-bottom: 0.02in; padding-left: 0in; padding-right: 0in">
						<p><code><font size="1" style="font-size: 8pt">\sn flags remove</font></code>
						<em><font size="1" style="font-size: 8pt">file</font></em> <font size="1" style="font-size: 8pt">-</font><em><font size="1" style="font-size: 8pt">key</font></em>
												</p>
					</td>
					<td width="298" style="border-top: none; border-bottom: 1px solid #000000; border-left: none; border-right: none; padding-top: 0in; padding-bottom: 0.02in; padding-left: 0in; padding-right: 0in">
						<p><br/>

						</p>
					</td>
				</tr>
				<tr>
					<td width="451" style="border-top: none; border-bottom: 1px solid #000000; border-left: none; border-right: none; padding-top: 0in; padding-bottom: 0.02in; padding-left: 0in; padding-right: 0in">
						<p><code><font size="1" style="font-size: 8pt">flags set</font></code>
						<em><font size="1" style="font-size: 8pt">file</font></em> <em><font size="1" style="font-size: 8pt">key</font></em>
						<em><font size="1" style="font-size: 8pt">value</font></em> 
						</p>
					</td>
					<td width="382" style="border-top: none; border-bottom: 1px solid #000000; border-left: none; border-right: none; padding-top: 0in; padding-bottom: 0.02in; padding-left: 0in; padding-right: 0in">
						<p><code><font size="1" style="font-size: 8pt">\sn flags set</font></code>
						<em><font size="1" style="font-size: 8pt">file</font></em>
						<font size="1" style="font-size: 8pt">-</font><em><font size="1" style="font-size: 8pt">key</font></em><font size="1" style="font-size: 8pt">=</font><em><font size="1" style="font-size: 8pt">value</font></em>
												</p>
					</td>
					<td width="298" style="border-top: none; border-bottom: 1px solid #000000; border-left: none; border-right: none; padding-top: 0in; padding-bottom: 0.02in; padding-left: 0in; padding-right: 0in">
						<p><br/>

						</p>
					</td>
				</tr>
				<tr>
					<td width="451" style="border-top: none; border-bottom: 1px solid #000000; border-left: none; border-right: none; padding-top: 0in; padding-bottom: 0.02in; padding-left: 0in; padding-right: 0in">
						<p><code><font size="1" style="font-size: 8pt">getpoolbylink</font></code></p>
					</td>
					<td width="382" style="border-top: none; border-bottom: 1px solid #000000; border-left: none; border-right: none; padding-top: 0in; padding-bottom: 0.02in; padding-left: 0in; padding-right: 0in">
						<p><br/>

						</p>
					</td>
					<td width="298" style="border-top: none; border-bottom: 1px solid #000000; border-left: none; border-right: none; padding-top: 0in; padding-bottom: 0.02in; padding-left: 0in; padding-right: 0in">
						<p><br/>

						</p>
					</td>
				</tr>
				<tr>
					<td width="451" style="border-top: none; border-bottom: 1px solid #000000; border-left: none; border-right: none; padding-top: 0in; padding-bottom: 0.02in; padding-left: 0in; padding-right: 0in">
						<p><code><font size="1" style="font-size: 8pt">modify poolmode
						enable</font></code> <em><font size="1" style="font-size: 8pt">pool</font></em><font size="1" style="font-size: 8pt">[,</font><em><font size="1" style="font-size: 8pt">pool</font></em>…<font size="1" style="font-size: 8pt">]</font></p>
					</td>
					<td width="382" style="border-top: none; border-bottom: 1px solid #000000; border-left: none; border-right: none; padding-top: 0in; padding-bottom: 0.02in; padding-left: 0in; padding-right: 0in">
						<p><code><font size="1" style="font-size: 8pt">\s</font></code>
						<em><font size="1" style="font-size: 8pt">pool</font></em><font size="1" style="font-size: 8pt">,[</font><em><font size="1" style="font-size: 8pt">pool</font></em>…<font size="1" style="font-size: 8pt">]
						</font><code><font size="1" style="font-size: 8pt">pool enable</font></code>
												</p>
					</td>
					<td width="298" style="border-top: none; border-bottom: 1px solid #000000; border-left: none; border-right: none; padding-top: 0in; padding-bottom: 0.02in; padding-left: 0in; padding-right: 0in">
						<p><br/>

						</p>
					</td>
				</tr>
				<tr>
					<td width="451" style="border-top: none; border-bottom: 1px solid #000000; border-left: none; border-right: none; padding-top: 0in; padding-bottom: 0.02in; padding-left: 0in; padding-right: 0in">
						<p><code><font size="1" style="font-size: 8pt">modify poolmode
						disable</font></code> <em><font size="1" style="font-size: 8pt">pool</font></em><font size="1" style="font-size: 8pt">[,</font><em><font size="1" style="font-size: 8pt">pool</font></em>…<font size="1" style="font-size: 8pt">][</font><em><font size="1" style="font-size: 8pt">code</font></em>
						<font size="1" style="font-size: 8pt">[</font><em><font size="1" style="font-size: 8pt">message</font></em><font size="1" style="font-size: 8pt">]]
						[</font><em><font size="1" style="font-size: 8pt">options</font></em><font size="1" style="font-size: 8pt">]</font></p>
					</td>
					<td width="382" style="border-top: none; border-bottom: 1px solid #000000; border-left: none; border-right: none; padding-top: 0in; padding-bottom: 0.02in; padding-left: 0in; padding-right: 0in">
						<p><code><font size="1" style="font-size: 8pt">\s</font></code>
						<em><font size="1" style="font-size: 8pt">pool</font></em><font size="1" style="font-size: 8pt">,[</font><em><font size="1" style="font-size: 8pt">pool</font></em>…<font size="1" style="font-size: 8pt">]
						</font><code><font size="1" style="font-size: 8pt">pool disable</font></code>
						<font size="1" style="font-size: 8pt">[</font><em><font size="1" style="font-size: 8pt">code</font></em>
						<font size="1" style="font-size: 8pt">[</font><em><font size="1" style="font-size: 8pt">message</font></em><font size="1" style="font-size: 8pt">]][</font><em><font size="1" style="font-size: 8pt">options</font></em><font size="1" style="font-size: 8pt">]</font></p>
					</td>
					<td width="298" style="border-top: none; border-bottom: 1px solid #000000; border-left: none; border-right: none; padding-top: 0in; padding-bottom: 0.02in; padding-left: 0in; padding-right: 0in">
						<p><br/>

						</p>
					</td>
				</tr>
				<tr>
					<td width="451" style="border-top: none; border-bottom: 1px solid #000000; border-left: none; border-right: none; padding-top: 0in; padding-bottom: 0.02in; padding-left: 0in; padding-right: 0in">
						<p><code><font size="1" style="font-size: 8pt">p2p</font></code>
						<em><font size="1" style="font-size: 8pt">pnfsid</font></em>
						<em><font size="1" style="font-size: 8pt">source</font></em>
						<em><font size="1" style="font-size: 8pt">target</font></em> 
						</p>
					</td>
					<td width="382" style="border-top: none; border-bottom: 1px solid #000000; border-left: none; border-right: none; padding-top: 0in; padding-bottom: 0.02in; padding-left: 0in; padding-right: 0in">
						<p><code><font size="1" style="font-size: 8pt">\s</font></code>
						<em><font size="1" style="font-size: 8pt">source</font></em>
						<code><font size="1" style="font-size: 8pt">migration cache
						-pnfsid=</font></code><em><font size="1" style="font-size: 8pt">pnfsid</font></em>
						<em><font size="1" style="font-size: 8pt">target</font></em> 
						</p>
					</td>
					<td width="298" style="border-top: none; border-bottom: 1px solid #000000; border-left: none; border-right: none; padding-top: 0in; padding-bottom: 0.02in; padding-left: 0in; padding-right: 0in">
						<p><br/>

						</p>
					</td>
				</tr>
				<tr>
					<td width="451" style="border-top: none; border-bottom: 1px solid #000000; border-left: none; border-right: none; padding-top: 0in; padding-bottom: 0.02in; padding-left: 0in; padding-right: 0in">
						<p><code><font size="1" style="font-size: 8pt">p2p</font></code>
						<em><font size="1" style="font-size: 8pt">pnfsid</font></em> 
						</p>
					</td>
					<td width="382" style="border-top: none; border-bottom: 1px solid #000000; border-left: none; border-right: none; padding-top: 0in; padding-bottom: 0.02in; padding-left: 0in; padding-right: 0in">
						<p><code><font size="1" style="font-size: 8pt">\sp replicate</font></code>
						<em><font size="1" style="font-size: 8pt">pnfsid</font></em>
						<font size="1" style="font-size: 8pt">localhost</font></p>
					</td>
					<td width="298" style="border-top: none; border-bottom: 1px solid #000000; border-left: none; border-right: none; padding-top: 0in; padding-bottom: 0.02in; padding-left: 0in; padding-right: 0in">
						<p><font size="1" style="font-size: 8pt">The new form is
						non-blocking.</font></p>
					</td>
				</tr>
				<tr>
					<td width="451" style="border-top: none; border-bottom: 1px solid #000000; border-left: none; border-right: none; padding-top: 0in; padding-bottom: 0.02in; padding-left: 0in; padding-right: 0in">
						<p><code><font size="1" style="font-size: 8pt">pnfs map</font></code>
						<em><font size="1" style="font-size: 8pt">path</font></em> 
						</p>
					</td>
					<td width="382" style="border-top: none; border-bottom: 1px solid #000000; border-left: none; border-right: none; padding-top: 0in; padding-bottom: 0.02in; padding-left: 0in; padding-right: 0in">
						<p><code><font size="1" style="font-size: 8pt">\sn pnfsidof</font></code>
						<em><font size="1" style="font-size: 8pt">path</font></em> 
						</p>
					</td>
					<td width="298" style="border-top: none; border-bottom: 1px solid #000000; border-left: none; border-right: none; padding-top: 0in; padding-bottom: 0.02in; padding-left: 0in; padding-right: 0in">
						<p><br/>

						</p>
					</td>
				</tr>
				<tr>
					<td width="451" style="border-top: none; border-bottom: 1px solid #000000; border-left: none; border-right: none; padding-top: 0in; padding-bottom: 0.02in; padding-left: 0in; padding-right: 0in">
						<p><code><font size="1" style="font-size: 8pt">quota query</font></code></p>
					</td>
					<td width="382" style="border-top: none; border-bottom: 1px solid #000000; border-left: none; border-right: none; padding-top: 0in; padding-bottom: 0.02in; padding-left: 0in; padding-right: 0in">
						<p><br/>

						</p>
					</td>
					<td width="298" style="border-top: none; border-bottom: 1px solid #000000; border-left: none; border-right: none; padding-top: 0in; padding-bottom: 0.02in; padding-left: 0in; padding-right: 0in">
						<p><br/>

						</p>
					</td>
				</tr>
				<tr>
					<td width="451" style="border-top: none; border-bottom: 1px solid #000000; border-left: none; border-right: none; padding-top: 0in; padding-bottom: 0.02in; padding-left: 0in; padding-right: 0in">
						<p><code><font size="1" style="font-size: 8pt">repinfoof</font></code>
						<em><font size="1" style="font-size: 8pt">file</font></em> 
						</p>
					</td>
					<td width="382" style="border-top: none; border-bottom: 1px solid #000000; border-left: none; border-right: none; padding-top: 0in; padding-bottom: 0.02in; padding-left: 0in; padding-right: 0in">
						<p><code><font size="1" style="font-size: 8pt">\sl</font></code>
						<em><font size="1" style="font-size: 8pt">file</font></em> <code><font size="1" style="font-size: 8pt">rep
						ls $1</font></code> 
						</p>
					</td>
					<td width="298" style="border-top: none; border-bottom: 1px solid #000000; border-left: none; border-right: none; padding-top: 0in; padding-bottom: 0.02in; padding-left: 0in; padding-right: 0in">
						<p><font size="1" style="font-size: 8pt">Output format is
						different.</font></p>
					</td>
				</tr>
				<tr>
					<td width="451" style="border-top: none; border-bottom: 1px solid #000000; border-left: none; border-right: none; padding-top: 0in; padding-bottom: 0.02in; padding-left: 0in; padding-right: 0in">
						<p><code><font size="1" style="font-size: 8pt">set deletable</font></code>
						<em><font size="1" style="font-size: 8pt">pnfsid</font></em> 
						</p>
					</td>
					<td width="382" style="border-top: none; border-bottom: 1px solid #000000; border-left: none; border-right: none; padding-top: 0in; padding-bottom: 0.02in; padding-left: 0in; padding-right: 0in">
						<p><code><font size="1" style="font-size: 8pt">\sn flags set</font></code>
						<em><font size="1" style="font-size: 8pt">pnfsid</font></em>
						<code><font size="1" style="font-size: 8pt">-d=true</font></code><font size="1" style="font-size: 8pt"><br/>
</font><code><font size="1" style="font-size: 8pt">\sl</font></code>
						<em><font size="1" style="font-size: 8pt">pnfsid</font></em>
						<code><font size="1" style="font-size: 8pt">ret set cached $1</font></code>
												</p>
					</td>
					<td width="298" style="border-top: none; border-bottom: 1px solid #000000; border-left: none; border-right: none; padding-top: 0in; padding-bottom: 0.02in; padding-left: 0in; padding-right: 0in">
						<p><font size="1" style="font-size: 8pt">Note that neither form
						touches the sticky bit.</font></p>
					</td>
				</tr>
				<tr>
					<td width="451" style="border-top: none; border-bottom: 1px solid #000000; border-left: none; border-right: none; padding-top: 0in; padding-bottom: 0.02in; padding-left: 0in; padding-right: 0in">
						<p><code><font size="1" style="font-size: 8pt">set sticky</font></code>
						<em><font size="1" style="font-size: 8pt">file</font></em> 
						</p>
					</td>
					<td width="382" style="border-top: none; border-bottom: 1px solid #000000; border-left: none; border-right: none; padding-top: 0in; padding-bottom: 0.02in; padding-left: 0in; padding-right: 0in">
						<p><code><font size="1" style="font-size: 8pt">\sl</font></code>
						<em><font size="1" style="font-size: 8pt">file</font></em> <code><font size="1" style="font-size: 8pt">rep
						set sticky $1 on</font></code> 
						</p>
					</td>
					<td width="298" style="border-top: none; border-bottom: 1px solid #000000; border-left: none; border-right: none; padding-top: 0in; padding-bottom: 0.02in; padding-left: 0in; padding-right: 0in">
						<p><br/>

						</p>
					</td>
				</tr>
				<tr>
					<td width="451" style="border-top: none; border-bottom: 1px solid #000000; border-left: none; border-right: none; padding-top: 0in; padding-bottom: 0.02in; padding-left: 0in; padding-right: 0in">
						<p><code><font size="1" style="font-size: 8pt">set sticky</font></code>
						<em><font size="1" style="font-size: 8pt">pnfsid</font></em>
						<code><font size="1" style="font-size: 8pt">-target=</font></code><em><font size="1" style="font-size: 8pt">pool</font></em>
												</p>
					</td>
					<td width="382" style="border-top: none; border-bottom: 1px solid #000000; border-left: none; border-right: none; padding-top: 0in; padding-bottom: 0.02in; padding-left: 0in; padding-right: 0in">
						<p><code><font size="1" style="font-size: 8pt">\s</font></code>
						<em><font size="1" style="font-size: 8pt">pool</font></em> <code><font size="1" style="font-size: 8pt">rep
						set sticky</font></code> <em><font size="1" style="font-size: 8pt">pnfsid</font></em>
						<font size="1" style="font-size: 8pt">on</font></p>
					</td>
					<td width="298" style="border-top: none; border-bottom: 1px solid #000000; border-left: none; border-right: none; padding-top: 0in; padding-bottom: 0.02in; padding-left: 0in; padding-right: 0in">
						<p><font size="1" style="font-size: 8pt">No equivalent command
						when using path.</font></p>
					</td>
				</tr>
				<tr>
					<td width="451" style="border-top: none; border-bottom: 1px solid #000000; border-left: none; border-right: none; padding-top: 0in; padding-bottom: 0.02in; padding-left: 0in; padding-right: 0in">
						<p><code><font size="1" style="font-size: 8pt">set unsticky</font></code>
						<em><font size="1" style="font-size: 8pt">file</font></em> 
						</p>
					</td>
					<td width="382" style="border-top: none; border-bottom: 1px solid #000000; border-left: none; border-right: none; padding-top: 0in; padding-bottom: 0.02in; padding-left: 0in; padding-right: 0in">
						<p><code><font size="1" style="font-size: 8pt">\sl</font></code>
						<em><font size="1" style="font-size: 8pt">file</font></em> <code><font size="1" style="font-size: 8pt">rep
						set sticky $1 off</font></code> 
						</p>
					</td>
					<td width="298" style="border-top: none; border-bottom: 1px solid #000000; border-left: none; border-right: none; padding-top: 0in; padding-bottom: 0.02in; padding-left: 0in; padding-right: 0in">
						<p><br/>

						</p>
					</td>
				</tr>
				<tr>
					<td width="451" style="border-top: none; border-bottom: 1px solid #000000; border-left: none; border-right: none; padding-top: 0in; padding-bottom: 0.02in; padding-left: 0in; padding-right: 0in">
						<p><code><font size="1" style="font-size: 8pt">set unsticky</font></code>
						<em><font size="1" style="font-size: 8pt">pnfsid</font></em>
						<code><font size="1" style="font-size: 8pt">-target=</font></code><em><font size="1" style="font-size: 8pt">pool</font></em>
												</p>
					</td>
					<td width="382" style="border-top: none; border-bottom: 1px solid #000000; border-left: none; border-right: none; padding-top: 0in; padding-bottom: 0.02in; padding-left: 0in; padding-right: 0in">
						<p><code><font size="1" style="font-size: 8pt">\s</font></code>
						<em><font size="1" style="font-size: 8pt">pool</font></em> <code><font size="1" style="font-size: 8pt">rep
						set sticky</font></code> <em><font size="1" style="font-size: 8pt">pnfsid</font></em>
						<font size="1" style="font-size: 8pt">off</font></p>
					</td>
					<td width="298" style="border-top: none; border-bottom: 1px solid #000000; border-left: none; border-right: none; padding-top: 0in; padding-bottom: 0.02in; padding-left: 0in; padding-right: 0in">
						<p><font size="1" style="font-size: 8pt">No equivalent command
						when using path.</font></p>
					</td>
				</tr>
				<tr>
					<td width="451" style="border-top: none; border-bottom: 1px solid #000000; border-left: none; border-right: none; padding-top: 0in; padding-bottom: 0.02in; padding-left: 0in; padding-right: 0in">
						<p><code><font size="1" style="font-size: 8pt">uncache</font></code>
						<em><font size="1" style="font-size: 8pt">file</font></em> 
						</p>
					</td>
					<td width="382" style="border-top: none; border-bottom: 1px solid #000000; border-left: none; border-right: none; padding-top: 0in; padding-bottom: 0.02in; padding-left: 0in; padding-right: 0in">
						<p><code><font size="1" style="font-size: 8pt">\sl</font></code>
						<em><font size="1" style="font-size: 8pt">file</font></em> <code><font size="1" style="font-size: 8pt">rep
						rm -force $1</font></code> 
						</p>
					</td>
					<td width="298" style="border-top: none; border-bottom: 1px solid #000000; border-left: none; border-right: none; padding-top: 0in; padding-bottom: 0.02in; padding-left: 0in; padding-right: 0in">
						<p><br/>

						</p>
					</td>
				</tr>
				<tr>
					<td width="451" style="border: none; padding: 0in">
						<p><code><font size="1" style="font-size: 8pt">uncache</font></code>
						<em><font size="1" style="font-size: 8pt">pnfsid</font></em>
						<code><font size="1" style="font-size: 8pt">-target=</font></code><em><font size="1" style="font-size: 8pt">pool</font></em>
												</p>
					</td>
					<td width="382" style="border: none; padding: 0in">
						<p><code><font size="1" style="font-size: 8pt">\s</font></code>
						<em><font size="1" style="font-size: 8pt">pool</font></em> <code><font size="1" style="font-size: 8pt">rep
						rm -force</font></code> <em><font size="1" style="font-size: 8pt">pnfsid</font></em>
												</p>
					</td>
					<td width="298" style="border: none; padding: 0in">
						<p><font size="1" style="font-size: 8pt">No equivalent command
						when using path.</font></p>
					</td>
				</tr>
			</tbody>
		</table>
	</center>
	<p align="center" style="margin-bottom: 0in"><br/>

	</p>
	<h4 class="western" style="page-break-before: auto; page-break-after: auto"><a name="adminshellprovidesbetterscriptingsupport"></a>
	Admin shell provides better scripting support</h4>
	<p style="margin-top: 0.1in; margin-bottom: 0.08in"><span style="display: inline-block; border: none; padding: 0in"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">The
	new admin shell detects whether it is connected to a pseudo
	terminal. If it isn't, it typically means the input and output are
	redirected such as when connecting from a script. In this case the
	admin shell disables all styling: No welcome message, no prompt, no
	echo, no color highlighting, no command history. This makes it much
	easier to script the admin shell.</span></font></font></font></p>
	<h4 class="western"><a name="adminshellsupportsctrl-c"></a>Admin
	shell supports Ctrl-C</h4>
	<p>The Ctrl-C key combination may now be used to unblock the shell
	and make it available to read the next command. The default timeout
	has been increased to 5 minutes as pressing Ctrl-C is now preferred.</p>
	<p>Note that pressing Ctrl-C does not actually cancel the execution
	of the command. The key combination merely cause the shell to stop
	waiting for the result.</p>
	<h4 class="western"><a name="adminshellautomaticallycreateshistoryfile"></a>
	Admin shell automatically creates history file</h4>
	<p style="margin-top: 0.1in; margin-bottom: 0.08in"><span style="display: inline-block; border: none; padding: 0in"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">Admin
	shell has had support for persistent command history for a long
	time. This feature was however only enabled if one manually created
	the file used to store the command history. This file is now created
	automatically if it doesn't exist.</span></font></font></font></p>
	<h4 class="western"><a name="newlegacysubsystemprovidescompatibilitywitholdscripts"></a>
	New legacy subsystem provides compatibility with old scripts</h4>
	<p style="margin-top: 0.1in; margin-bottom: 0.08in"><span style="display: inline-block; border: none; padding: 0in"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">To
	support old scripts, the old shell is available as the </font></font></font><font color="#656974"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><code>legacy</font></font></font></code><font color="#656974">
	</font><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">ssh
	subsystem. One can connect to this subsystem by adding the </font></font></font><font color="#656974"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><code>-s
	legacy</font></font></font></code><font color="#656974"> </font><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">option
	to the ssh command line.</span></font></font></font></p>
	<p style="margin-top: 0.1in; margin-bottom: 0.08in"><span style="display: inline-block; border: none; padding: 0in"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">We
	do however recommend that scripts are updated to use the new shell.</span></font></font></font></p>
	<h4 class="western"><a name="adminnolongerhard-codescelladdresses"></a>
	Admin no longer hard-codes cell addresses</h4>
	<p style="margin-top: 0.1in; margin-bottom: 0.08in"><span style="display: inline-block; border: none; padding: 0in"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">Several
	new properties allow communication details to be configured:</span></font></font></font></p>
	<pre><span style="display: inline-block; border: none; padding: 0in"><font color="#000000"><font face="Courier New, monospace"><font size="2" style="font-size: 10pt"><code>admin.service.poolmanager=${dcache.service.poolmanager}</span></font></font></font></code>
<span style="display: inline-block; border: none; padding: 0in"><font color="#000000"><font face="Courier New, monospace"><font size="2" style="font-size: 10pt"><code>admin.service.poolmanager.timeout=30000</span></font></font></font></code>
<span style="display: inline-block; border: none; padding: 0in"><font color="#000000"><font face="Courier New, monospace"><font size="2" style="font-size: 10pt"><code>(one-of?MILLISECONDS|SECONDS|MINUTES|HOURS|DAYS)admin.service.poolmanager.timeout.unit=MILLISECONDS</span></font></font></font></code>

<span style="display: inline-block; border: none; padding: 0in"><font color="#000000"><font face="Courier New, monospace"><font size="2" style="font-size: 10pt"><code>admin.service.spacemanager=${dcache.service.spacemanager}</span></font></font></font></code>
<span style="display: inline-block; border: none; padding: 0in"><font color="#000000"><font face="Courier New, monospace"><font size="2" style="font-size: 10pt"><code>admin.service.spacemanager.timeout=30000</span></font></font></font></code>
<span style="display: inline-block; border: none; padding: 0in"><font color="#000000"><font face="Courier New, monospace"><font size="2" style="font-size: 10pt"><code>(one-of?MILLISECONDS|SECONDS|MINUTES|HOURS|DAYS)admin.service.spacemanager.timeout.unit=MILLISECONDS</span></font></font></font></code>

<span style="display: inline-block; border: none; padding: 0in"><font color="#000000"><font face="Courier New, monospace"><font size="2" style="font-size: 10pt"><code>admin.service.pnfsmanager=${dcache.service.pnfsmanager}</span></font></font></font></code>
<span style="display: inline-block; border: none; padding: 0in"><font color="#000000"><font face="Courier New, monospace"><font size="2" style="font-size: 10pt"><code>admin.service.pnfsmanager.timeout=30000</span></font></font></font></code>
<span style="display: inline-block; border: none; padding: 0in"><font color="#000000"><font face="Courier New, monospace"><font size="2" style="font-size: 10pt"><code>(one-of?MILLISECONDS|SECONDS|MINUTES|HOURS|DAYS)admin.service.pnfsmanager.timeout.unit=MILLISECONDS</span></font></font></font></code>

<span style="display: inline-block; border: none; padding: 0in"><font color="#000000"><font face="Courier New, monospace"><font size="2" style="font-size: 10pt"><code>admin.service.acm=${dcache.service.acm}</span></font></font></font></code>
<span style="display: inline-block; border: none; padding: 0in"><font color="#000000"><font face="Courier New, monospace"><font size="2" style="font-size: 10pt"><code>admin.service.acm.timeout=30000</span></font></font></font></code>
<span style="display: inline-block; border: none; padding: 0in"><font color="#000000"><font face="Courier New, monospace"><font size="2" style="font-size: 10pt"><code>(one-of?MILLISECONDS|SECONDS|MINUTES|HOURS|DAYS)admin.service.acm.timeout.unit=MILLISECONDS</span></font></font></font></code></pre><h4 class="western">
	<a name="manyadminshellcommandsnowaccepthexandoctalvalues"></a>Many
	admin shell commands now accept hex and octal values</h4>
	<p style="margin-top: 0.1in; margin-bottom: 0.08in"><span style="display: inline-block; border: none; padding: 0in"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">Many
	admins shell commands now accept hexadecimal and octal numeric
	arguments. Hexdecimal arguments must be prefixed by </font></font></font><span style="font-variant: normal"><font color="#333333"><span style="text-decoration: none"><font size="2" style="font-size: 10pt"><code>0x</font></span></font></span></code><font color="#656974">
	</font><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">and
	octal arguments by </font></font></font><span style="font-variant: normal"><font color="#333333"><span style="text-decoration: none"><font size="2" style="font-size: 10pt"><code>0</font></span></font></span></code><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">.</span></font></font></font></p>
	<h4 class="western"><a name="improvedpcellscompatibility"></a>Improved
	pcells compatibility</h4>
	<p style="margin-top: 0.1in; margin-bottom: 0.08in"><span style="display: inline-block; border: none; padding: 0in"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">Several
	changes have been made to simplify maintaining compatibility with
	the pcells GUI. As part of these changes, the admin service now
	redirects pcells requests to the appropriate dCache cell, allowing
	pcells to be used even if </font></font></font><span style="font-variant: normal"><font color="#333333"><span style="text-decoration: none"><font size="2" style="font-size: 10pt"><code>pnfsmanager</font></span></font></span></code><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">,
	</font></font></font><span style="font-variant: normal"><font color="#333333"><span style="text-decoration: none"><font size="2" style="font-size: 10pt"><code>poolmanager</font></span></font></span></code><font color="#656974">
	</font><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">or
	</font></font></font><span style="font-variant: normal"><font color="#333333"><span style="text-decoration: none"><font size="2" style="font-size: 10pt"><code>spacemanager</font></span></font></span></code><font color="#656974">
	</font><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">use
	non-default names.</span></font></font></font></p>
	<h4 class="western"><a name="improvedcellmessagecommunication"></a>Improved
	cell message communication</h4>
	<p style="margin-top: 0.1in; margin-bottom: 0.08in"><span style="display: inline-block; border: none; padding: 0in"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">The
	internal cell communication has been heavily restructured. Most of
	these changes are internal and - except for maybe minor latency
	improvements - are invisible to the user. There are however also
	several bug fixes to corner cases, as well as improvements in
	logging and routing failure handling. One may observe more routing
	errors being logged; such errors happened in previous versions too,
	but were not always logged.</span></font></font></font></p>
	<p style="margin-top: 0.1in; margin-bottom: 0.08in"><span style="display: inline-block; border: none; padding: 0in"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">Several
	changes to the message routing logic were made. These changes mostly
	affect non-default topologies, enabling use cases not possible in
	previous versions. When matured, these use cases will be documented
	separately.</span></font></font></font></p>
	<p style="margin-top: 0.1in; margin-bottom: 0.08in"><span style="display: inline-block; border: none; padding: 0in"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">Route
	maintenance logic has been updated. The most immediately observable
	changes are the new output format of </font></font></font><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">the
	</font></font></font><span style="font-variant: normal"><font color="#333333"><span style="text-decoration: none"><font size="2" style="font-size: 10pt"><code>route</font></span></font></span></code><font color="#656974">
	</font><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">command
	in the </font></font></font><font color="#656974"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><code>System</font></font></font></code><font color="#656974">
	</font><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">cell,
	the fact that route deletion requires the full route to be
	specified, and that duplicate routes are allowed (messages are
	routed through the first route that matches).</span></font></font></font></p>
	<h4 class="western"><a name="adminpingcommandprovidesrtt"></a>Admin
	ping command provides RTT</h4>
	<p style="margin-top: 0.1in; margin-bottom: 0.08in"><span style="display: inline-block; border: none; padding: 0in"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">The
	</font></font></font><font color="#656974"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><code>ping</font></font></font></code><font color="#656974">
	</font><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">command
	in the </font></font></font><font color="#656974"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><code>System</font></font></font></code><font color="#656974">
	</font><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">cell
	is now blocking and m</font></font></font><span style="text-decoration: none"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">easures
	the round trip time.</span></font></font></span></font></p>
	<h4 class="western">Webadmin HTML contains dCache version</h4>
	<p><span style="display: inline-block; border: none; padding: 0in"><font color="#656974"><span style="text-decoration: none"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><code>The
	webadmin now includes a meta tag reporting the dCache version.</span></font></font></span></font></code></p>
	<h4 class="western"><a name="webadminfeaturesimprovednavigationbar"></a>
	Webadmin features improved navigation bar</h4>
	<p><span style="display: inline-block; border: none; padding: 0in"><span style="font-variant: normal"><font color="#656974"><span style="text-decoration: none"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><code>The
	navigation bar now disables the links to disabled pages.</span></font></font></span></font></span></code></p>
	<h4 class="western"><a name="webadminnolongerexportstheinfoservice"></a>
	Webadmin no longer exports the info service</h4>
	<p><span style="display: inline-block; border: none; padding: 0in"><span style="font-variant: normal"><font color="#656974"><span style="text-decoration: none"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><code>The
	info service can no longer be access through webadmin. The info
	service is still exposed through the </font></font></span></font></span></code><span style="font-variant: normal"><font color="#333333"><span style="text-decoration: none"><font size="2" style="font-size: 10pt"><code>/info</font></span></font></span></code><span style="font-variant: normal"><font color="#656974"><span style="text-decoration: none"><code>
	</span></font></span></code><span style="font-variant: normal"><font color="#656974"><span style="text-decoration: none"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><code>path
	of the httpd service and this is the preferred interface for scripts
	and other services to query the info service.</span></font></font></span></font></span></code></p>
	<h4 class="western"><a name="updatedhttpdserviceconfiguration"></a>Updated
	httpd service configuration</h4>
	<p><span style="text-decoration: none">T</span><span style="display: inline-block; border: none; padding: 0in"><span style="font-variant: normal"><font color="#656974"><span style="text-decoration: none"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><code>he
	httpd service has been heavily refactored. The </span></font></font></span></font></span></code><code><span style="text-decoration: none">set
	update</span></code><span style="text-decoration: none"> </span><span style="display: inline-block; border: none; padding: 0in"><span style="font-variant: normal"><font color="#656974"><span style="text-decoration: none"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><code>command
	that was lost in previous releases is once again exposed in the
	admin shell. The arguments to the </span></font></font></span></font></span></code><span style="text-decoration: none">‘</span><span style="display: inline-block; border: none; padding: 0in"><span style="font-variant: normal"><font color="#333333"><span style="text-decoration: none"><font size="2" style="font-size: 10pt"><code>set
	webapp</span></font></span></font></span></code><span style="text-decoration: none">’
	</span><span style="display: inline-block; border: none; padding: 0in"><span style="font-variant: normal"><font color="#656974"><span style="text-decoration: none"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><code>command
	have changed, which means that sites having a custom </span></font></font></span></font></span></code><span style="text-decoration: none">httpd.conf
	</span><span style="display: inline-block; border: none; padding: 0in"><span style="font-variant: normal"><font color="#656974"><span style="text-decoration: none"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><code>file
	likely have to adjust the configuration on update.</span></font></font></span></font></span></code></p>
	<p><span style="display: inline-block; border: none; padding: 0in"><span style="font-variant: normal"><font color="#656974"><span style="text-decoration: none"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><code>The</span></font></font></span></font></span></code><span style="text-decoration: none">
	</span><code><span style="text-decoration: none">httpd.container.webapps.tmp-dir</span></code><span style="display: inline-block; border: none; padding: 0in"><span style="font-variant: normal"><font color="#656974"><span style="text-decoration: none"><code>
	</span></font></span></code><span style="font-variant: normal"><font color="#656974"><span style="text-decoration: none"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><code>property
	is obsolete as WAR files are no longer unpacked.</span></font></font></span></font></span></code></p>
	<h3 class="western">SpaceManager changes</h3>
	<h4 class="western"><a name="robustflushnotificationforspacemanager"></a>
	Robust flush notification for spacemanager</h4>
	<p style="margin-top: 0.1in; margin-bottom: 0.08in"><span style="display: inline-block; border: none; padding: 0in"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">Similar
	to the delete notification, the unreliable flush notification
	previously sent by pools was replaced by a reliable notification
	from </font></font></font><font color="#656974"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><code>pnfsmanager</font></font></font></code><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">.
	The new </font></font></font><font color="#656974"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><code>pnfsmanager.enable.space-reservation</font></font></font></code><font color="#656974">
	</font><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">controls
	whether these notifications are sent. One consequence is that if
	</font></font></font><font color="#656974"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><code>spacemanager</font></font></font></code><font color="#656974">
	</font><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">is
	down, flush to tape will halt.</span></font></font></font></p>
	<h4 class="western"><a name="dcacheexpectsspacemanagerbydefault"></a>
	dCache expects spacemanager by default</h4>
	<p style="margin-top: 0.1in; margin-bottom: 0.08in"><span style="display: inline-block; border: none; padding: 0in"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">The
	defaults have changed such that it is assumed that space
	reservations are supported unless explicitly disabled. In other
	words, the property </font></font></font><font color="#656974"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><code>dcache.enable.space-reservation</font></font></font></code><font color="#656974">
	</font><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">now
	defaults to true.</span></font></font></font></p>
	<p style="margin-top: 0.1in; margin-bottom: 0.08in"><span style="display: inline-block; border: none; padding: 0in"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">This
	change has been made because it is a safer default. In a system
	without space management, forgetting to set the above property to
	false simply results in a non-functioning system. In a system with
	space management, forgetting to set this property to true results in
	lost notifications, causing silent database inconsistencies. Thus
	</font></font></font><font color="#656974"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><code>true</font></font></font></code><font color="#656974">
	</font><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">is
	the safer default.</span></font></font></font></p>
	<p style="margin-top: 0.1in; margin-bottom: 0.08in"><span style="display: inline-block; border: none; padding: 0in"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">Sites
	without space manager will have to set
	</font></font></font><font color="#656974"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><code>dcache.enable.space-reservation</font></font></font></code><font color="#656974">
	</font><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">to
	false on all doors and other head nodes.</span></font></font></font></p>
	<p style="margin-top: 0.1in; margin-bottom: 0.08in"><span style="display: inline-block; border: none; padding: 0in"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">As
	before, one has to have a </font></font></font><font color="#656974"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><code>spacemanager</font></font></font></code><font color="#656974">
	</font><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">instance
	in the layout file to support space reservations. The change in
	defaults is merely whether the rest of dCache expects space manager
	to be running or not.</span></font></font></font></p>
	<h4 class="western">Space manager has been renamed</h4>
	<p style="margin-top: 0.1in; margin-bottom: 0.08in"><span style="display: inline-block; border: none; padding: 0in"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">The
	default space manager name has been changed to </font></font></font><font color="#656974"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><code>SpaceManager</font></font></font></code><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">.
	In previous versions, the default was </font></font></font><font color="#656974"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><code>SrmSpaceManager</font></font></font></code><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">,
	but since the space manager service is independent of the SRM
	service, this name was misleading. For compatibility, a temporary
	alias was added to allow the admin service to use both names.</span></font></font></font></p>
	<h4 class="western"><a name="spacemanagersupportslessintrusivelinkgroupupdatecommand"></a>
	Space manager supports less intrusive link group update command</h4>
	<p style="margin-top: 0.1in; margin-bottom: 0.08in"><span style="display: inline-block; border: none; padding: 0in"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">The
	space manager </font></font></font><font color="#656974"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><code>update
	link groups</font></font></font></code><font color="#656974">
	</font><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">command
	no longer blocks the space manager while the link groups are
	updated. The command returns once the updated information is being
	used.</span></font></font></font></p>
	<h4 class="western"><a name="improvedshutdownlogicinspacemanager"></a>
	Improved shutdown logic in space manager</h4>
	<p style="margin-top: 0.1in; margin-bottom: 0.08in"><span style="display: inline-block; border: none; padding: 0in"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">If
	space manager discards requests during shutdown, the requesting
	service is now notified about the discarded messages. This allows
	for faster recovery after a space manager service restart.</span></font></font></font></p>
	<h4 class="western"><a name="spacemanagerprovidesbetterselectfailures"></a>
	Space manager provides better select failures</h4>
	<p style="margin-top: 0.1in; margin-bottom: 0.08in"><span style="display: inline-block; border: none; padding: 0in"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">Space
	manager now provides better error messages when unable to find a
	suitable link group of write pool. It also provides better error
	code to distinguish permission and configuration errors from other
	errors. Doors like DCAP, NFS and FTP make use of these error codes
	to decide whether to retry requests or which error codes to send to
	clients.</span></font></font></font></p>
	<h4 class="western"><a name="spacemanagerchangesauthorizationpolicyforunownedreservations"></a>
	Space manager changes authorization policy for unowned reservations</h4>
	<p style="text-decoration: none"><span style="display: inline-block; border: none; padding: 0in"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">In
	previous releases, unowned reservations could be released by
	anybody. Since this is unlikely to be desirable, this release
	changes the semantics such that reservations without an owner can
	only be released by the admin.</span></font></font></font></p>
	<h4 class="western">Link group authorization by GID</h4>
	<p style="margin-top: 0.1in; margin-bottom: 0.08in; text-decoration: none">
	<span style="display: inline-block; border: none; padding: 0in"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">The
	link group authorization file now supports authorization by GID.
	This allows space manager to be use with anonymous protocols like
	plain DCAP, plain xrootd and plain NFS.</span></font></font></font></p>
	<h3 class="western">Transfermanager changes</h3>
	<h4 class="western"><a name="transfermanagersserviceremovesruntimedatabaseconfiguration"></a>
	Transfer Manager service removes runtime database configuration</h4>
	<p><span style="display: inline-block; border: none; padding: 0in"><span style="text-decoration: none"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">The
	admin commands </span></font></font></span></font><code><span style="text-decoration: none">set
	dbUrl</span></code><span style="text-decoration: none">, </span><code><span style="text-decoration: none">set
	dbUser</span></code><span style="text-decoration: none"> </span><span style="display: inline-block; border: none; padding: 0in"><span style="text-decoration: none"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">and</span></font></font></span></font><span style="text-decoration: none">
	</span><code><span style="text-decoration: none">set dbpass</span></code><span style="display: inline-block; border: none; padding: 0in"><span style="text-decoration: none"><font color="#656974">
	</span></font><span style="text-decoration: none"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">have
	been dropped.</span></font></font></span></font></p>
	<h4 class="western">Transfer Manager changes</h4>
	<p style="text-decoration: none"><span style="display: inline-block; border: none; padding: 0in"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">Transfer
	Manager now generates IDs based on the current time rather than by
	taking the next SRM request ID. This means the transfermanagers
	service no longer needs access to the SRM database.</span></font></font></font></p>
	<h3 class="western">InfoProvider changes</h3>
	<h4 class="western"><a name="infoprovidersupportsconfigurableservicenames"></a>
	Info provider supports configurable service names</h4>
	<p style="margin-top: 0.1in; margin-bottom: 0.08in"><span style="display: inline-block; border: none; padding: 0in"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">The
	names of the </font></font></font><font color="#656974"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><code>pinmanager</font></font></font></code><font color="#656974">
	</font><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">and
	</font></font></font><font color="#656974"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><code>poolmanager</font></font></font></code><font color="#656974">
	</font><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">services
	used by the info provider are now configurable.</span></font></font></font></p>
	<h4 class="western"><a name="infoprovidergeneratestimestampattributes"></a>
	Info provider generates timestamp attributes</h4>
	<p style="margin-top: 0.1in; margin-bottom: 0.08in"><span style="display: inline-block; border: none; padding: 0in"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">Info
	provider now adds a </font></font></font><font color="#656974"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><code>GLUE2EntityCreationTime</font></font></font></code><font color="#656974">
	</font><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">attribute
	to all the GLUE 2 entities it creates.</span></font></font></font></p>
	<h4 class="western"><a name="networkinterfacescopepublished"></a>Network
	interface scope published</h4>
	<p><span style="display: inline-block; border: none; padding: 0in"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">The
	info service enumerates the network interfaces of all doors.
	Previously these interfaces were ordered to list an external
	interface first. With this release, the scope of the interface (e.g.
	global, site local, link local, etc). is included instead.</span></font></font></font></p>
	<p><span style="display: inline-block; border: none; padding: 0in"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">The
	info-provider is updated to make use of the scope to only publish
	global network interface and to export all of them.</span></font></font></font></p>
	<h3 class="western">PinManager changes</h3>
	<h4 class="western"><a name="pinmanagerprovidesbettererrormessages"></a>
	Pinmanager provides better error messages</h4>
	<p style="margin-top: 0.1in; margin-bottom: 0.08in"><span style="display: inline-block; border: none; padding: 0in"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">Pin
	manager now distinguishes between several different causes for
	failing to pin a file.</span></font></font></font></p>
	<h3 class="western">PoolManager &amp; Pool changes</h3>
	<h4 class="western"><a name="poolmigrationmodulemaintainslastaccesstime"></a>
	Pool migration module maintains last access time</h4>
	<p style="margin-top: 0.1in; margin-bottom: 0.08in"><span style="display: inline-block; border: none; padding: 0in"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">The
	new </font></font></font><font color="#656974"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><code>-atime</font></font></font></code><font color="#656974">
	</font><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">option
	to the migration commands allow migrated files to keep the original
	access time. This allows the garbage collection order to be
	maintained.</span></font></font></font></p>
	<h4 class="western"><a name="poolgarbagecollectorimplementsstrictlru"></a>
	Pool garbage collector implements strict LRU</h4>
	<p style="margin-top: 0.1in; margin-bottom: 0.08in"><span style="display: inline-block; border: none; padding: 0in"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">Previous
	versions of the sweeper implemented an approximation of
	least-recently-used (LRU). Starting with version 2.13 it implements
	real LRU.</span></font></font></font></p>
	<h4 class="western"><a name="newpoolsafe-guardsincaseofrepositoryerrors"></a>
	New pool safe-guards in case of repository errors</h4>
	<p style="margin-top: 0.1in; margin-bottom: 0.08in"><span style="display: inline-block; border: none; padding: 0in"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">Additional
	safe guards to automatically disable a pool in case of fatal errors
	have been added. A pool will now also stop flushing files to tape if
	it has been marked dead.</span></font></font></font></p>
	<h4 class="western"><a name="betterhttperrorhandlinginpools"></a>Better
	HTTP error handling in pools</h4>
	<p style="margin-top: 0.1in; margin-bottom: 0.08in"><span style="display: inline-block; border: none; padding: 0in"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">Previous
	versions would disconnect the client on every error. Starting with
	version 2.13, the pool will try to keep the connection alive.</span></font></font></font></p>
	<h4 class="western">Pool Berkeley DB meta data format change</h4>
	<p style="margin-top: 0.1in; margin-bottom: 0.08in"><span style="display: inline-block; border: none; padding: 0in"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">The
	Berkeley DB library used by pools for meta data has been upgraded.
	The update is forward compatible in that the new version can read
	the old meta data. However once upgraded, the pool cannot be
	downgraded to previous versions. If a downgrade is required, the
	meta data needs to first be converted to the file backend before the
	downgrade, and then back to the db backend after the downgrade.</span></font></font></font></p>
	<h4 class="western"><a name="asynchronouspoolselection"></a>Asynchronous
	pool selection</h4>
	<p style="margin-top: 0.1in; margin-bottom: 0.08in"><span style="display: inline-block; border: none; padding: 0in"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">Pool
	selection requests in doors may now be asynchronous, meaning the
	door does not need to maintain a thread for the duration of pool
	selection. This is currently only utilized by the FTP door.</span></font></font></font></p>
	<h4 class="western" style="text-decoration: none">Pool improvements</h4>
	<p style="text-decoration: none"><span style="display: inline-block; border: none; padding: 0in"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">Some
	pool error messages have been expanded slightly to give some
	contextual information and to distinguish between otherwise
	identical errors.</span></font></font></font></p>
	<p style="text-decoration: none"><span style="display: inline-block; border: none; padding: 0in"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">The
	migration module is idempotent, which means running the same command
	twice has the same affect as running it once, assuming no pool has
	gone offline between running the command. While being idempotent is
	a useful feature, sometimes one might want multiple copies of a
	file, which simply running the migration module command multiple
	times does not achieve.</span></font></font></font></p>
	<p><span style="display: inline-block; border: none; padding: 0in"><span style="text-decoration: none"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">From
	dCache v2.11, the migration module commands now support the
	</span></font></font></span></font><code><span style="text-decoration: none">-replicas</span></code><span style="display: inline-block; border: none; padding: 0in"><span style="text-decoration: none"><font color="#656974">
	</span></font><span style="text-decoration: none"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">option.
	This allows the admin to specify the desired number of replicas. The
	pool will then create that number of replicas sequentially.</span></font></font></span></font></p>
	<p style="text-decoration: none"><span style="display: inline-block; border: none; padding: 0in"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">Previously,
	the HSM interface processed all HSM requests sequentially: one at a
	time, using a single core. This is particularly bad for staging
	requests as preparing the pool for the staged file may require IO.
	From dCache 2.11, the HSM now processes requests concurrently, which
	allows CPU and IO activity to overlap and spreads this load over
	multiple cores.</span></font></font></font></p>
	<p><span style="display: inline-block; border: none; padding: 0in"><span style="text-decoration: none"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">The
	output from admin commands </span></font></font></span></font><code><span style="text-decoration: none">rh
	ls</span></code><span style="text-decoration: none">, </span><code><span style="text-decoration: none">st
	ls</span></code><span style="text-decoration: none"> </span><span style="display: inline-block; border: none; padding: 0in"><span style="text-decoration: none"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">and</span></font></font></span></font><span style="text-decoration: none">
	</span><code><span style="text-decoration: none">rm ls</span></code><span style="text-decoration: none">
	</span><span style="display: inline-block; border: none; padding: 0in"><span style="text-decoration: none"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">are
	now sorted by creation time.</span></font></font></span></font></p>
	<p style="margin-top: 0.1in; margin-bottom: 0.08in; text-decoration: none">
	<span style="display: inline-block; border: none; padding: 0in"><font color="#656974"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt">Previously,
	just before a pool starts accepting a new file, it will request the
	expected checksum from pnfsmanager. In the majority of cases there
	is no checksum, so this slows down dCache. From dCache</font></font></font><font color="#656974">
	</font><font color="#656974"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt">2.11,
	this step is skipped; uploads are now (slightly) faster. A client
	may still supply the file’s checksum prior to upload (using FTP)
	and dCache will verify the checksum once the upload has completed.</font></font></font></span></p>
	<h4 class="western">Pool HSM commands provide helpful error messages</h4>
	<p style="margin-top: 0.1in; margin-bottom: 0.08in"><span style="display: inline-block; border: none; padding: 0in"><span style="text-decoration: none"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">Thanks
	to Onno Zweers from SARA for contributing a patch that allows the
	</font></font></span></font><font color="#656974"><span style="text-decoration: none"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><code>hsm
	set</font></font></span></font></code><span style="text-decoration: none"><font color="#656974">
	</span></font><span style="text-decoration: none"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">and
	</font></font></span></font><font color="#656974"><span style="text-decoration: none"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><code>hsm
	unset</font></font></span></font></code><span style="text-decoration: none"><font color="#656974">
	</span></font><span style="text-decoration: none"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">commands
	to provide more helpful error messages.</span></font></font></span></font></p>
	<h4 class="western"><a name="automaticgapcalculationforsmallpools"></a>
	Automatic gap calculation for small pools</h4>
	<p style="text-decoration: none"><span style="display: inline-block; border: none; padding: 0in"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">Pools
	have a gap setting that reduces the risk of running out of space
	during uploads. Once less space than the gap is free, pools will no
	longer accept new files. In previous releases, small pools less than
	the size of the default gap would be inaccessible, often leading to
	confusion during testing. With this release, small pools
	automatically reduce the gap.</span></font></font></font></p>
	<h4 class="western"><a name="improvednearlinestoragespi"></a>Improved
	nearline storage SPI</h4>
	<p style="text-decoration: none"><span style="display: inline-block; border: none; padding: 0in"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">The
	nearline storage service provider interface has been enhanced to
	allow nearline storage drivers to query the logical path of a file
	being flushed. The interface has also been extended such that it is
	easier to report error codes on failures.</span></font></font></font></p>
	<p style="text-decoration: none"><span style="display: inline-block; border: none; padding: 0in"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">The
	packaging of the SPI has been changed to make it easier to develop
	third party drivers without having to depend on the entire dCache
	code base.</span></font></font></font></p>
	<h4 class="western"><a name="improvednetworkinterfaceselectioninpools"></a>
	Improved network interface selection in pools</h4>
	<p style="text-decoration: none"><span style="display: inline-block; border: none; padding: 0in"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">The
	logic used to select a network interface for a transfer has been
	improved. This in particular affects partially multi-stacked
	installations.</span></font></font></font></p>
	<h4 class="western"><a name="consistentcsminfooutput"></a>Consistent
	csm info output</h4>
	<p><span style="display: inline-block; border: none; padding: 0in"><span style="text-decoration: none"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">With
	this release, the output format of the</span></font></font></span></font>
	<code>csm info</code> <span style="display: inline-block; border: none; padding: 0in"><span style="text-decoration: none"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">command
	in pools is consistent with the option values of the </font></font></span></font><font color="#656974"><span style="text-decoration: none"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><code>csm
	set</font></font></span></font></code><span style="text-decoration: none"><font color="#656974">
	</span></font><span style="text-decoration: none"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">command.</span></font></font></span></font></p>
	<h4 class="western"><a name="updateddefaultchecksumpolicyfornewpools"></a>
	Updated default checksum policy for new pools</h4>
	<p style="text-decoration: none"><span style="display: inline-block; border: none; padding: 0in"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">Newly
	created pools now default to on-transfer checksumming rather than
	on-write. For large files, the on-write checksum policy often leads
	to timeouts and throughput issues.</span></font></font></font></p>
	<p style="text-decoration: none"><span style="display: inline-block; border: none; padding: 0in"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">The
	on-restore policy is now enabled by default.</span></font></font></font></p>
	<h4 class="western"><a name="explicitportrangeforxrootdandhttpmovers"></a>
	Explicit port range for xrootd and http movers</h4>
	<p><span style="display: inline-block; border: none; padding: 0in"><span style="text-decoration: none"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">The
	new configuration properties </span></font></font></span></font><code>pool.mover.http.port.{min,max}</code>
	and <code>pool.mover.xrootd.port.{min,max}</code> <span style="display: inline-block; border: none; padding: 0in"><span style="text-decoration: none"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">allow
	the port range for HTTP and xrootd to be controlled.</span></font></font></span></font></p>
	<h4 class="western"><a name="precomputedrepositorystatistics"></a>Precomputed
	repository statistics</h4>
	<p><span style="display: inline-block; border: none; padding: 0in"><span style="text-decoration: none"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">The
	pool </span></font></font></span></font><code>rep ls -s</code>
	<span style="display: inline-block; border: none; padding: 0in"><span style="text-decoration: none"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">command
	used to recalculated per storage group statistics on every
	invocation. For large pools this was quite slow, leading to timeouts
	in the admin shell and in the statistics service. With this release
	the result is precomputed.</span></font></font></span></font></p>
	<h4 class="western">Much improved support for control channel free
	protocols</h4>
	<p style="text-decoration: none"><span style="display: inline-block; border: none; padding: 0in"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">dCache
	was born with protocols having seperate control channel and data
	channels. This has proven to be challenge for protocols like HTTP
	and xrootd that do not maintain a control channel to the door for
	the duration of the transfer. In previous releases, there was no way
	for clients using these protocols to know whether post-processing
	failed or when it completed. Thus a client would be unaware of e.g.
	checksum failures or failures to register a file in Chimera, and a
	client that queried the door directly after it completed uploading
	would typically be met with an error.</span></font></font></font></p>
	<p style="text-decoration: none"><span style="display: inline-block; border: none; padding: 0in"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">Starting
	with this release, xrootd and http uploads will block until
	post-processing has completed. Any errors are propagated back to the
	client by the pool, and once the client is disconnected, it is
	guaranteed that the file is fully registered in Chimera.</span></font></font></font></p>
	<h4 class="western"><a name="reducedmemoryconsumptioninpoolswithberkeleydbbackend"></a>
	Reduced memory consumption in pools with Berkeley DB backend</h4>
	<p style="text-decoration: none"><span style="display: inline-block; border: none; padding: 0in"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">The
	memory consumption of pools using the Berkeley DB backend has been
	drastically reduced. The on-disk representation is unchanged.</span></font></font></font></p>
	<h4 class="western"><a name="poolmanagerdropsobsoleteconfigurationcommand"></a>
	Pool manager drops obsolete configuration command</h4>
	<p><span style="display: inline-block; border: none; padding: 0in"><span style="text-decoration: none"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">The
	obsolete </font></font></span></font><font color="#656974"><span style="text-decoration: none"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><code>psu
	set linkGroup attribute</font></font></span></font></code><span style="text-decoration: none"><font color="#656974">
	</span></font><span style="text-decoration: none"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">command
	has been removed. The command had no effect. Sites are encouraged to
	check the pressence of this command in their poolmanager.conf file
	before updating. If pressent, the command can be removed by running
	</font></font></span></font><font color="#656974"><span style="text-decoration: none"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><code>save</font></font></span></font></code><span style="text-decoration: none"><font color="#656974">
	</span></font><span style="text-decoration: none"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">in
	the poolmanager service.</span></font></font></span></font></p>
	<h3 class="western"><a name="Chimera / NameSpace changes|outline"></a>
	Chimera / NameSpace changes</h3>
	<h4 class="western" style="text-decoration: none">pnfsmanager
	improvements</h4>
	<p style="margin-top: 0.1in; margin-bottom: 0.08in; text-decoration: none">
	<span style="display: inline-block; border: none; padding: 0in"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">As
	part of the general shutdown improvements, during shutdown the
	pnfsmanager service will reject all queued requests and return a “No
	Route To Cell” error. Requests that pnfsmanager has started
	processing are given 500 ms to complete before being forcefully
	terminated. This improvement was introduced in dCache 2.11.</span></font></font></font></p>
	<h4 class="western"><a name="chimeracleansoldleakedtaginodesuponupgrade"></a>
	Chimera cleans old leaked tag inodes upon upgrade</h4>
	<p style="margin-top: 0.1in; margin-bottom: 0.08in"><span style="display: inline-block; border: none; padding: 0in"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">A
	bug in Chimera caused tag inodes to be leaked upong directory
	deletion. The bug was fixed in 2.10, however to reduce the impact of
	the fix, already leaked inodes were not deleted. When upgrading to
	2.13, such inodes are automatically removed. Depending on the number
	of tag inodes, this procedure may take a while (from minutes to
	hours).</span></font></font></font></p>
	<p style="margin-top: 0.1in; margin-bottom: 0.08in"><span style="display: inline-block; border: none; padding: 0in"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">As
	always, if an </font></font></font><font color="#656974"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><code>nfs</font></font></font></code><font color="#656974">
	</font><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">service
	has been placed ahead of the </font></font></font><font color="#656974"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><code>pnfsmanager</font></font></font></code><font color="#656974">
	</font><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">service
	in a domain, the database schema update has to be triggered manually
	by running </font></font></font><font color="#656974"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><code>dcache
	database update</font></font></font></code><font color="#656974">
	</font><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">before
	starting dCache.</span></font></font></font></p>
	<h4 class="western">Chimera relaxes permission checks on stat</h4>
	<p style="margin-top: 0.1in; margin-bottom: 0.08in"><span style="display: inline-block; border: none; padding: 0in"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">In
	compliance with POSIX, Chimera no longer requires execute
	permissions for the containing directory to stat a file.</span></font></font></font></p>
	<h4 class="western">Name space services provides timing gauges for
	Chimera calls</h4>
	<p style="margin-top: 0.1in; margin-bottom: 0.08in"><span style="display: inline-block; border: none; padding: 0in"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">The
	</font></font></font><font color="#656974"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><code>info</font></font></font></code><font color="#656974">
	</font><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">command
	of the </font></font></font><font color="#656974"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><code>pnfsmanager</font></font></font></code><font color="#656974">
	</font><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">service
	has been extended to provide timing information for Chimera calls.</span></font></font></font></p>
	<h4 class="western"><a name="chimerafileattributeaccessoptimized"></a>
	Chimera file attribute access optimized</h4>
	<p><span style="display: inline-block; border: none; padding: 0in"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">This
	release optimizes how file attributes are updated in Chimera. This
	change reduces database load and latency on such updates.</span></font></font></font></p>
	<p><span style="display: inline-block; border: none; padding: 0in"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">Permission
	checks have been altered to always allow the owner of a file to
	update its attributes.</span></font></font></font></p>
	<p><span style="display: inline-block; border: none; padding: 0in"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">In
	previous releases, the last access time in Chimera was updated by
	pools when a pool is accessed. With this release, the atime is
	maintained by doors. Besides being a more correct implementation of
	atime, the new implementation is faster.</span></font></font></font></p>
	<h3 class="western" style="text-decoration: none">Alarms changes</h3>
	<h4 class="western"><a name="embeddablealarmsservice"></a>Embeddable
	alarms service</h4>
	<p style="text-decoration: none"><span style="display: inline-block; border: none; padding: 0in"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">Threading
	issues preventing the alarm service from running in the same domain
	as other services have been corrected so that it is now safe to do
	so. Two new properties have been added:</span></font></font></font></p>
	<dl>
		<dl>
			<dl>
				<dt><code><font color="#333333"><span style="text-decoration: none"><font size="2" style="font-size: 10pt">alarms.limits.workers
				</font></span></font></code>
				</dt><dl>
					<dd style="text-decoration: none">
					<span style="display: inline-block; border: none; padding: 0in"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">Number
					of worker threads for processing incoming logging events. </span></font></font></font>
					</dd></dl>
				<dt>
				<code><font color="#333333"><span style="text-decoration: none"><font size="2" style="font-size: 10pt">alarms.db.alarms-only
				</font></span></font></code>
				</dt><dl>
					<dd style="margin-bottom: 0.2in; text-decoration: none">
					<span style="display: inline-block; border: none; padding: 0in"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">Only
					store alarms to the persistent store </span></font></font></font>
					</dd></dl>
			</dl>
		</dl>
	</dl>
	<h4 class="western">
	Alarms service improvements</h4>
	<p style="text-decoration: none"><span style="display: inline-block; border: none; padding: 0in"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">During
	the transition from 2.10 to 2.13, the alarms service has received
	substantial improvements. Most relevant improvements were performed
	on dCache 2.11.</span></font></font></font></p>
	<p><span style="display: inline-block; border: none; padding: 0in"><span style="text-decoration: none"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">A
	domain may now host both the alarm service and other services. As a
	consequence, the alarm-specific </span></font></font></span></font><code><span style="text-decoration: none">logback-server.xml</span></code><span style="display: inline-block; border: none; padding: 0in"><span style="text-decoration: none"><font color="#656974">
	</span></font><span style="text-decoration: none"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">file
	(located in the </span></font></font></span></font><code><span style="text-decoration: none">/var/lib/dcache/alarms/</span></code><span style="display: inline-block; border: none; padding: 0in"><span style="text-decoration: none"><font color="#656974">
	</span></font><span style="text-decoration: none"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">directory
	for RPM packages) has been removed. As log messages generated by the
	alarm service are handled in the same fashion as other services, the
	</span></font></font></span></font><code><span style="text-decoration: none">service.log</span></code><span style="display: inline-block; border: none; padding: 0in"><span style="text-decoration: none"><font color="#656974">
	</span></font><span style="text-decoration: none"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">file
	has also been removed.</span></font></font></span></font></p>
	<p style="text-decoration: none"><span style="display: inline-block; border: none; padding: 0in"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">Alarm
	definitions are now either predefined or custom. Predefined alarms
	are automatically generated within dCache without requiring a match
	against some regular expression; these are the alerts defined by the
	dCache developers. Custom alarms are those that are must match some
	regular expressions; these are defined by the admin and are
	comparable to the alarms defined in earlier dCache releases.</span></font></font></font></p>
	<p><span style="display: inline-block; border: none; padding: 0in"><span style="text-decoration: none"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">All
	predefined alarms are sent at the ERROR level, so it is not
	necessary to set </span></font></font></span></font><code><span style="text-decoration: none">dcache.log.level.remote</span></code><span style="display: inline-block; border: none; padding: 0in"><span style="text-decoration: none"><font color="#656974">
	</span></font><span style="text-decoration: none"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">to
	below this level for the alarm service to receive all predefined
	alarms. It may still be necessary to adjust this property if custom
	alarms match against messages logged at a lower threshold. While
	this is supported, the same performance caveats exist as with
	earlier releases.</span></font></font></span></font></p>
	<p><span style="display: inline-block; border: none; padding: 0in"><span style="text-decoration: none"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">It
	is no longer necessary to mirror the </span></font></font></span></font><code><span style="text-decoration: none">alarms-custom-definitions.xml</span></code><span style="display: inline-block; border: none; padding: 0in"><span style="text-decoration: none"><font color="#656974">
	</span></font><span style="text-decoration: none"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">file
	between the alarms and httpd services. However, when using XML
	storage, the requirement to provide some shared storage between the
	nodes hosting alarm and httpd services continues.</span></font></font></span></font></p>
	<p style="text-decoration: none"><span style="display: inline-block; border: none; padding: 0in"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">The
	structure of the custom alarm definition or filter has been
	simplified. It now consists only of the following elements:</span></font></font></font></p>
	<ol>
		<li/>
<p style="margin-bottom: 0in; text-decoration: none"><span style="display: inline-block; border: none; padding: 0in"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">type
		name </span></font></font></font>
		</p>
		<li/>
<p style="margin-bottom: 0in; text-decoration: none"><span style="display: inline-block; border: none; padding: 0in"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">keyWords
		</span></font></font></font>
		</p>
		<li/>
<p style="margin-bottom: 0in; text-decoration: none"><span style="display: inline-block; border: none; padding: 0in"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">regex
		</span></font></font></font>
		</p>
		<li/>
<p style="margin-bottom: 0in; text-decoration: none"><span style="display: inline-block; border: none; padding: 0in"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">regexFlags
		</span></font></font></font>
		</p>
		<li/>
<p style="margin-bottom: 0in; text-decoration: none"><span style="display: inline-block; border: none; padding: 0in"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">matchException
		</span></font></font></font>
		</p>
		<li/>
<p style="text-decoration: none"><span style="display: inline-block; border: none; padding: 0in"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">depth
		</span></font></font></font>
		</p>
	</ol>
	<p style="text-decoration: none"><span style="display: inline-block; border: none; padding: 0in"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">Note
	that the predefined Severity level, along with logger and thread
	ids, have been removed as filter attributes.</span></font></font></font></p>
	<p><span style="display: inline-block; border: none; padding: 0in"><span style="text-decoration: none"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">When
	an alarm fires, it is assigned one of four priorities (these replace
	the severity concept in earlier versions). In decending order, these
	are </span></font></font></span></font><code><span style="text-decoration: none">critical</span></code><span style="text-decoration: none">,
	</span><code><span style="text-decoration: none">high</span></code><span style="text-decoration: none">,
	</span><code><span style="text-decoration: none">moderate</span></code><span style="text-decoration: none">
	</span><span style="display: inline-block; border: none; padding: 0in"><span style="text-decoration: none"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">and</span></font></font></span></font><span style="text-decoration: none">
	</span><code><span style="text-decoration: none">low</span></code><span style="display: inline-block; border: none; padding: 0in"><span style="text-decoration: none"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">.
	By default, all alarms have </span></font></font></span></font><code><span style="text-decoration: none">critical</span></code><span style="display: inline-block; border: none; padding: 0in"><span style="text-decoration: none"><font color="#656974">
	</span></font><span style="text-decoration: none"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">priority.
	This default priority may be altered in the admin interface and
	individual alarms may be assigned a lower priority through the
	priority map.</span></font></font></span></font></p>
	<p><span style="display: inline-block; border: none; padding: 0in"><span style="text-decoration: none"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">The
	priority map is stored in the </span></font></font></span></font><code><span style="text-decoration: none">alarms-priority.properties</span></code><span style="display: inline-block; border: none; padding: 0in"><span style="text-decoration: none"><font color="#656974">
	</span></font><span style="text-decoration: none"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">file,
	which is located in the </span></font></font></span></font><code><span style="text-decoration: none">/var/lib/dcache/alarms</span></code><span style="display: inline-block; border: none; padding: 0in"><span style="text-decoration: none"><font color="#656974">
	</span></font><span style="text-decoration: none"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">directory
	in RPM packages. The priority map may be adjusted either by editing
	this file directly (and requesting dCache reloading it) or via the
	admin interface.</span></font></font></span></font></p>
	<p style="text-decoration: none"><span style="display: inline-block; border: none; padding: 0in"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">Note
	that, while there is still a Severity column in the database, it is
	no longer used.</span></font></font></font></p>
	<p><span style="display: inline-block; border: none; padding: 0in"><span style="text-decoration: none"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">The
	previous dCache shell commands to add, modify, remove and send
	alerts are still present. Their options have been modified slightly
	to reflect changes in this release. There is a new </span></font></font></span></font><code><span style="text-decoration: none">dcache
	alarm list</span></code><span style="text-decoration: none">
	</span><span style="display: inline-block; border: none; padding: 0in"><span style="text-decoration: none"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">command.
	This lists all predefined alarms.</span></font></font></span></font></p>
	<p style="text-decoration: none"><span style="display: inline-block; border: none; padding: 0in"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">The
	alarm service is now a well-known cell by default.</span></font></font></font></p>
	<p><span style="display: inline-block; border: none; padding: 0in"><span style="text-decoration: none"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">The
	alerts admin commands have been extended to allow creating custom
	alerts and assigning priority to alerts. The commands </span></font></font></span></font><code><span style="text-decoration: none">predefined
	ls</span></code><span style="text-decoration: none"> </span><span style="display: inline-block; border: none; padding: 0in"><span style="text-decoration: none"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">and</span></font></font></span></font><span style="text-decoration: none">
	</span><code><span style="text-decoration: none">send</span></code><span style="text-decoration: none">
	</span><span style="display: inline-block; border: none; padding: 0in"><span style="text-decoration: none"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">have
	also been added to the admin interface; these behave as the
	similarly named </font></font></span></font><font color="#656974"><span style="text-decoration: none"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><code>dcache</font></font></span></font></code><span style="text-decoration: none"><font color="#656974">
	</span></font><span style="text-decoration: none"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">shell
	commands.</span></font></font></span></font></p>
	<p><span style="display: inline-block; border: none; padding: 0in"><span style="text-decoration: none"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">The
	optional alarm cleaner daemon now runs as part of the alarms
	service, not in the httpd service. The default values for its
	properties have been moved from </span></font></font></span></font><code><span style="text-decoration: none">httpd.properties</span></code><span style="text-decoration: none">
	</span><span style="display: inline-block; border: none; padding: 0in"><span style="text-decoration: none"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">to</span></font></font></span></font><span style="text-decoration: none">
	</span><code><span style="text-decoration: none">alarms.properties</span></code><span style="text-decoration: none">
	</span><span style="display: inline-block; border: none; padding: 0in"><span style="text-decoration: none"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">and
	renamed accordingly.</span></font></font></span></font></p>
	<p><span style="display: inline-block; border: none; padding: 0in"><span style="text-decoration: none"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">There
	are a number of new and modified alarms properties which are
	documented in the </span></font></font></span></font><code><span style="text-decoration: none">alarms.properties</span></code><span style="text-decoration: none">
	</span><span style="display: inline-block; border: none; padding: 0in"><span style="text-decoration: none"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">defaults
	file. Most significant of these are those for enabling email
	notification, which no longer requires direct editing of logback
	configuration files.</span></font></font></span></font></p>
	<p style="text-decoration: none"><span style="display: inline-block; border: none; padding: 0in"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">The
	alarms web page is basically the same, except that the “Severity”
	label has been replaced by “Priority”. That filter choice
	affects only alarms and not unmarked logging events. Since this is
	not a schema attribute, it is not reflected in the actual table, but
	alarms will be sorted there by priority first.</span></font></font></font></p>
	<h3 class="western" style="text-decoration: none">Billing changes</h3>
	<p style="text-decoration: none"><span style="display: inline-block; border: none; padding: 0in"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">The
	billing service no longer logs a warning on shutdown. This change
	was performed on dCache 2.11. The billing log format has been
	extended to allow InfoMessage log entries to include the session
	identifier. This is particularly useful when understanding which SRM
	session is responsible for billing entries. The default format is
	not altered, so sites must adjust their configuration to include
	session information.</span></font></font></font></p>
	<h5 class="western">Scripts</h5>
	<p><span style="display: inline-block; border: none; padding: 0in"><span style="text-decoration: none"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">The
	startup time for the different </span></font></font></span></font><code><span style="text-decoration: none">dcache
	billing</span></code><span style="display: inline-block; border: none; padding: 0in"><span style="text-decoration: none"><font color="#656974">
	</span></font><span style="text-decoration: none"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">commands
	has been reduced.</span></font></font></span></font></p>
	<h3 class="western" style="text-decoration: none">GPlazma changes</h3>
	<p style="text-decoration: none"><span style="display: inline-block; border: none; padding: 0in"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">Update
	gPlazma Login result printer to use a human-friendly label rather
	than a dot-separated-number for the SHA–512-with-RSA algorithm. </span></font></font></font>
	</p>
	<p><span style="display: inline-block; border: none; padding: 0in"><span style="text-decoration: none"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">The
	kpwd plugin, which supports the proprietary kpwd-format files, has
	been updated to support multiple gids. Users with multiple gids have
	a comma-separated list of gids instead of the single gid value, with
	the primary gid the first gid in the list. A comma-separated list of
	gids is valid for both </span></font></font></span></font><code><span style="text-decoration: none">login</span></code><span style="text-decoration: none">
	</span><span style="display: inline-block; border: none; padding: 0in"><span style="text-decoration: none"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">and</span></font></font></span></font><span style="text-decoration: none">
	</span><code><span style="text-decoration: none">password</span></code><span style="text-decoration: none">
	</span><span style="display: inline-block; border: none; padding: 0in"><span style="text-decoration: none"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">lines</span></font></font></span></font><span style="text-decoration: none">.</span></p>
	<h3 class="western">Info changes</h3>
	<p style="text-decoration: none"><span style="display: inline-block; border: none; padding: 0in"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">The
	info-provider groups together pools that GLUE can report together
	for storage accounting. Such groups are called Normalized Access
	Storages (NASes). Previously, info tried to group pools as much as
	possible, which leads to confusion over the names. Now, a NAS
	represents all the pools accessible by the same set of links.</span></font></font></font></p>
	<h3 class="western">Replica Manager changes</h3>
	<p style="text-decoration: none"><span style="display: inline-block; border: none; padding: 0in"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">Replica
	manager now correctly shuts down the database connection pool when
	dCache is shutting down the domain.</span></font></font></font></p>
	<h3 class="western">Door Changes</h3>
	<h4 class="western">SRM service</h4>
	<h5 class="western"><a name="timinggaugessupportasynchronousprocessing"></a>
	Timing gauges support asynchronous processing</h5>
	<p style="margin-top: 0.1in; margin-bottom: 0.08in"><span style="display: inline-block; border: none; padding: 0in"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">The
	</font></font></font><font color="#656974"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><code>srm</font></font></font></code><font color="#656974">
	</font><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">provides
	gauges for measuring the executing time of various request. Some of
	these requests are asynchronous and as a result appeared to be much
	faster than they really are. The gauges have now been extended to
	support asynchronous processing and the measured time now reflects
	the true processing time of such request.</span></font></font></font></p>
	<h5 class="western"><a name="scopeddoorselectioninsrm"></a>Scoped
	door selection in SRM</h5>
	<p><span style="display: inline-block; border: none; padding: 0in"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">From
	dCache release 2.12, the SRM tries to take where the client
	connected from into account when it selects a door.</span></font></font></font></p>
	<p><span style="display: inline-block; border: none; padding: 0in"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">The
	selection logic has been modified such that it will select a network
	interface with the smallest possible scope as big as the scope of
	the interface the client connected over. E.g. if the client
	connected on a network interface with global scope, the SRM will
	select a door with global scope. If the client connected over a site
	local interface, the SRM will prefer a door with a site-local
	interface, but will fall back to selecting an interface with global
	scope if necessary.</span></font></font></font></p>
	<h5 class="western">SRM enables history logging by default</h5>
	<p style="text-decoration: none"><span style="display: inline-block; border: none; padding: 0in"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">The
	SRM supports writing a detailed log of all request state changes to
	the SRM database. This information is very valuable when one wants
	to reconstruct the events related to a transfer, for instance, when
	debugging why a particular transfer failed.</span></font></font></font></p>
	<p style="text-decoration: none"><span style="display: inline-block; border: none; padding: 0in"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">In
	previous releases this feature was disabled by default due to fear
	that it would overload the SRM database. Recent releases have
	however improved database performance in SRM to the point that we
	now change to enabling history logging by default.</span></font></font></font></p>
	<p style="text-decoration: none"><span style="display: inline-block; border: none; padding: 0in"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">At
	the same time we changed the default for when data is persistet to
	the database. This means that although all state transitions are by
	default recorded in the database, the database is not necessarily
	updated upon every state transition. This further reduces the
	database overhead of history logging.</span></font></font></font></p>
	<h5 class="western"><a name="sitespecificsrmpingattributes"></a>Site
	specific srmPing attributes</h5>
	<p><span style="display: inline-block; border: none; padding: 0in"><span style="text-decoration: none"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">The
	SRM protocol allows the srmPing reply to contain site specific
	key-value pairs. With this release, custom key-value pairs may be
	added in the dCache configuration using the </span></font></font></span></font><code><span style="text-decoration: none">srm.ping-extra-info</span></code><span style="text-decoration: none">
	</span><span style="display: inline-block; border: none; padding: 0in"><span style="text-decoration: none"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">properties</span></font></font></span></font><span style="text-decoration: none">.</span></p>
	<h5 class="western">srmGetSpaceTokens results are cached by SRM
	service</h5>
	<p style="margin-top: 0.1in; margin-bottom: 0.08in"><span style="display: inline-block; border: none; padding: 0in"><span style="text-decoration: none"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">Clients
	such as FTS query the available space tokens prior to every upload.
	This used to cause a query message to be sent to the </font></font></span></font><font color="#656974"><span style="text-decoration: none"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><code>spacemanager</font></font></span></font></code><span style="text-decoration: none"><font color="#656974">
	</span></font><span style="text-decoration: none"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">service
	every time, with </font></font></span></font><font color="#656974"><span style="text-decoration: none"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><code>spacemanager</font></font></span></font></code><span style="text-decoration: none"><font color="#656974">
	</span></font><span style="text-decoration: none"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">querying
	its database. Since the list rarely changes, this release introduces
	a short-lived cache for this information.</span></font></font></span></font></p>
	<h5 class="western">srm DB improvements</h5>
	<p><span style="text-decoration: none">T</span><span style="display: inline-block; border: none; padding: 0in"><span style="text-decoration: none"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">he
	srm service now includes a self-throttling behaviour when clients
	make more requests that the database can cope with. Previously to
	dCache 2.11, when overloaded, all database updates were dropped and
	a message like</span></font></font></span></font><span style="text-decoration: none">
	</span><code><span style="text-decoration: none">Persistence of
	request &lt;request&gt; skipped, queue is too long</span></code><span style="text-decoration: none">
	is logged. </span><span style="display: inline-block; border: none; padding: 0in"><span style="text-decoration: none"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">The
	result is that the database could hold incomplete or inaccurate
	information about SRM activity.</span></font></font></span></font></p>
	<p style="text-decoration: none"><span style="display: inline-block; border: none; padding: 0in"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">Such
	inaccuracy was acceptable as the database was used for debugging
	information. However, with the adoption of a separate upload
	directory and some support for recovering user activity after a
	restart, this is no longer true. Moreover, such debugging
	information is likely very useful when understanding any unexpected
	behaviour during an overload situation, so needs to have some
	accuracy in particular under such conditions.</span></font></font></font></p>
	<p style="text-decoration: none"><span style="display: inline-block; border: none; padding: 0in"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">SRM
	database updates naturally fall into two types: major and minor.
	Major updates record new requests and transitions to a final state
	(SUCCESS, FAILURE, CANCELLED); minor updates record changes to some
	non-final state. In an overload situation, minor updates may be
	dropped but major updates will always be processed. If necessary,
	processing the SRM request will be delayed so that major updates are
	stored. This has a secondary effect of creating a back-pressure on
	clients, slowing them down and allowing the srm service to recover.</span></font></font></font></p>
	<p><span style="display: inline-block; border: none; padding: 0in"><span style="text-decoration: none"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">The
	admin command </span></font></font></span></font><code><span style="text-decoration: none">ls</span></code><span style="text-decoration: none">
	</span><span style="display: inline-block; border: none; padding: 0in"><span style="text-decoration: none"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">and</span></font></font></span></font><span style="text-decoration: none">
	</span><code><span style="text-decoration: none">ls completed</span></code><span style="text-decoration: none">
	</span><span style="display: inline-block; border: none; padding: 0in"><span style="text-decoration: none"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">have
	been refactored. There is now a single command </font></font></span></font><font color="#656974"><span style="text-decoration: none"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><code>ls</font></font></span></font></code><span style="text-decoration: none"><font color="#656974">
	</span></font><span style="text-decoration: none"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">that
	accepts the option </span></font></font></span></font><code><span style="text-decoration: none">-completed=&lt;n&gt;</span></code><span style="text-decoration: none">
	</span><span style="display: inline-block; border: none; padding: 0in"><span style="text-decoration: none"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">to
	limit the number of completed operations.</span></font></font></span></font></p>
	<h6 class="western"><a name="closingsrmconnections"></a>Closing SRM
	connections</h6>
	<p style="text-decoration: none"><span style="display: inline-block; border: none; padding: 0in"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">With
	the adoption of Jetty v9, the GSI implementation has been rewritten
	to use Java’s built-in SSL support in a more direct fashion. The
	most immediate effect of this is that, by default, the shutdown
	sequence of SSL and GSI connections has changed. Before, the server
	would simply close its end of the network connection; now, the
	server issues a CLOSE alert that notifies the client of the
	impending close before closing its end of the connection.</span></font></font></font></p>
	<p style="text-decoration: none"><span style="display: inline-block; border: none; padding: 0in"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">Sending
	a CLOSE alert is part of the SSL v3 and subsequent TLS protocol
	specifications. Previous versions of dCache were in error by not
	sending such alerts.</span></font></font></font></p>
	<p style="text-decoration: none"><span style="display: inline-block; border: none; padding: 0in"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">Although
	most SSL/TLS clients expect the CLOSE alert, the dCache SRM clients
	(prior to v2.10.7) considers any alert as an indicator that the
	operation has failed. Depending on the client configuration, it
	might or might not retry the operation several times if this
	happens. In either case, the return code and output will reflect a
	failed operation, whereas the operation may have succeeded.</span></font></font></font></p>
	<p style="text-decoration: none"><span style="display: inline-block; border: none; padding: 0in"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">This
	has been fixed with SRM-client release v2.10.7: this version accepts
	the CLOSE alert but does not require it. It is compatible with
	dCache v2.11 and earlier versions.</span></font></font></font></p>
	<p><span style="display: inline-block; border: none; padding: 0in"><span style="text-decoration: none"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">To
	allow a smooth transition, dCache includes the
	</span></font></font></span></font><code><span style="text-decoration: none">srm.enable.legacy-close</span></code><span style="text-decoration: none">
	</span><span style="display: inline-block; border: none; padding: 0in"><span style="text-decoration: none"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">configuration
	property. When set to </font></font></span></font><font color="#333333"><span style="text-decoration: none"><font size="2" style="font-size: 10pt"><code>true</font></span></font></code><span style="text-decoration: none"><font color="#656974">
	</span></font><span style="text-decoration: none"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">(the
	default) the srm service will close connections without first
	issuing the CLOSE alert, in keeping with previous dCache behaviour.</span></font></font></span></font></p>
	<p style="margin-top: 0.1in; margin-bottom: 0.08in; text-decoration: none">
	<span style="display: inline-block; border: none; padding: 0in"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">Future
	versions of dCache will change the default and eventually remove
	this option. Therefore sites are invited to upgrade their clients.</span></font></font></font></p>
	<h4 class="western">WebDAV service</h4>
	<h5 class="western"><a name="supportformultiplehttpdinstances"></a>Support
	for multiple httpd instances</h5>
	<p style="margin-top: 0.1in; margin-bottom: 0.08in"><span style="display: inline-block; border: none; padding: 0in"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">With
	the improved pcells decoupling from dCache, it is now possible to
	have several </font></font></font><font color="#656974"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><code>httpd</font></font></font></code><font color="#656974">
	</font><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">services
	in the same dCache instance. One needs to give each a unique name,
	but that's the only configuration tweak needed.</span></font></font></font></p>
	<h5 class="western"><a name="httpdusesjglobusforcertificatehandling"></a>
	httpd uses JGlobus for certificate handling</h5>
	<p style="margin-top: 0.1in; margin-bottom: 0.08in"><span style="display: inline-block; border: none; padding: 0in"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">When
	hosting the webadmin service, </font></font></font><font color="#656974"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><code>httpd</font></font></font></code><font color="#656974">
	</font><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">supports
	HTTP over TLS. dCache now uses JGlobus for TLS, or more
	specifically, for the certificate handling required for TLS. The
	immediate consequence is that one no longer has to import host and
	CA certificates into a Java Keystore file. The </font></font></font><font color="#656974"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><code>httpd</font></font></font></code><font color="#656974">
	</font><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">service
	can now read those directly from your </font></font></font><font color="#333333"><span style="text-decoration: none"><font size="2" style="font-size: 10pt"><code>/etc/grid-security</font></span></font></code><font color="#656974">
	</font><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">directory.</span></font></font></font></p>
	<h5 class="western">WebDAV doors always use JGlobus for https</h5>
	<p><span style="display: inline-block; border: none; padding: 0in"><span style="text-decoration: none"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">The
	WebDAV door previously had the choice of two different https
	implementations: The plain </font></font></span></font><font color="#333333"><span style="text-decoration: none"><font size="2" style="font-size: 10pt"><code>https</font></span></font></code><span style="text-decoration: none"><font color="#656974">
	</span></font><span style="text-decoration: none"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">setting
	would use Java’s TLS implementation, while the </font></font></span></font><font color="#333333"><span style="text-decoration: none"><font size="2" style="font-size: 10pt"><code>https-jglobus</font></span></font></code><span style="text-decoration: none"><font color="#656974">
	</span></font><span style="text-decoration: none"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">setting
	would use the TLS implementation for JGlobus.</span></font></font></span></font></p>
	<p><span style="display: inline-block; border: none; padding: 0in"><span style="text-decoration: none"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">In
	recent years, the two choices actually both used the TLS
	implementation bundled with Java. The difference between the two was
	merely how they dealt with certificate handling and internal
	abstractions. In dCache 2.11, the two code bases were further
	consolidated to the point that in this release we adopt JGlobus
	certificate handling for the plain </font></font></span></font><font color="#333333"><span style="text-decoration: none"><font size="2" style="font-size: 10pt"><code>https</font></span></font></code><span style="text-decoration: none"><font color="#656974">
	</span></font><span style="text-decoration: none"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">setting.
	The </font></font></span></font><font color="#333333"><span style="text-decoration: none"><font size="2" style="font-size: 10pt"><code>https-jglobus</font></span></font></code><span style="text-decoration: none"><font color="#656974">
	</span></font><span style="text-decoration: none"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">setting
	is deprecated.</span></font></font></span></font></p>
	<p><span style="display: inline-block; border: none; padding: 0in"><span style="text-decoration: none"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">One
	consequence is that the WebDAV door now uses the certificates in
	</font></font></span></font><font color="#333333"><span style="text-decoration: none"><font size="2" style="font-size: 10pt"><code>/etc/grid-security/</font></span></font></code><span style="text-decoration: none"><font color="#656974">
	</span></font><span style="text-decoration: none"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">rather
	than those imported using the </font></font></span></font><font color="#333333"><span style="text-decoration: none"><font size="2" style="font-size: 10pt"><code>dcache
	import</font></span></font></code><span style="text-decoration: none"><font color="#656974">
	</span></font><span style="text-decoration: none"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">commands.</span></font></font></span></font></p>
	<p style="text-decoration: none"><span style="display: inline-block; border: none; padding: 0in"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">One
	of the benefits of the JGlobus certificate handling is that it
	supports VOMS attributes.</span></font></font></font></p>
	<h5 class="western"><a name="webdavdoorsupportsparameteriseddirectorytemplates"></a>
	WebDAV door supports parameterised directory templates</h5>
	<p><span style="display: inline-block; border: none; padding: 0in"><span style="text-decoration: none"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">The
	HTML generated by the WebDAV door is cusomizable using a templating
	language. Starting with this release, configuration properties
	prefixed with </font></font></span></font><font color="#333333"><span style="text-decoration: none"><font size="2" style="font-size: 10pt"><code>webdav.templates.config</font></span></font></code><span style="text-decoration: none"><font color="#656974">
	</span></font><span style="text-decoration: none"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">are
	exposed to the template language. Several such properties have been
	predefined. Consult the information in the </font></font></span></font><font color="#333333"><span style="text-decoration: none"><font size="2" style="font-size: 10pt"><code>webdav.properties</font></span></font></code><span style="text-decoration: none"><font color="#656974">
	</span></font><span style="text-decoration: none"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">file
	for details.</span></font></font></span></font></p>
	<p style="text-decoration: none"><span style="display: inline-block; border: none; padding: 0in"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">Sites
	that have already customized the template will likely have to update
	the template.</span></font></font></font></p>
	<h5 class="western"><a name="webdavblocksaccesstofilesbeinguploaded"></a>
	WebDAV blocks access to files being uploaded</h5>
	<p style="text-decoration: none"><span style="display: inline-block; border: none; padding: 0in"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">When
	generating a directory listing, the WebDAV door now greys out files
	that are still being uploaded, preventing the user from clicking a
	download link that would fail anyway.</span></font></font></font></p>
	<p style="margin-top: 0.1in; margin-bottom: 0.08in; text-decoration: none">
	<span style="display: inline-block; border: none; padding: 0in"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">Sites
	that have customized the HTML template will likely have to update
	the template.</span></font></font></font></p>
	<h5 class="western">Support for custom HTTP response headers</h5>
	<p style="margin-top: 0.1in; margin-bottom: 0.08in"><span style="display: inline-block; border: none; padding: 0in"><span style="text-decoration: none"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">Support
	has been added to the webdav door and the pool so that custom HTTP
	response headers may be configured. To demonstrate this, the Server
	response header now has the value </font></font></span></font><font color="#656974"><span style="text-decoration: none"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><code>dCache/&lt;version&gt;</font></font></span></font></code><span style="text-decoration: none"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">
	where </font></font></span></font><font color="#656974"><span style="text-decoration: none"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><code>&lt;version&gt;</font></font></span></font></code><span style="text-decoration: none"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">
	is the installed dCache version.</span></font></font></span></font></p>
	<h5 class="western"><a name="robustdeletenotificationforspacemanagerreplicaandpinmanager"></a>
	Robust delete notification for spacemanager, replica, and pinmanager</h5>
	<p style="margin-top: 0.1in; margin-bottom: 0.08in"><span style="display: inline-block; border: none; padding: 0in"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">The
	</font></font></font><font color="#656974"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><code>spacemanager</font></font></font></code><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">,
	</font></font></font><font color="#656974"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><code>replica</font></font></font></code><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">,
	and </font></font></font><font color="#656974"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><code>pinmanager</font></font></font></code><font color="#656974">
	</font><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">services
	rely on receiving notifications for when files are deleted.
	Previously, these were sent by both </font></font></font><font color="#656974"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><code>pnfsmanger</font></font></font></code><font color="#656974">
	</font><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">and
	</font></font></font><font color="#656974"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><code>cleaner</font></font></font></code><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">,
	but both used unreliable notifications. This in particular affected
	</font></font></font><font color="#656974"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><code>spacemanager</font></font></font></code><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">:
	If the </font></font></font><font color="#656974"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><code>spacemanager</font></font></font></code><font color="#656974">
	</font><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">was
	shut down while </font></font></font><font color="#656974"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><code>pnfsmanager</font></font></font></code><font color="#656974">
	</font><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">or
	</font></font></font><font color="#656974"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><code>cleaner</font></font></font></code><font color="#656974">
	</font><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">were
	running, the services could quickly get out of sync, resulting in
	leaked files in </font></font></font><font color="#656974"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><code>spacemanager</font></font></font></code><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">.</span></font></font></font></p>
	<p style="margin-top: 0.1in; margin-bottom: 0.08in"><span style="display: inline-block; border: none; padding: 0in"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">This
	notification has now been replaced by a robust notification from
	</font></font></font><font color="#656974"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><code>cleaner</font></font></font></code><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">.
	The deleted file is not removed from the trash table until the
	receiving services have been notified and have confirmed the
	notification. Whether the notification is send is controlled by the
	new </font></font></font><font color="#656974"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><code>cleaner.enable.space-reservation</font></font></font></code><font color="#656974">
	</font><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">and
	</font></font></font><font color="#656974"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><code>cleaner.enable.replica</font></font></font></code><font color="#656974">
	</font><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">settings.
	These settings must be in sync with whether space management or
	replica management is used in this dCache instance.</span></font></font></font></p>
	<p style="margin-top: 0.1in; margin-bottom: 0.08in"><span style="display: inline-block; border: none; padding: 0in"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">It
	is assumed that every dCache instance has a </font></font></font><font color="#656974"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><code>pinmanager</font></font></font></code><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">.
	If you don't have one, the easiest solution is to add this service
	upon upgrade.</span></font></font></font></p>
	<h4 class="western">XRootD service</h4>
	<h5 class="western"><a name="thirdpartyxrootdpluginshavetobeportedtonetty4"></a>
	Third party xrootd plugins have to be ported to Netty 4</h5>
	<p style="text-decoration: none"><span style="display: inline-block; border: none; padding: 0in"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">Any
	third party channel handler plugin has to be ported to Netty 4 and
	xrootd4j 2 before it is compatible with dCache 2.12. Please contact
	the third party vendor for further details.</span></font></font></font></p>
	<p style="text-decoration: none"><span style="display: inline-block; border: none; padding: 0in"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">Information
	to developers: If you develop channel handler plugins, it is of
	utmost importance that your plugins do not perform blocking
	operations on the Netty threads. Any blocking operation has to be
	offloaded to a thread pool maintained by the plugin. Please contact
	support@dcache.org for details.</span></font></font></font></p>
	<h5 class="western">Asynchronous open for xrootd</h5>
	<p style="margin-top: 0.1in; margin-bottom: 0.08in; text-decoration: none">
	<span style="display: inline-block; border: none; padding: 0in"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">Pool
	selection in dCache is unbounded in that it may trigger staging from
	tape or internal replication of files. Yet many xrootd clients have
	very short timeouts. To avoid that clients time out during staging,
	dCache xrootd doors now use the asynchronous reply format of the
	xrootd protocol. In this format, the server immediately responds to
	an kXR_open request, telling the client that the actual response
	will be provided asynchronously at some point in the future.</span></font></font></font></p>
	<h4 class="western">NFS service</h4>
	<h5 class="western">NFS door improvements</h5>
	<p style="text-decoration: none"><span style="display: inline-block; border: none; padding: 0in"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">The
	NFS door and mover now shows correct units, nanoseconds (ns), when
	showing performance statistics for the different NFS operations.</span></font></font></font></p>
	<p><span style="display: inline-block; border: none; padding: 0in"><span style="text-decoration: none"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">The
	database query used to gather information for </font></font></span></font><font color="#656974"><span style="text-decoration: none"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><code>df</font></font></span></font></code><span style="text-decoration: none"><font color="#656974">
	</span></font><span style="text-decoration: none"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">command
	on an NFS mount has been improved. However, this remains an
	expensive operation.</span></font></font></span></font></p>
	<p style="text-decoration: none"><span style="display: inline-block; border: none; padding: 0in"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">nfs4j
	has been updated, which adds new improvements such as:</span></font></font></font></p>
	<ul>
		<li/>
<p><span style="display: inline-block; border: none; padding: 0in"><span style="text-decoration: none"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">Support
		for the</span></font></font></span></font><span style="text-decoration: none">
		</span><code><span style="text-decoration: none">all_root</span></code><span style="text-decoration: none">
		</span><span style="display: inline-block; border: none; padding: 0in"><span style="text-decoration: none"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">export
		option. This treats all requests from the specified client machines
		as having come from the root user. Created files and directories
		have the same ownership as the parent directory.</span></font></font></span></font></p>
		<li/>
<p style="text-decoration: none"><span style="display: inline-block; border: none; padding: 0in"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">We
		ensure that file attributes (e.g., file size) are always
		up-to-date. Previously, zero file size was reported for a short
		period after closing a file written through NFS.</span></font></font></font></p>
		<li/>
<p style="text-decoration: none"><span style="display: inline-block; border: none; padding: 0in"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">Some
		performance boosts when checking filenames.</span></font></font></font></p>
		<li/>
<p style="text-decoration: none"><span style="display: inline-block; border: none; padding: 0in"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">Make
		deletes through NFS v3 faster.</span></font></font></font></p>
	</ul>
	<h5 class="western"><a name="nfsdoorsusenfstoaccesspooldata"></a>NFS
	doors use NFS to access pool data</h5>
	<p><span style="display: inline-block; border: none; padding: 0in"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">An
	NFS door can act as a data-proxy between the NFS client and the
	pools. In previous releases, the NFS door internally used the DCAP
	protocol between the door and pools. Starting with this release, NFS
	doors use the NFS 4 protocol instead. The use of NFS provides more
	robust proxy support in case of network failures.</span></font></font></font></p>
	<p><span style="display: inline-block; border: none; padding: 0in"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">As
	part of this change, the lifetime of NFS movers has changed.</span></font></font></font></p>
	<p><span style="display: inline-block; border: none; padding: 0in"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">Additionally,
	NFS has seen many performance improvements in this release.</span></font></font></font></p>
	<h5 class="western"><a name="newnfsexportoptions"></a>New NFS export
	options</h5>
	<p><span style="display: inline-block; border: none; padding: 0in"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">Added
	a </span></font></font></font><code>nopnfs</code> <span style="display: inline-block; border: none; padding: 0in"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">export
	option to doors to force the use of proxy mode.</span></font></font></font></p>
	<p><span style="display: inline-block; border: none; padding: 0in"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">Added
	</font></font></font><font color="#656974"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><code>anonuid</font></font></font></code><font color="#656974">
	</font><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">and
	</font></font></font><font color="#656974"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><code>anongid</font></font></font></code><font color="#656974">
	</font><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">to
	map all accesses to a particular UID and GID, e.g. </span></font></font></font><code>/data
	hostA(rw,all_squash,anonuid=17,anongid=18)</code>.</p>
	<h5 class="western">New admin commands for NFS service</h5>
	<p style="margin-top: 0.1in; margin-bottom: 0.08in"><span style="display: inline-block; border: none; padding: 0in"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">Previous
	versions showed information about all transfers, pools and clients
	as part of its info output. This tended to clutter the output and
	also caused a lot of unnecessary information to be collected by the
	</font></font></font><font color="#656974"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><code>info</font></font></font></code><font color="#656974">
	</font><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">service.</span></font></font></font></p>
	<p style="margin-top: 0.1in; margin-bottom: 0.08in"><span style="display: inline-block; border: none; padding: 0in"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">With
	this release, NFS doors no longer show this information in the </font></font></font><font color="#656974"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><code>info</font></font></font></code><font color="#656974">
	</font><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">output.
	Instead that information can be queried using several new admin
	commands:</span></font></font></font></p>
	<pre><span style="display: inline-block; border: none; padding: 0in"><font color="#000000"><font face="Courier New, monospace"><font size="2" style="font-size: 10pt"><code>show clients [</font></font></font></code><font color="#656974"><font face="Courier New, monospace"><font size="2" style="font-size: 10pt"><code>&lt;host&gt;</font></font></font></code><font color="#000000"><font face="Courier New, monospace"><font size="2" style="font-size: 10pt"><code>]  # show active NFSv4 clients</span></font></font></font></code>
<span style="display: inline-block; border: none; padding: 0in"><font color="#000000"><font face="Courier New, monospace"><font size="2" style="font-size: 10pt"><code>show pools [</font></font></font></code><font color="#656974"><font face="Courier New, monospace"><font size="2" style="font-size: 10pt"><code>&lt;pool&gt;</font></font></font></code><font color="#000000"><font face="Courier New, monospace"><font size="2" style="font-size: 10pt"><code>]  # show pools to pNFS device mapping</span></font></font></font></code>
<span style="display: inline-block; border: none; padding: 0in"><font color="#000000"><font face="Courier New, monospace"><font size="2" style="font-size: 10pt"><code>show proxyio # show proxy-io transfers</span></font></font></font></code>
<span style="display: inline-block; border: none; padding: 0in"><font color="#000000"><font face="Courier New, monospace"><font size="2" style="font-size: 10pt"><code>show transfers # show active transfers</span></font></font></font></code></pre><h5 class="western">
	New thread pool settings for NFS service</h5>
	<p style="margin-top: 0.1in; margin-bottom: 0.08in"><span style="display: inline-block; border: none; padding: 0in"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">The
	NFS service provides the following new settings for controlling the
	message thread pool size:</span></font></font></font></p>
	<pre><span style="display: inline-block; border: none; padding: 0in"><font color="#000000"><font face="Courier New, monospace"><font size="2" style="font-size: 10pt"><code>nfs.cell.limits.message.threads.max=8</span></font></font></font></code>
<span style="display: inline-block; border: none; padding: 0in"><font color="#000000"><font face="Courier New, monospace"><font size="2" style="font-size: 10pt"><code>nfs.cell.limits.message.queue.max=1000</span></font></font></font></code></pre><h4 class="western">
	Further Door Changes</h4>
	<h5 class="western">More uniform access logs</h5>
	<p style="text-decoration: none"><span style="display: inline-block; border: none; padding: 0in"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">Most
	doors in dCache support generating a so called access log that
	records any interaction with clients talking to the doors. The logs
	share many similarities, but used slightly different formatting and
	attribute nasafmes for the same concepts. This has now been cleaned
	up. If you developed parsers for the access logs, you most likley
	have to update these.</span></font></font></font></p>
	<h5 class="western">Log FTS-specific information</h5>
	<p style="margin-top: 0.1in; margin-bottom: 0.08in"><span style="display: inline-block; border: none; padding: 0in"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">FTS,
	since v3.2.34, will send the Job-ID, File-ID and retry-count to
	dCache. Here is an example of this information:
	</font></font></font><font color="#656974"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><code>job-id=bb62f96e-23da-48c1-bd6f-e0737588733b;file-id=996117;retry=0</font></font></font></code><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">.</span></font></font></font></p>
	<p style="margin-top: 0.1in; margin-bottom: 0.08in"><span style="display: inline-block; border: none; padding: 0in"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">How
	FTS provides this information varies depending on the protocol. For
	SRM and WebDAV, a special HTTP header is used; for FTP the
	information is part of the </font></font></font><font color="#656974"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><code>CLIENTINFO</font></font></font></code><font color="#656974">
	</font><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">command.
	In all cases, the information is available in the access log
	(</font></font></font><font color="#656974"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><code>&lt;domain&gt;.access</font></font></font></code><font color="#656974">
	</font><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">file).</span></font></font></font></p>
	<p style="margin-top: 0.1in; margin-bottom: 0.08in"><span style="display: inline-block; border: none; padding: 0in"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">The
	following shows FTS sending an SRM </font></font></font><font color="#656974"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><code>prepareToPut</font></font></font></code><font color="#656974">
	</font><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">command:</span></font></font></font></p>
	<pre><span style="display: inline-block; border: none; padding: 0in"><font color="#000000"><font face="Courier New, monospace"><font size="2" style="font-size: 10pt"><code>level=INFO ts=2015-06-15T09:13:18.035+0200</span></font></font></font></code>
<span style="display: inline-block; border: none; padding: 0in"><font color="#000000"><font face="Courier New, monospace"><font size="2" style="font-size: 10pt"><code>event=org.dcache.srm.request [...] request.method=srmPrepareToPut</span></font></font></font></code>
<span style="display: inline-block; border: none; padding: 0in"><font color="#000000"><font face="Courier New, monospace"><font size="2" style="font-size: 10pt"><code>[..] request.token=-2147481808 status.code=SRM_SUCCESS</span></font></font></font></code>
<span style="display: inline-block; border: none; padding: 0in"><font color="#000000"><font face="Courier New, monospace"><font size="2" style="font-size: 10pt"><code>client-info=job-id=bb62f96e-23da-48c1-bd6f-e0737588733b;file-id=996117;retry=0</span></font></font></font></code>
<span style="display: inline-block; border: none; padding: 0in"><font color="#000000"><font face="Courier New, monospace"><font size="2" style="font-size: 10pt"><code>user-agent=&quot;fts_url_copy/3.2.34 gfal2/2.10.0 srm-ifce/1.23.1</span></font></font></font></code>
<span style="display: inline-block; border: none; padding: 0in"><font color="#000000"><font face="Courier New, monospace"><font size="2" style="font-size: 10pt"><code>gSOAP/2.7&quot;</span></font></font></font></code></pre><p style="margin-top: 0.1in; margin-bottom: 0.08in">
	<span style="display: inline-block; border: none; padding: 0in"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">The
	following shows the same information in an FTP session:</span></font></font></font></p>
	<pre><span style="display: inline-block; border: none; padding: 0in"><font color="#000000"><font face="Courier New, monospace"><font size="2" style="font-size: 10pt"><code>level=INFO ts=2015-06-15T09:13:19.769+0200</span></font></font></font></code>
<span style="display: inline-block; border: none; padding: 0in"><font color="#000000"><font face="Courier New, monospace"><font size="2" style="font-size: 10pt"><code>event=org.dcache.ftp.response</span></font></font></font></code>
<span style="display: inline-block; border: none; padding: 0in"><font color="#000000"><font face="Courier New, monospace"><font size="2" style="font-size: 10pt"><code>session=door:GFTP-prometheus-AAUYiTEsOCg command=&quot;ENC{SITE</span></font></font></font></code>
<span style="display: inline-block; border: none; padding: 0in"><font color="#000000"><font face="Courier New, monospace"><font size="2" style="font-size: 10pt"><code>CLIENTINFO scheme=gsiftp;appname=\&quot;fts_url_copy\&quot;;appver=\&quot;3.2.34</span></font></font></font></code>
<span style="display: inline-block; border: none; padding: 0in"><font color="#000000"><font face="Courier New, monospace"><font size="2" style="font-size: 10pt"><code>(gfal2</span></font></font></font></code>
<span style="display: inline-block; border: none; padding: 0in"><font color="#000000"><font face="Courier New, monospace"><font size="2" style="font-size: 10pt"><code>2.10.0)\&quot;;job-id=bb62f96e-23da-48c1-bd6f-e0737588733b;file-id=996117;retry=0}&quot;</span></font></font></font></code>
<span style="display: inline-block; border: none; padding: 0in"><font color="#000000"><font face="Courier New, monospace"><font size="2" style="font-size: 10pt"><code>reply=&quot;ENC{250 OK}&quot;</span></font></font></font></code></pre><p style="margin-top: 0.1in; margin-bottom: 0.08in">
	<span style="display: inline-block; border: none; padding: 0in"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">The
	FTP session identifier (</font></font></font><font color="#656974"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><code>door:GFTP-prometheus-AAUYiTEsOCg</font></font></font></code><font color="#656974">
	</font><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">in
	above example) allows discovery of all commands and corresponding
	responses for this attempt to upload a file.</span></font></font></font></p>
	<p style="margin-top: 0.1in; margin-bottom: 0.08in"><span style="display: inline-block; border: none; padding: 0in"><font color="#656974"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><code>The
	inclusion of this information allows correlation of dCache activity
	against FTS activity, which may prove useful when diagnosing
	problems.</span></font></font></font></code></p>
	<h5 class="western">New threading model for HTTP and xrootd movers</h5>
	<p><span style="display: inline-block; border: none; padding: 0in"><span style="text-decoration: none"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">The
	threading model of HTTP and xrootd movers has changed due to an
	upgrade to the Netty 4 I/O framework. Socket I/O and disk I/O are
	now served by the same threads. The </font></font></span></font><font color="#333333"><span style="text-decoration: none"><font size="2" style="font-size: 10pt"><code>pool.mover.http.disk-threads</font></span></font></code><span style="text-decoration: none"><font color="#656974">
	</span></font><span style="text-decoration: none"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">property
	is deprecated and has been replaced by </font></font></span></font><font color="#333333"><span style="text-decoration: none"><font size="2" style="font-size: 10pt"><code>pool.mover.http.threads</font></span></font></code><span style="text-decoration: none"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">.
	</font></font></span></font><font color="#333333"><span style="text-decoration: none"><font size="2" style="font-size: 10pt"><code>pool.mover.http.socket-threads</font></span></font></code><span style="text-decoration: none"><font color="#656974">
	</span></font><span style="text-decoration: none"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">is
	marked as forbidden, while </font></font></span></font><font color="#333333"><span style="text-decoration: none"><font size="2" style="font-size: 10pt"><code>pool.mover.http.memory-per-connection</font></span></font></code><span style="text-decoration: none"><font color="#656974">
	</span></font><span style="text-decoration: none"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">and
	</font></font></span></font><font color="#333333"><span style="text-decoration: none"><font size="2" style="font-size: 10pt"><code>pool.mover.http.memory</font></span></font></code><span style="text-decoration: none"><font color="#656974">
	</span></font><span style="text-decoration: none"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">are
	marked as obsolete.</span></font></font></span></font></p>
	<p><span style="display: inline-block; border: none; padding: 0in"><span style="text-decoration: none"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">Xrootd
	doors are build on the same Netty I/O frame works as the HTTP and
	xrootd movers. The upgrade to Netty 4 has caused the
	</font></font></span></font><font color="#333333"><span style="text-decoration: none"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><code>xrootd.max-total-memory-size</font></font></span></font></code><span style="text-decoration: none"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">
	and </font></font></span></font><font color="#333333"><span style="text-decoration: none"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><code>xrootd.max-channel-memory-size</font></font></span></font></code><span style="text-decoration: none"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">
	to be obsolete.</span></font></font></span></font></p>
	<h5 class="western">On the fly checksum calculation for NFS and
	xrootd</h5>
	<p style="text-decoration: none"><span style="display: inline-block; border: none; padding: 0in"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">Both
	NFS and xrootd uploads now support calculating checksums during
	upload when enabled in the pool’s checksum policy. This avoids the
	long pause at the end of the upload that is usually caused by
	calculating the checksum after the transfer.</span></font></font></font></p>
	<h1 class="western">Databases</h1>
	<h2 class="western">Schema Management</h2>
	<p><span style="display: inline-block; border: none; padding: 0in"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">Except
	for the </span></font></font></font><code>srm</code> <span style="display: inline-block; border: none; padding: 0in"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">and</span></font></font></font>
	<code>replica</code><span style="display: inline-block; border: none; padding: 0in"><font color="#656974">
	</font><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">services,
	all databases in dCache are managed through the </font></font></font><font color="#656974"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><em>liquibase</font></font></font></em><font color="#656974">
	</font><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">schema
	management library. This now also includes the </font></font></font><font color="#656974"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><code>spacemanager</font></font></font></code><font color="#656974">
	</font><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">service.
	The SQL scripts for creating the Chimera schema by hand are no
	longer shipped with dCache.</span></font></font></font></p>
	<p><span style="display: inline-block; border: none; padding: 0in"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">Schema
	changes are automatically applied the first time a service using the
	schema is started. Such changes may also be applied manually before
	starting dCache using the </span></font></font></font><code>dcache
	database update</code> <span style="display: inline-block; border: none; padding: 0in"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">command.
	It will update the schemas of all databases used by services
	configured on the current node.</span></font></font></font></p>
	<p><span style="display: inline-block; border: none; padding: 0in"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">For
	even more hands-on schema management, the </span></font></font></font><code>dcache
	database showUpdateSQL</code> <span style="display: inline-block; border: none; padding: 0in"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">command
	was added. It outputs the SQL that would be executed if </font></font></font><font color="#656974"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><code>dcache
	</span></font></font></font></code><code>database update</code><span style="display: inline-block; border: none; padding: 0in"><font color="#656974"><code>
	</font></code><font color="#656974"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><code>was
	executed. The emitted SQL may be applied manually to the database,
	thereby updating the schema.</span></font></font></font></code></p>
	<p><span style="display: inline-block; border: none; padding: 0in"><font color="#656974"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><code>Before
	downgrading dCache, it is essential that schema changes are rolled
	back to the earlier version. This needs to be done </font></font></font></code><font color="#656974"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><i><b><code>before</b></i></font></font></font></code><font color="#656974"><code>
	</font></code><font color="#656974"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><code>installing
	the earlier version of dCache. Schema changes can be rolled back
	using the </span></font></font></font></code><code>dcache database
	rollbackToDate</code> <span style="display: inline-block; border: none; padding: 0in"><font color="#656974"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><code>command.
	It is important to remember the date the schema changes where
	applied in the first place so that it can be rolled back to the
	version prior to the upgrade.</span></font></font></font></code></p>
	<p><span style="display: inline-block; border: none; padding: 0in"><font color="#656974"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><code>NOTE
	The </span></font></font></font></code><code>nfs</code><span style="display: inline-block; border: none; padding: 0in"><font color="#656974"><code>
	</font></code><font color="#656974"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><code>service
	does not automatically apply schema changes to Chimera - only the
	</font></font></font></code><font color="#333333"><font size="2" style="font-size: 10pt"><code>pnfsmanager</font></font></code><font color="#656974"><code>
	</font></code><font color="#656974"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><code>service
	does that. </span></font></font></font></code><code>nfs</code><span style="display: inline-block; border: none; padding: 0in"><font color="#656974"><code>
	</font></code><font color="#656974"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><code>will
	however check whether the Chimera schema is current and refuse to
	start if not. One consequence of this is that if </span></font></font></font></code><code>nfs</code>
	<span style="display: inline-block; border: none; padding: 0in"><font color="#656974"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><code>and</span></font></font></font></code>
	<code>pnfsmanager</code><span style="display: inline-block; border: none; padding: 0in"><font color="#656974"><code>
	</font></code><font color="#656974"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><code>run
	in the same domain, either </span></font></font></font></code><code>nfs</code><span style="display: inline-block; border: none; padding: 0in"><font color="#656974"><code>
	</font></code><font color="#656974"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><code>must
	be placed after </span></font></font></font></code><code>pnfsmanager</code><span style="display: inline-block; border: none; padding: 0in"><font color="#656974"><code>
	</font></code><font color="#656974"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><code>in
	the layout file or the changes must be applied manually using </span></font></font></font></code><code>dcache
	database update</code>.</p>
	<h2 class="western">Schema Changes</h2>
	<h3 class="western"><a name="New defaults for database names and owners|outline"></a>
	New defaults for database names and owners</h3>
	<p style="margin-top: 0.1in; margin-bottom: 0.08in"><span style="display: inline-block; border: none; padding: 0in"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">The
	defaults for database names are now such that each logical database
	is stored separately. Except for Chimera, this means that each RDBMS
	enabled service uses its own database. The default name is that of
	the service, e.g. </font></font></font><font color="#656974"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><code>srm</font></font></font></code><font color="#656974">
	</font><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">stores
	its data in a database called </font></font></font><font color="#656974"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><code>srm</font></font></font></code><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">,
	and the </font></font></font><font color="#656974"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><code>spacemanager</font></font></font></code><font color="#656974">
	</font><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">service
	stored its data in a database called </font></font></font><font color="#656974"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><code>spacemanager</font></font></font></code><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">.</span></font></font></font></p>
	<p style="margin-top: 0.1in; margin-bottom: 0.08in"><span style="display: inline-block; border: none; padding: 0in"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">The
	default owner has been changed to </font></font></font><font color="#656974"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><code>dcache</font></font></font></code><font color="#656974">
	</font><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">for
	all databases, including Chimera.</span></font></font></font></p>
	<p style="margin-top: 0.1in; margin-bottom: 0.08in"><span style="display: inline-block; border: none; padding: 0in"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">New
	common configuration properties control the defaults for all
	databases, but per service overrides are of course possible:</span></font></font></font></p>
	<pre>#<span style="display: inline-block; border: none; padding: 0in"><font color="#000000"><code>  </font></code><font color="#000000"><font face="Courier New, monospace"><font size="2" style="font-size: 10pt"><code>---- Default host of RDBMS used by various services.</span></font></font></font></code>
<span style="display: inline-block; border: none; padding: 0in"><font color="#000000"><font face="Courier New, monospace"><font size="2" style="font-size: 10pt"><code>#</span></font></font></font></code>
<span style="display: inline-block; border: none; padding: 0in"><font color="#000000"><font face="Courier New, monospace"><font size="2" style="font-size: 10pt"><code>#   Various services need an RDBMS. Each service is recommended to use its</span></font></font></font></code>
<span style="display: inline-block; border: none; padding: 0in"><font color="#000000"><font face="Courier New, monospace"><font size="2" style="font-size: 10pt"><code>#   own logical database, but these may or may not be hosted in the same RDBMS</span></font></font></font></code>
<span style="display: inline-block; border: none; padding: 0in"><font color="#000000"><font face="Courier New, monospace"><font size="2" style="font-size: 10pt"><code>#   instance. This setting defines the host of the RDBMS used.</span></font></font></font></code>
<span style="display: inline-block; border: none; padding: 0in"><font color="#000000"><font face="Courier New, monospace"><font size="2" style="font-size: 10pt"><code>#</span></font></font></font></code>
<span style="display: inline-block; border: none; padding: 0in"><font color="#000000"><font face="Courier New, monospace"><font size="2" style="font-size: 10pt"><code>dcache.db.host = localhost</span></font></font></font></code>

<span style="display: inline-block; border: none; padding: 0in"><font color="#000000"><font face="Courier New, monospace"><font size="2" style="font-size: 10pt"><code>#  ---- Default RDBMS user account by various services.</span></font></font></font></code>
<span style="display: inline-block; border: none; padding: 0in"><font color="#000000"><font face="Courier New, monospace"><font size="2" style="font-size: 10pt"><code>#</span></font></font></font></code>
<span style="display: inline-block; border: none; padding: 0in"><font color="#000000"><font face="Courier New, monospace"><font size="2" style="font-size: 10pt"><code>dcache.db.user = dcache</span></font></font></font></code>

<span style="display: inline-block; border: none; padding: 0in"><font color="#000000"><font face="Courier New, monospace"><font size="2" style="font-size: 10pt"><code>#  ---- Default password of RDBMS used by various services.</span></font></font></font></code>
<span style="display: inline-block; border: none; padding: 0in"><font color="#000000"><font face="Courier New, monospace"><font size="2" style="font-size: 10pt"><code>#</span></font></font></font></code>
<span style="display: inline-block; border: none; padding: 0in"><font color="#000000"><font face="Courier New, monospace"><font size="2" style="font-size: 10pt"><code>dcache.db.password =</span></font></font></font></code>

<span style="display: inline-block; border: none; padding: 0in"><font color="#000000"><font face="Courier New, monospace"><font size="2" style="font-size: 10pt"><code>#  ---- Default password file for RDBMS used by various services.</span></font></font></font></code>
<span style="display: inline-block; border: none; padding: 0in"><font color="#000000"><font face="Courier New, monospace"><font size="2" style="font-size: 10pt"><code>#</span></font></font></font></code>
<span style="display: inline-block; border: none; padding: 0in"><font color="#000000"><font face="Courier New, monospace"><font size="2" style="font-size: 10pt"><code>#   Follows the format of the PostgreSQL pgpass file format. Avoids putting</span></font></font></font></code>
<span style="display: inline-block; border: none; padding: 0in"><font color="#000000"><font face="Courier New, monospace"><font size="2" style="font-size: 10pt"><code>#   the passwords in the dCache configuration files.</span></font></font></font></code>
<span style="display: inline-block; border: none; padding: 0in"><font color="#000000"><font face="Courier New, monospace"><font size="2" style="font-size: 10pt"><code>#</span></font></font></font></code>
<span style="display: inline-block; border: none; padding: 0in"><font color="#000000"><font face="Courier New, monospace"><font size="2" style="font-size: 10pt"><code>dcache.db.password.file =</span></font></font></font></code></pre><p style="margin-top: 0.1in; margin-bottom: 0.08in">
	<span style="display: inline-block; border: none; padding: 0in"><font face="Roboto, Helvetica, sans-serif"><font size="2" style="font-size: 10pt"><font color="#656974">Upon
	upgrade, existing sites should update the settings to match the
	previous setup:</span></font></font></font></p>
	<pre><span style="display: inline-block; border: none; padding: 0in"><font color="#000000"><font face="Courier New, monospace"><font size="2" style="font-size: 10pt"><code>srm.db.name = dcache</span></font></font></font></code>
<span style="display: inline-block; border: none; padding: 0in"><font color="#000000"><font face="Courier New, monospace"><font size="2" style="font-size: 10pt"><code>srm.db.user = srmdcache</span></font></font></font></code>

<span style="display: inline-block; border: none; padding: 0in"><font color="#000000"><font face="Courier New, monospace"><font size="2" style="font-size: 10pt"><code>spacemanager.db.name = dcache</span></font></font></font></code>
<span style="display: inline-block; border: none; padding: 0in"><font color="#000000"><font face="Courier New, monospace"><font size="2" style="font-size: 10pt"><code>spacemanager.db.user = srmdcache</span></font></font></font></code>

<span style="display: inline-block; border: none; padding: 0in"><font color="#000000"><font face="Courier New, monospace"><font size="2" style="font-size: 10pt"><code>pinmanager.db.name = dcache</span></font></font></font></code>
<span style="display: inline-block; border: none; padding: 0in"><font color="#000000"><font face="Courier New, monospace"><font size="2" style="font-size: 10pt"><code>pinmanager.db.user = srmdcache</span></font></font></font></code>

<span style="display: inline-block; border: none; padding: 0in"><font color="#000000"><font face="Courier New, monospace"><font size="2" style="font-size: 10pt"><code>transfermanagers.db.name = dcache</span></font></font></font></code>
<span style="display: inline-block; border: none; padding: 0in"><font color="#000000"><font face="Courier New, monospace"><font size="2" style="font-size: 10pt"><code>transfermanagers.db.user = srmdcache</span></font></font></font></code>

<span style="display: inline-block; border: none; padding: 0in"><font color="#000000"><font face="Courier New, monospace"><font size="2" style="font-size: 10pt"><code>replica.db.name = replicas</span></font></font></font></code>
<span style="display: inline-block; border: none; padding: 0in"><font color="#000000"><font face="Courier New, monospace"><font size="2" style="font-size: 10pt"><code>replica.db.user = srmdcache</span></font></font></font></code>

<span style="display: inline-block; border: none; padding: 0in"><font color="#000000"><font face="Courier New, monospace"><font size="2" style="font-size: 10pt"><code>chimera.db.name = chimera</span></font></font></font></code>
<span style="display: inline-block; border: none; padding: 0in"><font color="#000000"><font face="Courier New, monospace"><font size="2" style="font-size: 10pt"><code>chimera.db.user = chimera</span></font></font></font></code>

<span style="display: inline-block; border: none; padding: 0in"><font color="#000000"><font face="Courier New, monospace"><font size="2" style="font-size: 10pt"><code>billing.db.name = billing</span></font></font></font></code>
<span style="display: inline-block; border: none; padding: 0in"><font color="#000000"><font face="Courier New, monospace"><font size="2" style="font-size: 10pt"><code>billing.db.user = srmdcache</span></font></font></font></code>

<span style="display: inline-block; border: none; padding: 0in"><font color="#000000"><font face="Courier New, monospace"><font size="2" style="font-size: 10pt"><code>alarms.db.name = alarms</span></font></font></font></code>
<span style="display: inline-block; border: none; padding: 0in"><font color="#000000"><font face="Courier New, monospace"><font size="2" style="font-size: 10pt"><code>alarms.db.user = srmdcache</span></font></font></font></code></pre><h3 class="western">
	chimera</h3>
	<p><font color="#333333"><font face="Helvetica Neue, Helvetica, Arial, sans-serif"><font size="2" style="font-size: 10pt">Changes
	on Chimera can be found at <a href="#Chimera / NameSpace changes|outline">Chimera
	/ NameSpace changes</a>.</font></font></font></p>
	<p><font color="#333333"><font face="Helvetica Neue, Helvetica, Arial, sans-serif"><font size="2" style="font-size: 10pt">Also,
	refer to <a href="#New defaults for database names and owners|outline">New
	defaults for database names and owners</a> for database changes
	related on Chimera.</font></font></font></p>
	<h1 class="western">Upgrade Procedure</h1>
	<h2 class="western"><a name="Steps|outline"></a>Steps</h2>
	<ol>
		<li/>
<p>If you use SRM, update to the latest SRM client version
		available.</p>
		<li/>
<p>Upgrade to the latest patch level release of the dCache
		release being in use.</p>
		<li/>
<p>Prior to upgrading, run <code>dcache check-config</code>
		and fix any warnings. Information about properties marked
		deprecated, obsolete or forbidden in version 2.10 or earlier has
		been dropped in 2.13. Failing to do this before upgrading will mean
		that you will not receive warnings or errors for using an old
		property.</p>
		<li/>
<p>If the node relies on any databases (you may check the
		output of <code>dcache database ls</code> to recognize the services
		that do), then tag the current schema version by running <code>dcache
		database tag dcache-2.10</code>.</p>
		<li/>
<p>If you have installed any third party plugins that offer
		new services (that you have instantiated in the layout file), then
		remove these and check with the vendor for updated versions.</p>
	</ol>
	<ul>
		<ul>
			<li/>
<p>CMS-TFC Plugins can be downloaded from <a href="https://www.dcache.org/downloads/xrootd4j/index.shtml">XRootD
			CMS-TFC Releases</a> in <a href="https://www.dcache.org/">dCache.org</a>.
						</p>
			<ul>
				<li/>
<p>Package <a href="https://www.dcache.org/downloads/xrootd4j/1.3/xrootd4j-cms-plugin-1.3.7-1.noarch.rpm">xrootd4j-cms-plugin-1.3.7-1.noarch.rpm</a>
				is actually working with dCache 2.13</p>
			</ul>
		</ul>
	</ul>
	<ul>
		<ul>
			<li/>
<p>ATLAS N2N Plugins can be downloaded from the <a href="http://linuxsoft.cern.ch/wlcg/sl6/x86_64/">WLCG
			Repository</a>. 
			</p>
			<ul>
				<li/>
<p>Package <a href="http://linuxsoft.cern.ch/wlcg/sl6/x86_64/dcache-xrootd-n2n-plugin-6.0.7-0.noarch.rpm">dcache-xrootd-n2n-plugin-6.0.7-0.noarch.rpm
				</a>is actually working with dCache 2.13.</p>
			</ul>
			<li/>
<p>XRootD Monitoring plugins can be found in the <a href="http://linuxsoft.cern.ch/wlcg/sl6/x86_64/">WLCG
			Repository</a>. 
			</p>
			<ul>
				<li/>
<p>Package <a href="http://linuxsoft.cern.ch/wlcg/sl6/x86_64/dcache-plugin-xrootd-monitor-7.0.0-0.noarch.rpm">dcache-plugin-xrootd-monitor-7.0.0-0.noarch.rpm</a>
				is actually working with dCache 2.13</p>
			</ul>
		</ul>
	</ul>
	<ol start="6">
		<li/>
<p>Run <code>dcache services</code> and compare the services
		with the <a href="#Table1|table">table listing changed services</a>.
		If any of those services are used, replace them with the suggested
		alternative after upgrading.</p>
		<li/>
<p>Ensure that <code><font color="#333333"><font size="2" style="font-size: 10pt">Java
		8 </font></font></code>is installed as your <i>default</i> Java (or
		<i>unique</i>). Otherwise, please remove/substitute <code><font color="#333333"><font size="2" style="font-size: 10pt">Java
		7</font></font></code> &amp; install <code><font color="#333333"><font size="2" style="font-size: 10pt">Java
		8</font></font></code>.</p>
		<li/>
<p>Install the dCache 2.13 package using your package
		manager.</p>
		<li/>
<p>Reset <code>/etc/dcache/logback.xml</code> to the default
		file. How this is done depends on your package manager: Debian will
		ask during package installation whether you want the new version
		from the package (say yes). RPM will leave the new version as
		<code>/etc/dcache/logback.xml.rpmnew</code> and expects you to copy
		it over.</p>
		<li/>
<p>If you used either <code>head</code>, <code>pool</code>,
		or <code>single</code> as the layout name, you should check that
		the package manager hasn't renamed your layout file.</p>
		<li/>
<p>Run <code>dcache check-config</code>. You will receive an
		error for any forbidden property and a warning for any deprecated
		or obsolete property. You will receive errors about unrecognized
		services defined in the layout file. You will also receive
		information about properties not recognized by dCache - if these
		are typos, fix them. Fix any errors and repeat.</p>
		<ol>
			<p>As a bare minimum, the following changes commonly have to be
			applied during this step:</p>
		</ol>
	</ol>
	<ul>
		<ul>
			<ul>
				<li/>
<p style="margin-bottom: 0in">Remove deprecated services. 
				</p>
				<li/>
<p style="margin-bottom: 0in">Replace the <code><font color="#333333"><font size="2" style="font-size: 10pt">srmspacemanager</font></font></code>
				service for <code><font color="#333333"><font size="2" style="font-size: 10pt">spacemanager</font></font></code><code><font color="#333333"><font face="Helvetica Neue, Helvetica, Arial, sans-serif"><font size="2" style="font-size: 10pt">.</font></font></font></code></p>
				<li/>
<p style="margin-bottom: 0in"><span style="display: inline-block; border: none; padding: 0in"><font color="#333333"><font size="2" style="font-size: 10pt"><code>dcache.enable.space-reservation</font></font></code><font color="#656974"><code>
				</font></code><font color="#333333"><font face="Helvetica Neue, Helvetica, Arial, sans-serif"><font size="2" style="font-size: 10pt"><code>is
				set to </font></font></font></code><font color="#333333"><font size="2" style="font-size: 10pt"><code>true</font></font></code><font color="#333333"><code>
				</font></code><font color="#333333"><font face="Helvetica Neue, Helvetica, Arial, sans-serif"><font size="2" style="font-size: 10pt"><code>by
				default. Check if this needs to be disabled for specific
				services.</span></font></font></font></code></p>
			</ul>
		</ul>
	</ul>
	<ol start="12">
		<li/>
<p>Verify that your HSM script can handle the <code>remove</code>
		command. If not, update the HSM script or disable the HSM cleaner.</p>
	</ol>
	<ul>
		<ul>
			<li/>
<p>Sites using <a href="http://www.fnal.gov/docs/products/enstore/">Enstore</a>
			will have to set c<code><font color="#333333"><font size="2" style="font-size: 10pt">leaner.enable.hsm=false</font></font></code><code><font color="#333333">
			</font></code><code><font color="#333333"><font face="Helvetica Neue, Helvetica, Arial, sans-serif"><font size="2" style="font-size: 10pt">in
			the </font></font></font></code><code><font color="#333333"><font size="2" style="font-size: 10pt">cleaner</font></font></code><code><font color="#333333">
			</font></code><code><font color="#333333"><font face="Helvetica Neue, Helvetica, Arial, sans-serif"><font size="2" style="font-size: 10pt">service.</font></font></font></code></p>
		</ul>
	</ul>
	<ol start="13">
		<li/>
<p>If you have customized the look of the <code>webdav</code>
		door, you should reset the style to the default and reapply any
		customizations.</p>
		<li/>
<p>If you are using <a href="https://www.dcache.org/downloads/gui/index.shtml"><font color="#333333"><font face="Helvetica Neue, Helvetica, Arial, sans-serif"><font size="2" style="font-size: 10pt">pCells</font></font></font></a>,
		please update to the latest version. Check the <a href="https://www.dcache.org/downloads/gui/index.shtml">GUI
		Download Page</a> in order to see which versions work with dCache
		2.13.</p>
		<li/>
<p>If the node relies on any databases, then update the
		schemas by running <code>dcache database update</code>.</p>
		<li/>
<p>Start dCache and verify that it works.</p>
		<li/>
<p>Run <code>dcache check-config</code> and fix any warnings.</p>
	</ol>
	<p>Note that some properties that were previously used by several
	services have to be replaced with a configuration for each service
	type. Check the documentation in <code>/usr/share/dcache/defaults</code>
	for any property you need to change.</p>
	<p>Also note that some properties have changed values or are
	inverted. The deprecated properties retain their old interpretation,
	however when replacing those with their new names, you have to
	update the value. In particular boolean properties that used to
	accept values like <em>yes</em>, <em>no</em>, <em>enabled</em>,
	<em>disabled</em>, now only accept <em>true</em> and <em>false</em>.</p>
	<h1 class="western">Frequently Asked Questions</h1>
	<h2 class="western">&lt;Question 1&gt;<script src="dCache%202.13%20Release%20Notes_files/jquery.js"></script><script src="dCache%202.13%20Release%20Notes_files/jquery-ui.js"></script><script src="dCache%202.13%20Release%20Notes_files/bootstrap.js"></script></h2>
	<h2 class="western">&lt;Question 2&gt;</h2>
	<p>.</p>
	<p>.</p>
	<p>.<script src="dCache%202.13%20Release%20Notes_files/jquery.js"></script></p>
	<h2 class="western"><span style="display: inline-block; border: none; padding: 0in"><font color="#000000"><font face="Courier New, monospace"><font size="2" style="font-size: 10pt"><code>&lt;Question
	N&gt;</span></font></font></font></code></h2>
</div>
<h2 class="western"><script src="dCache%202.13%20Release%20Notes_files/bootstrap.js"></script><br/>
<br/>

</h2>
</body>
</html>
